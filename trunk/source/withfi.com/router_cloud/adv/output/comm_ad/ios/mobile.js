!function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,e){e.exports={materialmaxsize:10,api:"/api/index.php",imgcode:"/imgcode.php",imgload:"/img_load.php",fontserver:"http://agoodme.com:3000",filter:["/","/mepcviews/explore.html","/mepcviews/pro.html","/mepcviews/nav.html","/mepcviews/login.html","/mepcviews/register.html","/mepcviews/reset_pass.html","/mepcviews/reset_pass_change.html","/mepcviews/establish.html","/mepcviews/make.html","/mepcviews/user.html","/mepcviews/excel.html","/mepcviews/preview.html"]}},{}],2:[function(t){var e=(t("../directive/render.js"),t("../config/env.js")),i=t("../directive/iscroll.js"),s=t("../directive/repeat.js"),n=t("../filter/mobile_filter.js"),o=(t("../directive/mesns_api.js"),t("../directive/barrage.js")),r="",a=0,h={meVIP0EndNode:'<menu><li class="active" data-target="#personal-wrapper"></li><li data-target="#hot-wrapper"></li></menu><a id="openapp" href="#"></a><div id="close"></div><div id="personal-wrapper" class=""><img id="face" src="author_img"><div id="nick"><label>author_name</label>&nbsp;&nbsp; <span style="font-size:28px">作品</span></div><div id="weixin" class="disabled">关注我的<a href="#">微信公众号</a></div><div class="hr"></div><p id="no-pro">继续创作<br>让这里充满你的创意</p><div class="pro-wrapper hide" id="user-pro-wrapper"><ul class="clearfloat" style="width:706px"><li repeat="user-pro"><img src="{{attributes.effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{attributes.tpl_id}}&amp;dataFrom=mobile"></li></ul></div></div><div id="hot-wrapper" class="hide"><div id="hot-arrow-left" class="hide"></div><div id="hot-arrow-right"></div><div id="hot-pro-wrapper"><div id="slider" class="swipe"><div class="swipe-wrap"><div class="left"><div class="pro-wrapper" style="margin-bottom:0;margin-top:0"><ul class="clearfloat" style="width:528px"><li repeat="hot1"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul><div class="hr" style="margin-top:12px;margin-bottom:12px"></div><ul class="clearfloat" style="width:528px"><li repeat="hot2"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul></div></div><div class="left"><div class="pro-wrapper" style="margin-bottom:0;margin-top:0"><ul class="clearfloat" style="width:528px"><li repeat="hot3"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul><div class="hr" style="margin-top:12px;margin-bottom:12px"></div><ul class="clearfloat" style="width:528px"><li repeat="hot4"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul></div></div></div></div></div></div><div id="ME"></div>',meVIP1EndNode:'<menu><li class="active" data-target="#personal-wrapper"></li><li data-target="#hot-wrapper"></li></menu><div id="personal-wrapper" class=""><img id="face" src="author_img"><div id="nick"><label>author_name</label>&nbsp;&nbsp; <span style="font-size:28px">作品</span></div><div id="weixin" class="disabled">关注我的<a href="#">微信公众号</a></div><div class="hr"></div><p id="no-pro">继续创作<br>让这里充满你的创意</p><div class="pro-wrapper hide" id="user-pro-wrapper"><ul class="clearfloat" style="width:706px"><li repeat="user-pro"><img src="{{attributes.effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{attributes.tpl_id}}&amp;dataFrom=mobile"></li></ul></div></div><div id="hot-wrapper" class="hide"><div id="hot-arrow-left" class="hide"></div><div id="hot-arrow-right"></div><div id="hot-pro-wrapper"><div id="slider" class="swipe"><div class="swipe-wrap"><div class="left"><div class="pro-wrapper" style="margin-bottom:0;margin-top:0"><ul class="clearfloat" style="width:528px"><li repeat="hot1"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul><div class="hr" style="margin-top:12px;margin-bottom:12px"></div><ul class="clearfloat" style="width:528px"><li repeat="hot2"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul></div></div><div class="left"><div class="pro-wrapper" style="margin-bottom:0;margin-top:0"><ul class="clearfloat" style="width:528px"><li repeat="hot3"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul><div class="hr" style="margin-top:12px;margin-bottom:12px"></div><ul class="clearfloat" style="width:528px"><li repeat="hot4"><a href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"><img src="{{effect_img|removeAv}}?imageView/2/w/148/h/233/format/jpeg" href="http://www.agoodme.com/views/mobile.html?tid={{tpl_id}}&amp;dataFrom=mobile"></a></li></ul></div></div></div></div></div></div><div id="ME"></div>',meVIP2EndNode:'<div style="background:#181818; width: 100%; height: 100%; "><menu style="background:#181818; height: 38px;"></menu><div id="vip2-wrapper" class=""><img id="vip-face" src="author_img"><div id="vip-nick"><label>author_name</label></div><div class="vip-hr"></div><div class="qrcode-waper"><div id="vip2-qrcode" target-href="{0}"></div></div><a href="{1}" class="click-link">{2}</a><div id="vip-ME"></div></div>',meVIP3EndNode:"",meVIP4EndNode:"",meVIP5EndNode:"",meVIP6EndNode:""};!function(t){function c(){var i=0,s=y.page_value;if(M)for(var n=0;n<s.length;n++)if(s[n].objectId==M){i=n;break}E.find("p").html(y.brief),D.title=y.name,E.find("label:nth-child(4)").html(y.author_name);var h=y.tpl_class,c=new dms.MagazineDisplay(".swiper-container");if(c.showMagazine(y,i),T.css("width",i/(c.pageLength-1)*100+"%"),"mobile"===B||"pc2-0"===B&&1!=h?(c.isLoop=!0,dms.model.queryUserLevelByUserId(r,function(t){if(t&&(a=t.get("vip_level")?t.get("vip_level"):0,a||0==a)){var e=u(y);e&&c.appendSlide(e),a>1?f():m()}},function(){})):"pc2-0"===B&&1==h&&(c.isLoop=!1),"mobile"===B){k=new o;var l={tpl_id:locationParams.tid,obj_id:s[i].objectId,tpl_user:r,tpl_share_img:y.tpl_share_img};t(".swiper-container").append(k.mainContainer()),k.init(c.swiper,void 0,l,c.getPageCommentsParentDom(i),void 0)}c.swiper.on("after",function(){if(k){if(y.page_value[this.current])var t=y.page_value[this.current].objectId;k.getCommentData(t,c.getPageCommentsParentDom(this.current))}}),c.swiper.on("dragEnd",function(){k&&k.deleteComment(c.getPageCommentsParentDom(this.current),!0)}),c.onSwipeTouchEnd=function(){T.css("width",c.currentPage/(c.pageLength-1)*100+"%"),c.currentPage===c.pageLength-1?("mobile"===B||"pc2-0"===B&&1!=h?P&&P.refresh():"pc2-0"===B&&1==h&&(t("#pc-ME").removeClass("hide").addClass("show"),"lr"!=_&&t("#arrow").hide(),g("pc-ME")),k&&k.hideContaner()):("pc2-0"===B&&1==h&&("lr"!=_&&t("#arrow").show(),t("#pc-ME").removeClass("show").addClass("hide")),k&&k.showContaner())},y.tpl_music&&""!==y.tpl_music&&(A.show(),w.attr("src",y.tpl_music));var v="";if((y.brief||y.label)&&(v=y.brief.substr(0,16),S.html(y.label.length>16?v+"......":v)),E.find("label:nth-child(2)").html(y.tpl_copyright),D.img_url=y.tpl_share_img,D.desc=y.brief,/micromessenger\/([0-9\.]+)/i.test(navigator.userAgent))p(RegExp.$1)?t.post(e.api+"?act=get_weixin_signature",{to_url:location.href},function(t){wx.config({debug:!1,appId:t.data.appid,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.error(function(){var t={title:D.title,desc:D.desc,link:D.link,imgUrl:D.img_url};wx.onMenuShareAppMessage(t),wx.onMenuShareTimeline(t),d()}),wx.ready(function(){wx.onMenuShareTimeline({title:D.title,link:D.link,imgUrl:D.img_url,success:function(){fmacapi.inc_share_ing(y.tpl_id,function(){},function(){})},cancel:function(){}}),wx.onMenuShareAppMessage({title:D.title,desc:D.desc,link:D.link,imgUrl:D.img_url,type:"link",dataUrl:"",success:function(){fmacapi.inc_share_ing(y.tpl_id,function(){},function(){})},cancel:function(){}}),wx.onMenuShareQQ({title:D.title,desc:D.desc,link:D.link,imgUrl:D.img_url,success:function(){fmacapi.inc_share_ing(y.tpl_id,function(){},function(){})},cancel:function(){}})})},"json"):d();else{var b={title:D.title,desc:D.desc,link:D.link,imgUrl:D.img_url};wx.onMenuShareAppMessage(b),wx.onMenuShareTimeline(b)}}function l(t){z.html(t).removeClass("fadeOut").addClass("fadeOut"),clearTimeout(L),L=setTimeout(function(){z.removeClass("fadeOut")},1e3)}function p(t){var e=t.split(".");return"6"===e[0]&&(parseInt(e[1])>=0||parseInt(e[3])>=2)?!0:!1}function d(){document.addEventListener("WeixinJSBridgeReady",function(){WeixinJSBridge.on("menu:share:appmessage",function(){WeixinJSBridge.invoke("sendAppMessage",D,function(){})}),WeixinJSBridge.on("menu:share:timeline",function(){WeixinJSBridge.invoke("shareTimeline",D,function(){})})},!1)}function u(t){var e;switch(a){case 0:e=h.meVIP0EndNode.replace("author_img",t.author_img).replace("author_name",t.author_name);break;case 1:e=h.meVIP1EndNode.replace("author_img",t.author_img).replace("author_name",t.author_name);break;case 2:var i=t.wechat_id;i&&""!=i||(i="http://me.agoodme.com/");var s=t.share_link_desc||"点击进入";e=h.meVIP2EndNode.replace("author_img",t.author_img).replace("author_name",t.author_name).replace("{0}",i).replace("{1}",i).replace("{2}",s)}return e}function m(){var e=!1,o=t("menu>li:first-child"),r=t("menu>li:last-child"),a=t("#personal-wrapper"),h=t("#hot-wrapper"),c=t("#hot-arrow-left"),l=t("#hot-arrow-right");o.tap(function(){h.hide(),a.show(),o.addClass("active"),r.removeClass("active"),P&&P.refresh()}),r.tap(function(){a.hide(),h.show(),r.addClass("active"),o.removeClass("active"),e||(e=!0,dms.model.queryHotTpl(function(t){var t=JSON.parse(t.attributes.tplend_html);s("hot1",t.slice(0,3),n),s("hot2",t.slice(3,6),n),s("hot3",t.slice(6,9),n),s("hot4",t.slice(9,12),n)},function(t){alert(t.msg)}),Swipe(document.getElementById("slider"),{startSlide:0,speed:400,continuous:!0,disableScroll:!1,stopPropagation:!1,callback:function(t){0===t?(l.show(),c.hide()):2===t?(c.show(),l.hide()):t>0&&2>t&&(l.show(),c.show())}}))}),t("#close").tap(function(){t("#openapp").remove(),t(this).remove()});var p=t("#weixin");y.wechat_id&&""!==y.wechat_id&&(t("#weixin").removeClass("disabled").find("a").attr("href",y.wechat_id),p.tap(function(t){t.preventDefault(),"A"===t.target.nodeName&&(location.href=t.target.getAttribute("href"))}));var d=t("#user-pro-wrapper"),u=t(".pro-wrapper");d.tap(function(t){"IMG"===t.target.nodeName&&(location.href=t.target.getAttribute("href"))}),u.tap(function(t){t.preventDefault(),"IMG"===t.target.nodeName&&(location.href=t.target.getAttribute("href"))}),dms.model.queryUserTplByUserId("","","read_int",!0,y.author,12,function(e){e.length>0&&(t("#no-pro").hide(),d.show(),t("#user-pro-wrapper>ul").width(176*e.length),s("user-pro",e,n),null==P&&(P=new i("#user-pro-wrapper",{scrollX:!0,onBeforeScrollStart:function(t){this.absDistX>this.absDistY+5&&t.preventDefault()},onTouchEnd:function(){var t=this;t.touchEndTimeId&&clearTimeout(t.touchEndTimeId),t.touchEndTimeId=setTimeout(function(){t.absDistX=0,t.absDistX=0},600)}})))},function(){}),g("openapp")}function f(){var e=t("#vip2-qrcode"),i=e[0].getAttribute("target-href")||"";e.tap(function(t){t.preventDefault(),t.stopPropagation();var e=t.target,s=e.getAttribute("target-href");"IMG"===t.target.nodeName&&(s=i),s&&(location.href=s)});var s=new QRCode(e[0],{width:308,height:308});s.makeCode(i)}function g(e){t("#"+e).tap(function(t){t.preventDefault(),t.stopPropagation();var e="";if("android"==O){if(e="http://me.agoodme.com/dl/me.apk",I.indexOf("micromessenger")>-1){var i=encodeURIComponent("http://a.app.qq.com/o/simple.jsp?pkgname=com.gli.cn.me");e="http://mp.weixin.qq.com/mp/redirect?url="+i}}else if(("ipad"==O||"iphone"==O)&&(e="https://itunes.apple.com/cn/app/mobigage-ndi/id917062901",I.indexOf("micromessenger")>-1)){var i=encodeURIComponent("http://a.app.qq.com/o/simple.jsp?pkgname=com.gli.cn.me");e="http://mp.weixin.qq.com/mp/redirect?url="+i}window.open(e)})}var v,y,_,b=t("#music"),w=t("audio"),x=(t("#box"),t(".swiper-wrapper")),A=t("#music-wrapper"),C=A.find("div"),T=t("#progress"),S=t("#label"),E=t("#introduction"),D={img_width:"100",img_height:"100",link:location.href},O="pc",k=null,P=null,B=locationParams.dataFrom,M=locationParams.pid,I=navigator.userAgent.toLowerCase();if(I.indexOf("firefox")>=0||I.indexOf("msie")>=0)return void alert("为了获得更好的体验，建议使用谷歌浏览器、\n360极速浏览器进行浏览创作");{var j=document.body.scrollHeight;document.body.clientWidth}3===window.devicePixelRatio&&(j+=1),O=navigator.userAgent.match(/Android/i)?"android":navigator.userAgent.match(/iPhone/i)?"iphone":navigator.userAgent.match(/iPad/i)?"ipad":navigator.userAgent.match(/Windows Phone/i)?"wphone":"pc",("mobile"===B||"pc2-0"===B)&&dms.model.getTplById(locationParams.tid,function(e){return y=e,null==e?void alert("作品不存在"):(t("title").html(y.name),r=e.author,c(),void 0)}),document.ontouchmove=function(t){t.preventDefault()};var F=A.find("section");x.on("touchend",function(){v||(b.addClass("spin"),C.addClass("note"),w[0].play(),v="on",l("Music On"))}),F.on("touchend",function(){b.hasClass("spin")?(w[0].pause(),b.removeClass("spin"),C.removeClass("note"),v="off",l("Music Off")):(w[0].play(),b.addClass("spin"),C.addClass("note"),v="on",l("Music On"))}),w.on("ended",function(){w[0].play()}),S.tap(function(){S.css({height:0,"-webkit-transition":"height 0s"}),E.css({height:j,"-webkit-transition":"height .5s"})}),E.find("footer").tap(function(){E.css({"-webkit-transition":"height .5s",height:0}),setTimeout(function(){S.css({height:"88px","-webkit-transition":"height .25s"})},500)});var L,z=t("#music-wrapper>span");l("Music Off")}(window.Zepto)},{"../config/env.js":1,"../directive/barrage.js":3,"../directive/iscroll.js":4,"../directive/mesns_api.js":5,"../directive/render.js":6,"../directive/repeat.js":7,"../filter/mobile_filter.js":8}],3:[function(t,e){var i=function(){this.contaner="",this.timer1=null,this.timer2=null,this.ist=!1,this.commentopenClose="",this.withoutBottom="",this.comment_other="",this.positionComment="",this.maskContaner="",this.replyContainer="",this.discussContaner="",this.tlpObjectId="",this.tlpDataID="",this.praiseSum=null,this.praiseSumCount={},this.commentSum=[],this.userCurrentId="",this.commentData={},this.currentMoveObj=null,this.commentListData={},this._mouseLock=!1,this.mesnsApi=null,this.zanFFrag=!0,this.MdSwiper=null,this.switchHideOpen=!0,this.commentType=1,this.ucontent="",this.msgObj={},this.TRANSFORM_DOWN={transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-webkit-transition":"all .5s ease",transition:"all .5s ease "},this.TRANSFORM_UP={transform:"translate3d(0,200px,0)","-webkit-transform":"translate3d(0,200px,0)","-webkit-transition":"all .5s ease",transition:"all .5s ease"},this.TRANSFORM_UP_dely={transform:"translate3d(0,200px,0)","-webkit-transform":"translate3d(0,200px,0)","-webkit-transition":"all .5s ease 1.5s",transition:"all .5s ease 1.5s"}};i.prototype.mainContainer=function(){var t=document.createElement("div");return t.id="barrage",this.contaner=t,this.contaner},i.prototype.init=function(t,e,i,s,n){function o(t){var e=document.createElement("div");e.className="comment-mask-parent",e.style.display="none",r.maskContaner=e;var i=document.createDocumentFragment();i.appendChild(r.commentSwitch()),i.appendChild(r.commentPosition()),i.appendChild(e),i.appendChild(r.replyTxtContainer()),r.contaner.appendChild(i),r.commentOther(),setTimeout(function(){t&&(r.withoutBottom&&t(),r.clickOtherComment(),$(r.commentopenClose).show())},2e3)}var r=this;this.MdSwiper=t,this.tlpObjectId=i.tpl_id,this.tlpDataID=i.obj_id,this.withoutBottom=e,this.comment_other=i.commentOther,this.msgObj={tpl_id:i.tpl_id,pageid:i.obj_id,tpl_user:i.tpl_user,effecturl:i.tpl_share_img},r.withoutBottom?r.getCurrentUser()?(r.userCurrentId=r.getCurrentUser().id,sns_data.getSnsLikeByUid(function(t){r.praiseSum=t,o(n),r.getCommentData(r.tlpDataID,s)},function(){console.log("获取当前用户id评论所有对象有错误")})):(r.praiseSum=[],o(n),r.getCommentData(r.tlpDataID,s),r.userCurrentId=void 0):(o(n),r.getCommentData(r.tlpDataID,s))},i.prototype.getCommentData=function(t,e){e&&(this.discussContaner=e);var i=this;if(i.deleteComment(this.discussContaner,!0),i.tlpDataID=t,this.msgObj.pageid=t,i.ist)if(i.commentListData[t])i.commentList(i.commentListData[t]);else{var s={comment_type:1,comment_id:t,orderby:"createdAt",isdesc:!0,pageSize:0,pageNumber:1e3};sns_data.getSnsComment(s,function(e){e.results.length&&(i.commentList(e.results),i.commentListData[t]=e.results)},function(t){console.log("错误信息"+t.toString())})}i.updataLike("belong_tplpage",t,i.withoutBottom)},i.prototype.commentList=function(t){for(var e=t.length,i=0,s=[],n=document.createDocumentFragment();e>i;i++){var o=$.parseJSON(t[i].get("comment_content")),r=t[i].get("comment_uid_pointer").get("user_pic"),a=t[i].id,h=t[i].get("comment_uid"),c=t[i].get("comment_uid_pointer").get("user_nick"),l=o.content,p=o.y,d=o.x;imgPos=o.imgPos;var u=this.createCommentList(a,h,c,r,l,p,d,imgPos);s.push(u),n.appendChild(u)}this.discussContaner.appendChild(n),this.flash(s)},i.prototype.createCommentList=function(t,e,i,s,n,o,r,a){var h=s?s:"http://ac-hf3jpeco.clouddn.com/XqjQmhDhDLz4rQzeKaQVyVW7OKqPU4CvQ7QKJlPm.jpg",c=document.createElement("div");return c.className="danmu",c.setAttribute("data-parentid",t),c.setAttribute("data-id",e),c.setAttribute("data-user-nick",i),c.innerHTML=a?'<div class="user-tpl-header user-tpl-header-right"><div class="user-img" style="background-image:url('+h+');"></div></div><div class="user-comment-txt" style="padding:10px 50px 10px 10px;">'+n+"</div>":'<div class="user-tpl-header user-tpl-header-left"><div class="user-img" style="background-image:url('+h+');"></div></div><div class="user-comment-txt" style="padding:10px 10px 10px 40px;">'+n+"</div>",c.style.cssText="top:"+o+"; left:"+r+";",c},i.prototype.flash=function(t){function e(){$.each(c,function(t,e){h.push(e)}),clearInterval(o.timer1),clearInterval(o.timer2),o.timer1=setInterval(i,1e3)}function i(){var t=h.length-1,i=s(0,t);$(h[i]).css({display:"block","z-index":r++}).animate({opacity:1},"slow","swing"),a.push(h.splice(i,1)),a.length>5&&n(a),0==h.length&&(clearInterval(o.timer1),0!=a.length&&(o.timer2=setInterval(function(){0==a.length?(clearInterval(o.timer2),e()):n(a)},1e3)))}function s(t,e){return parseInt(Math.random()*(t-e)+e)}function n(t){{var e=t.shift();t.length}clearTimeout(e.timer),e.timer=setTimeout(function(){$(e).animate({opacity:0},"slow","swing",function(){$(this).css("display","none"),clearTimeout(e.timer)})},700)}var o=this,r=2,a=[],h=[],c=[],l=t;0!=l.length&&($.each(l,function(t,e){var i=$(e).width()+parseInt($(e).css("left")),s=$(e).height()+parseInt($(e).css("top"));i>$(window).width()-30&&$(e).css("left",$(window).width()-($(e).width()+60)+"px"),s>$(window).height()-160&&$(e).css("top",$(window).width()-($(e).width()+160)+"px"),c.push(e)}),e(),i())},i.prototype.showContaner=function(){$(this.contaner).show()},i.prototype.hideContaner=function(){$(this.contaner).hide()},i.prototype.deleteComment=function(t,e){clearInterval(this.timer1),clearInterval(this.timer2),t&&(e?t.innerHTML="":$(t).find(".danmu").css("display","none"))},i.prototype.clickOtherComment=function(){var t=this,e=$(this.comment_other);if(t.withoutBottom){if(this.MdSwiper.container)var i=this.MdSwiper.container;$(i).on("tap",".danmu",function(i){i.preventDefault(),i.stopPropagation();var s=$(this).attr("data-id"),n=$(this).attr("data-parentid"),o=$(this).attr("data-user-nick");if(""!=s&&s!=t.userCurrentId){var r=$(this).clone().css("opacity",1);$(t.maskContaner).append($('<div class="comment-mask"></div>').append(r)),r=null,t.ucontent=$(this).find(".user-comment-txt").html(),t.commentType=2,$(t.replyContainer).attr("data-parentid",n),$(t.replyContainer).attr("data-id",s),$(t.replyContainer).attr("data-user-nick",o),$(t.replyContainer).attr("data-replyIs",!0),e.attr("data-parentid",n),e.attr("data-id",s),t.updataLike("comment_id",$(this).attr("data-parentid"),e,function(){$(t.maskContaner).show(),$(t.commentopenClose).show(),e.css(t.TRANSFORM_DOWN),t.withoutBottom.css(t.TRANSFORM_UP)})}}),$(t.maskContaner).on("touchstart",function(i){i.preventDefault(),i.stopPropagation(),$(this).empty().hide(),e.css(t.TRANSFORM_UP),$(t.replyContainer).css(t.TRANSFORM_UP),$(t.commentopenClose).show()})}},i.prototype.updataLike=function(t,e,i,s){function n(t,e,i){var s=e?"add-favorite":"add-favorite2",n=e?"add-favorite2":"add-favorite";html=' <div class="dianzan">  <div class="star-f '+s+'"></div>  <div class="star-t '+n+'"></div>  <span class="dianzan-num">'+t+"</span>  </div>",oDianzan.html(html),i&&i()}if(i){var o=this;html="",oDianzan=i.find(".user-zan"),bool=o.userDoLike(e),dzContainer=document.createElement("div"),o.praiseSumCount[e]?n(o.praiseSumCount[e],bool,s):sns_data.getSnsLikeCount(e,function(t){n(t,bool,s),o.praiseSumCount[e]=t.toString()},function(t){console.log("错误信息"+t.toString()),oDianzan.html("0")}),o.commentSum[e]?i.find(".huifu span").eq(0).html(o.commentSum[e]):sns_data.getSnsCommentCountByCid(t,e,function(t){o.commentSum[e]=t.toString(),i.find(".huifu span").eq(0).html(t)},function(t){console.log(t)})}},i.prototype.userDoLike=function(t,e){var i=null,s=-1;return $.each(this.praiseSum,function(e,n){return n.get("like_tplid")===t?(i=!0,s=e,!1):void(i=!1)}),e&&s>=0&&this.praiseSum.splice(s,1),i},i.prototype.commentSwitch=function(){var t=this,e=document.createElement("div");e.innerHTML='<div class="ping-swich"></div><div class="ping-swich"></div>',e.className="comment-switch";var i=$(e).find("div");return $(e).on("tap",function(e){e.preventDefault(),e.stopPropagation();var s=parseInt(i.eq(0).css("opacity"));s?(i.eq(0).css("opacity","0"),i.eq(1).css("opacity","1"),t.ist=!0,t.getCommentData(t.tlpDataID),$(".comment-discuss").removeClass("pointerEventsClose").addClass("pointerEventsOpen")):(t.deleteComment(t.discussContaner,!1),t.ist=!1,i.eq(0).css("opacity","1"),i.eq(1).css("opacity","0"),$(".comment-discuss").removeClass("pointerEventsOpen").addClass("pointerEventsClose"))}),this.commentopenClose=e,e},i.prototype.commentOther=function(){var t=this;$(this.comment_other).on("tap",".table-cell",function(e){e.preventDefault(),e.stopPropagation();var i=$(this).index();if(0===i){var s=t.comment_other.getAttribute("data-parentid"),n=t.comment_other.getAttribute("data-id");t.isLikeApi($(this),s,n),$(t.maskContaner).empty().hide(),$(t.comment_other).css(t.TRANSFORM_UP_dely)}else 1==i?($(t.replyContainer).css(t.TRANSFORM_DOWN),$(t.comment_other).css(t.TRANSFORM_UP)):(app.routers.appRouter.navigate("mz/other/personal_center/"+t.comment_other.getAttribute("data-id"),{replace:!0,trigger:!0}),$(t.maskContaner).empty().hide())})},i.prototype.isLikeApi=function(t,e,i){var s=this,n=t,o=n.find(".star-f"),r=n.find(".star-t"),a=n.find(".dianzan-num").eq(0),h=parseInt(a.html());if(s.zanFFrag)if(o.hasClass("add-favorite")){s.zanFFrag=!1;var c={like_opration:"cancerlike",like_type:1,like_tplid:e,belong_tpl:s.tlpObjectId,belong_comment:i?i:"",data_site:0};console.log("取消点赞",c),sns_data.snsSaveLike(c,function(){o.removeClass("add-favorite").addClass("add-favorite2"),r.removeClass("add-favorite2").addClass("add-favorite"),s.userDoLike(e,!0),a.html(--h),s.praiseSumCount[e]=--s.praiseSumCount[e],s.zanFFrag=!0},function(){})}else{var l={like_opration:"like",like_type:1,like_tplid:e,belong_tpl:s.tlpObjectId,belong_comment:i?i:"",data_site:0};console.log("点赞",l),s.zanFFrag=!1,sns_data.snsSaveLike(l,function(t){o.removeClass("add-favorite2").addClass("add-favorite"),r.removeClass("add-favorite").addClass("add-favorite2"),s.praiseSum.push(t),a.html(++h),s.praiseSumCount[e]=++s.praiseSumCount[e];var n={msg_recid:s.msgObj.tpl_user,msg_type:1,msg_obj:JSON.stringify(s.msgObj),mt_content:""};sns_data.msgAdd(n,function(){if(i){var t={msg_recid:i,msg_type:1,msg_obj:JSON.stringify(s.msgObj),mt_content:""};sns_data.msgAdd(t,function(){},function(t){console.log(t)})}s.zanFFrag=!0},function(t){console.log(t)})},function(){})}},i.prototype.replyTxtContainer=function(){function t(t){t.preventDefault(),t.stopPropagation(),e.MdSwiper.freeze(!0),e.switchHideOpen=!1;var i=$(s).attr("data-replyIs");e.commentData.imgPos=!1;var r=o.val().replace(/(^\s*)|(\s*$)/g,"");if(r=r.replace(/(<)+|(>)+/g,function(t){return"<"==t?"&lt;":"&gt;"}),0==r.length)return void n.off().css("color","#ccc");if("true"===i){$(e.positionComment).attr("data-parentid",$(s).attr("data-parentid")),$(e.positionComment).attr("data-id",$(s).attr("data-id"));var a=$(s).attr("data-id"),h=$(s).attr("data-user-nick");e.commentData=e.commentTxtJosn(r,h,a)}else $(e.positionComment).attr("data-parentid",e.tlpDataID),e.commentData.content=r;e.createElementTemp(r),$(s).css(e.TRANSFORM_UP),$(e.positionComment).css(e.TRANSFORM_DOWN),$(e.maskContaner).empty().hide(),o.val("").blur(),n.off().css("color","#ccc")}var e=this,i='<div class="reply-txt"> <div class="table-cell"><svg version="1.1" class="img" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="50px" height="50px" viewBox="0 0 1024 1024" enable-background="new 0 0 1024 1024" xml:space="preserve"><path fill="#f4c600" d="M511.999488 744.967304c-245.74903 0-444.967304-199.219297-444.967304-444.967304 0-245.748007 199.218274-444.967304 444.967304-444.967304 245.748007 0 444.967304 199.219297 444.967304 444.967304C956.966793 545.74903 757.747495 744.967304 511.999488 744.967304zM350.072539 533.502102c42.302455 0 76.596516-40.735773 76.596516-90.985224s-34.293037-90.985224-76.596516-90.985224c-42.303478 0-76.596516 40.735773-76.596516 90.985224S307.769061 533.502102 350.072539 533.502102zM509.523087 43.310803c-202.848964 4.956895-237.351779 171.880649-237.351779 171.880649 272.15033-223.125777 474.705606 0 474.705606 0C704.721815 43.273964 517.45678 43.273964 509.523087 43.310803zM674.365436 351.532677c-42.303478 0-76.597539 40.735773-76.597539 90.985224s34.294061 90.985224 76.597539 90.985224c42.302455 0 76.596516-40.735773 76.596516-90.985224S716.667891 351.532677 674.365436 351.532677z" transform="translate(0, 812) scale(1, -1)"/></svg></div> <div class="table-cell"><input class="reply-input" type="text" placeholder="我要评论(限50字)" maxlength="50" /></div> <div class="table-cell"><button type="button" class="sent-btn">发送</button></div></div>',s=document.createElement("div");s.className="reply-container",s.innerHTML=i;var n=$(s).find(".sent-btn"),o=$(s).find(".reply-input");return o.on("keyup",function(e){e.preventDefault(),e.stopPropagation();var i=this.value;0==i.length?n.off().css("color","#ccc"):(n.css("color","#005bff"),n.off().on("tap",t))}),this.replyContainer=s,s},i.prototype.showReplyTxtContainer=function(){$(this.replyContainer).css(this.TRANSFORM_DOWN).attr("data-replyIs","false"),$(this.commentopenClose).hide(),this.withoutBottom.css(this.TRANSFORM_UP).data("open",!1),$(this.maskContaner).show()},i.prototype.createElementTemp=function(t){var e=this,i=e.getCurrentUser().get("user_pic");e.commentData.x="300px",e.commentData.y="200px";var s=e.createCommentList("","","",i,t,"300px","200px",!1);e.currentMoveObj=s;var n=$(s);n.css({opacity:1,"z-index":3,display:"block"}),n.find(".user-comment-txt").addClass("border-green"),n.find(".user-img").addClass("border-green"),e.moveComent(s),e.discussContaner.appendChild(s)},i.prototype.commentPosition=function(){var t=this,e='<div class="table-cell active"><div class="huifu">确定</div></div><div class="table-cell"><div class="huifu">取消</div>',i=document.createElement("div");return i.className="comment-position",i.innerHTML=e,this.positionComment=i,$(this.positionComment).on("touchstart",".table-cell",function(e){e.preventDefault(),e.stopPropagation();var s=$(this).index(),n=$(i).attr("data-parentid"),o=$(t.currentMoveObj);if("true"===$(t.replyContainer).attr("data-replyIs"))var r=n;else var r="";if(0===s){var a=JSON.stringify(t.commentData);o.off(),t.replyComment(n,t.commentType,a,r,function(){$(t.replyContainer).css(t.TRANSFORM_UP).find(".reply-input").html("我要评论(限50字)"),t.commentSum[t.tlpDataID]=++t.commentSum[t.tlpDataID];var e=$(t.withoutBottom).find("span.com-num"),s=e.html();e.html(++s);var n={msg_recid:t.msgObj.tpl_user,msg_type:2,msg_obj:JSON.stringify(t.msgObj),mt_content:JSON.stringify(t.commentData)};sns_data.msgAdd(n,function(){if(2===t.commentType){var e=$(i).attr("data-id"),s={msg_recid:e,msg_type:2,msg_obj:JSON.stringify(t.msgObj),mt_content:JSON.stringify(t.commentData)};sns_data.msgAdd(s,function(){},function(t){console.log(t)})}},function(t){console.log(t)}),t.ist&&t.flash()})}else o.off().remove();t.MdSwiper.freeze(!1),$(i).css(t.TRANSFORM_UP),$(t.commentopenClose).show(),t.switchHideOpen=!0,o.find(".user-comment-txt").removeClass("border-green"),o.find(".user-img").removeClass("border-green")}),i},i.prototype.switchHide=function(){if(this.switchHideOpen){var t=this,e=t.withoutBottom.data("open");e?($(t.commentopenClose).show(),t.withoutBottom.css(t.TRANSFORM_UP).data("open",!1)):($(t.commentopenClose).hide(),t.withoutBottom.css(t.TRANSFORM_DOWN).data("open",!0)),$(t.positionComment).css(t.TRANSFORM_UP),$(t.replyContainer).css(t.TRANSFORM_UP),t.currentMoveObj&&$(t.currentMoveObj).remove()}},i.prototype.replyComment=function(t,e,i,s,n){var o=this,r={};r.comment_id=t,r.comment_type=e,r.comment_uid=this.userCurrentId,r.comment_content=i,r.data_site=0,r.belong_comment=s,r.belong_tpl=this.tlpObjectId,r.belong_tplpage=this.tlpDataID,sns_data.snsSaveComment(r,function(t){o.ist&&(o.commentListData[o.tlpDataID]||(o.commentListData[o.tlpDataID]=[],o.commentListData[o.tlpDataID].push(t)),o.commentListData[o.tlpDataID].push(t)),n&&n(t)},function(t){console.log("评论失败,错误信息"+t.toString())})},i.prototype.commentTxtJosn=function(t,e,i){var s={};return s.content=t,this.ucontent&&(s.ucontent=this.ucontent),s.uname=e,s.uid=i,s},i.prototype.animationEnd=function(t,e){$(t).on("webkitAnimationEnd animationend",function(){e&&e()})},i.prototype.moveComent=function(t){function e(e){e.preventDefault(),e.stopPropagation(),a=$(n.discussContaner).width()-o.width()-40,h=$(n.discussContaner).height()-o.height();var i=e.originalEvent.targetTouches;if(1==i.length){var s=i[0];c=s.pageX-t.offsetLeft,l=s.pageY-t.offsetTop}}function i(t){t.preventDefault(),t.stopPropagation();var e=t.originalEvent.targetTouches;if(1==e.length){var i=e[0],s=i.pageX-c,u=i.pageY-l;s>a&&(s=a),40>s&&(s=40),i.pageX>r/2?(d.removeClass("user-tpl-header-left").addClass("user-tpl-header-right"),p.css("padding","10px 40px 10px 10px"),n.commentData.imgPos=!0):(d.removeClass("user-tpl-header-right").addClass("user-tpl-header-left"),p.css("padding","10px 10px 10px 40px"),n.commentData.imgPos=!1),u>h-100&&(u=h-100),50>u&&(u=50),o.css({left:s+"px",top:u+"px"})
}}function s(t){t.preventDefault(),t.stopPropagation(),n.commentData.x=o.css("left"),n.commentData.y=o.css("top")}var n=this,o=$(t),r=$(window).width(),a=0,h=0,c=0,l=0,p=o.find(".user-comment-txt"),d=(o.find(".user-img"),o.find(".user-tpl-header"));o.off(),o.on("touchstart",e),o.on("touchmove",i),o.on("touchend",s)},i.prototype.destroy=function(){clearInterval(this.timer1),clearInterval(this.timer2),document.body.removeChild(this.contaner)},i.prototype.getCurrentUser=function(){var t=fmacloud.User.current();return t?t:null},"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof e&&"undefined"!=typeof e.exports?e.exports=i:window.Barrage=i},{}],4:[function(t,e){!function(t,i,s){function n(t,e){this.wrapper="string"==typeof t?i.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var s in e)this.options[s]=e[s];this.translateZ=this.options.HWCompositing&&h.hasPerspective?" translateZ(0)":"",this.options.useTransition=h.hasTransition&&this.options.useTransition,this.options.useTransform=h.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?h.ease[this.options.bounceEasing]||h.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function o(t,e,s){var n=i.createElement("div"),o=i.createElement("div");return s===!0&&(n.style.cssText="position:absolute;z-index:9999",o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),o.className="iScrollIndicator","h"==t?(s===!0&&(n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",o.style.height="100%"),n.className="iScrollHorizontalScrollbar"):(s===!0&&(n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",o.style.width="100%"),n.className="iScrollVerticalScrollbar"),n.style.cssText+=";overflow:hidden",e||(n.style.pointerEvents="none"),n.appendChild(o),n}function r(e,s){this.wrapper="string"==typeof s.el?i.querySelector(s.el):s.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var n in s)this.options[n]=s[n];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(h.addEvent(this.indicator,"touchstart",this),h.addEvent(t,"touchend",this)),this.options.disablePointer||(h.addEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.addEvent(t,h.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(h.addEvent(this.indicator,"mousedown",this),h.addEvent(t,"mouseup",this))),this.options.fade&&(this.wrapperStyle[h.style.transform]=this.scroller.translateZ,this.wrapperStyle[h.style.transitionDuration]=h.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}var a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},h=function(){function e(t){return r===!1?!1:""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}var n={},o=i.createElement("div").style,r=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,s=e.length;s>i;i++)if(t=e[i]+"ransform",t in o)return e[i].substr(0,e[i].length-1);return!1}();n.getTime=Date.now||function(){return(new Date).getTime()},n.extend=function(t,e){for(var i in e)t[i]=e[i]},n.addEvent=function(t,e,i,s){t.addEventListener(e,i,!!s)},n.removeEvent=function(t,e,i,s){t.removeEventListener(e,i,!!s)},n.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},n.momentum=function(t,e,i,n,o,r){var a,h,c=t-e,l=s.abs(c)/i;return r=void 0===r?6e-4:r,a=t+l*l/(2*r)*(0>c?-1:1),h=l/r,n>a?(a=o?n-o/2.5*(l/8):n,c=s.abs(a-t),h=c/l):a>0&&(a=o?o/2.5*(l/8):0,c=s.abs(t)+a,h=c/l),{destination:s.round(a),duration:h}};var a=e("transform");return n.extend(n,{hasTransform:a!==!1,hasPerspective:e("perspective")in o,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:e("transition")in o}),n.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),n.extend(n.style={},{transform:a,transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),transitionDelay:e("transitionDelay"),transformOrigin:e("transformOrigin")}),n.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},n.addClass=function(t,e){if(!n.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},n.removeClass=function(t,e){if(n.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},n.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},n.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},n.extend(n.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),n.extend(n.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return s.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,i=.4;return 0===t?0:1==t?1:i*s.pow(2,-10*t)*s.sin(2*(t-e/4)*s.PI/e)+1}}}),n.tap=function(t,e){var s=i.createEvent("Event");s.initEvent(e,!0,!0),s.pageX=t.pageX,s.pageY=t.pageY,t.target.dispatchEvent(s)},n.click=function(t){var e,s=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(s.tagName)||(e=i.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,s.screenX,s.screenY,s.clientX,s.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,s.dispatchEvent(e))},n}();n.prototype={version:"5.1.2",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if(!(1!=h.eventType[t.type]&&0!==t.button||!this.enabled||this.initiated&&h.eventType[t.type]!==this.initiated)){!this.options.preventDefault||h.isBadAndroid||h.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,i=t.touches?t.touches[0]:t;this.initiated=h.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=h.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(s.round(e.x),s.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&h.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,i,n,o,r=t.touches?t.touches[0]:t,a=r.pageX-this.pointX,c=r.pageY-this.pointY,l=h.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=a,this.distY+=c,n=s.abs(this.distX),o=s.abs(this.distY),!(l-this.endTime>300&&10>n&&10>o)){if(this.directionLocked||this.options.freeScroll||(this.directionLocked=n>o+this.options.directionLockThreshold?"h":o>=n+this.options.directionLockThreshold?"v":"n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}a=this.hasHorizontalScroll?a:0,c=this.hasVerticalScroll?c:0,e=this.x+a,i=this.y+c,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+a/3:e>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+c/3:i>0?0:this.maxScrollY),this.directionX=a>0?-1:0>a?1:0,this.directionY=c>0?-1:0>c?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,i),l-this.startTime>300&&(this.startTime=l,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&h.eventType[t.type]===this.initiated){this.options.preventDefault&&!h.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,i,n=(t.changedTouches?t.changedTouches[0]:t,h.getTime()-this.startTime),o=s.round(this.x),r=s.round(this.y),a=s.abs(o-this.startX),c=s.abs(r-this.startY),l=0,p="";if(this.isInTransition=0,this.initiated=0,this.endTime=h.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(o,r),!this.moved)return this.options.tap&&h.tap(t,this.options.tap),this.options.click&&h.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>n&&100>a&&100>c)return void this._execEvent("flick");if(this.options.momentum&&300>n&&(e=this.hasHorizontalScroll?h.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},i=this.hasVerticalScroll?h.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},o=e.destination,r=i.destination,l=s.max(e.duration,i.duration),this.isInTransition=1),this.options.snap){var d=this._nearestSnap(o,r);this.currentPage=d,l=this.options.snapSpeed||s.max(s.max(s.min(s.abs(o-d.x),1e3),s.min(s.abs(r-d.y),1e3)),300),o=d.x,r=d.y,this.directionX=0,this.directionY=0,p=this.options.bounceEasing}return o!=this.x||r!=this.y?((o>0||o<this.maxScrollX||r>0||r<this.maxScrollY)&&(p=h.ease.quadratic),void this.scrollTo(o,r,l,p)):void this._execEvent("scrollEnd")}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),e==this.x&&i==this.y?!1:(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=h.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;i>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,s){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,s)},scrollTo:function(t,e,i,s){s=s||h.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&s.style?(this._transitionTimingFunction(s.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,s.fn),e-500<=this.maxScrollY&&this._execEvent("scrollLimit")},scrollToElement:function(t,e,i,n,o){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=h.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,i===!0&&(i=s.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),n===!0&&(n=s.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=i||0,r.top-=n||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,e=void 0===e||null===e||"auto"===e?s.max(s.abs(this.x-r.left),s.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,o)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[h.style.transitionDuration]=t+"ms",!t&&h.isBadAndroid&&(this.scrollerStyle[h.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[h.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[h.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=s.round(t),e=s.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(e){var i=e?h.removeEvent:h.addEvent,s=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(s,"mousemove",this),i(s,"mousecancel",this),i(s,"mouseup",this)),h.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,h.prefixPointerEvent("pointerdown"),this),i(s,h.prefixPointerEvent("pointermove"),this),i(s,h.prefixPointerEvent("pointercancel"),this),i(s,h.prefixPointerEvent("pointerup"),this)),h.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(s,"touchmove",this),i(s,"touchcancel",this),i(s,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,s=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(s=s[h.style.transform].split(")")[0].split(", "),e=+(s[12]||s[4]),i=+(s[13]||s[5])):(e=+s.left.replace(/[^-\d.]/g,""),i=+s.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initIndicators:function(){function t(t){for(var e=a.indicators.length;e--;)t.call(a.indicators[e])}var e,i=this.options.interactiveScrollbars,s="string"!=typeof this.options.scrollbars,n=[],a=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={el:o("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(e.el),n.push(e)),this.options.scrollX&&(e={el:o("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:s,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(e.el),n.push(e))),this.options.indicators&&(n=n.concat(this.options.indicators));for(var h=n.length;h--;)this.indicators.push(new r(this,n[h]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){h.addEvent(this.wrapper,"wheel",this),h.addEvent(this.wrapper,"mousewheel",this),h.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){h.removeEvent(this.wrapper,"wheel",this),h.removeEvent(this.wrapper,"mousewheel",this),h.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,i,n,o,r=this;void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout);if(this.wheelTimeout=setTimeout(function(){r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in t)e=-t.deltaX,i=-t.deltaY;else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=i,i=0),this.options.snap)return n=this.currentPage.pageX,o=this.currentPage.pageY,e>0?n--:0>e&&n++,i>0?o--:0>i&&o++,void this.goToPage(n,o);n=this.x+s.round(this.hasHorizontalScroll?e:0),o=this.y+s.round(this.hasVerticalScroll?i:0),n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),o>0?o=0:o<this.maxScrollY&&(o=this.maxScrollY),this.scrollTo(n,o,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,n,o,r,a=0,h=0,c=0,l=this.options.snapStepX||this.wrapperWidth,p=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(i=s.round(l/2),n=s.round(p/2);c>-this.scrollerWidth;){for(this.pages[a]=[],t=0,o=0;o>-this.scrollerHeight;)this.pages[a][t]={x:s.max(c,this.maxScrollX),y:s.max(o,this.maxScrollY),width:l,height:p,cx:c-i,cy:o-n},o-=p,t++;c-=l,a++}else for(r=this.options.snap,t=r.length,e=-1;t>a;a++)(0===a||r[a].offsetLeft<=r[a-1].offsetLeft)&&(h=0,e++),this.pages[h]||(this.pages[h]=[]),c=s.max(-r[a].offsetLeft,this.maxScrollX),o=s.max(-r[a].offsetTop,this.maxScrollY),i=c-s.round(r[a].offsetWidth/2),n=o-s.round(r[a].offsetHeight/2),this.pages[h][e]={x:c,y:o,width:r[a].offsetWidth,height:r[a].offsetHeight,cx:i,cy:n},c>this.maxScrollX&&h++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.x-this.startX),1e3),s.min(s.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,n=this.pages.length,o=0;if(s.abs(t-this.absStartX)<this.snapThresholdX&&s.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);n>i;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(n=this.pages[i].length;n>o;o++)if(e>=this.pages[0][o].cy){e=this.pages[0][o].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),o==this.currentPage.pageY&&(o+=this.directionY,0>o?o=0:o>=this.pages[0].length&&(o=this.pages[0].length-1),e=this.pages[0][o].y),{x:t,y:e,pageX:i,pageY:o}},goToPage:function(t,e,i,n){n=n||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var o=this.pages[t][e].x,r=this.pages[t][e].y;i=void 0===i?this.options.snapSpeed||s.max(s.max(s.min(s.abs(o-this.x),1e3),s.min(s.abs(r-this.y),1e3)),300):i,this.currentPage={x:o,y:r,pageX:t,pageY:e},this.scrollTo(o,r,i,n)},next:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,s++),this.goToPage(i,s,t,e)},prev:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;i--,0>i&&this.hasVerticalScroll&&(i=0,s--),this.goToPage(i,s,t,e)},_initKeys:function(){var e,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in i)this.options.keyBindings[e]=this.options.keyBindings[e]||i[e];h.addEvent(t,"keydown",this),this.on("destroy",function(){h.removeEvent(t,"keydown",this)})},_key:function(t){if(this.enabled){var e,i=this.options.snap,n=i?this.currentPage.pageX:this.x,o=i?this.currentPage.pageY:this.y,r=h.getTime(),a=this.keyTime||0,c=.25;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(s.round(e.x),s.round(e.y)),this.isInTransition=!1),this.keyAcceleration=200>r-a?s.min(this.keyAcceleration+c,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?n+=i?1:this.wrapperWidth:o+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?n-=i?1:this.wrapperWidth:o-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:n=i?this.pages.length-1:this.maxScrollX,o=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=0,o=0;break;case this.options.keyBindings.left:n+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:o+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:o-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(n,o);n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollX&&(n=this.maxScrollX,this.keyAcceleration=0),o>0?(o=0,this.keyAcceleration=0):o<this.maxScrollY&&(o=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(n,o,0),this.keyTime=r}},_animate:function(t,e,i,s){function n(){var d,u,m,f=h.getTime();return f>=p?(o.isAnimating=!1,o._translate(t,e),void(o.resetPosition(o.options.bounceTime)||o._execEvent("scrollEnd"))):(f=(f-l)/i,m=s(f),d=(t-r)*m+r,u=(e-c)*m+c,o._translate(d,u),void(o.isAnimating&&a(n)))}var o=this,r=this.x,c=this.y,l=h.getTime(),p=l+i;this.isAnimating=!0,n()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},r.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(h.removeEvent(this.indicator,"touchstart",this),h.removeEvent(this.indicator,h.prefixPointerEvent("pointerdown"),this),h.removeEvent(this.indicator,"mousedown",this),h.removeEvent(t,"touchmove",this),h.removeEvent(t,h.prefixPointerEvent("pointermove"),this),h.removeEvent(t,"mousemove",this),h.removeEvent(t,"touchend",this),h.removeEvent(t,h.prefixPointerEvent("pointerup"),this),h.removeEvent(t,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var i=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=h.getTime(),this.options.disableTouch||h.addEvent(t,"touchmove",this),this.options.disablePointer||h.addEvent(t,h.prefixPointerEvent("pointermove"),this),this.options.disableMouse||h.addEvent(t,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(t){{var e,i,s,n,o=t.touches?t.touches[0]:t;h.getTime()}this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=o.pageX-this.lastPointX,this.lastPointX=o.pageX,i=o.pageY-this.lastPointY,this.lastPointY=o.pageY,s=this.x+e,n=this.y+i,this._pos(s,n),t.preventDefault(),t.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),h.removeEvent(t,"touchmove",this),h.removeEvent(t,h.prefixPointerEvent("pointermove"),this),h.removeEvent(t,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),n=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.scroller.x-i.x),1e3),s.min(s.abs(this.scroller.y-i.y),1e3)),300);(this.scroller.x!=i.x||this.scroller.y!=i.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,n,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(t){t=t||0,this.indicatorStyle[h.style.transitionDuration]=t+"ms",!t&&h.isBadAndroid&&(this.indicatorStyle[h.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[h.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.indicatorStyle.display=this.options.listenX&&!this.options.listenY?this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.scroller.hasVerticalScroll?"block":"none":this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(h.addClass(this.wrapper,"iScrollBothScrollbars"),h.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(h.removeClass(this.wrapper,"iScrollBothScrollbars"),h.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=s.max(s.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=s.max(s.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&s.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&s.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=s.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=s.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=s.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=s.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[h.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){0>t?t=0:t>this.maxPosX&&(t=this.maxPosX),0>e?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?s.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?s.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)
},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,s=t?0:300;t=t?"1":"0",this.wrapperStyle[h.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),s)}}},n.utils=h,"undefined"!=typeof e&&e.exports?e.exports=n:t.IScroll=n,t.IScroll=n}(window,document,Math)},{}],5:[function(){var t={};t.getCurrentUser=function(){var t=fmacloud.User.current();return t?t:null},t.getCountUnreadMsg=function(t,e){var i=this.getCurrentUser();if(i){var s=" select count(*) from me_message where msg_recid='"+i.id+"'   and msg_status=0  or objectId in  ( select objectId from me_message where msg_recid='0'   and msg_textid_str not in ( select msg_textid_str  from me_message where msg_recid='"+i.id+"' ))";fmacloud.Query.doCloudQuery(s,{success:t,error:e})}},t.getSysMessageByUserid=function(t,e,i){var s=this.getCurrentUser(),n=t.pageSize,o=t.pageNumber,r=t.isdesc,a=t.orderby;if(s){var h=0,c=o;0!=n&&(h=n*o);var l=" select include msg_sendid,include msg_textid,* from me_message   where msg_recid='"+s.id+"' and msg_type=0 and msg_status!=2 or objectId in  ( select objectId from me_message where msg_recid='0' and msg_status!=2 and msg_textid_str not in ( select msg_textid_str  from me_message where msg_recid='"+s.id+"' ))";l+=r?" order by "+a+" desc ":" order by "+a+" asc ",h>=0&&c>0&&(l+=" limit "+h+","+c),fmacloud.Query.doCloudQuery(l,{success:e,error:i})}},t.getMessageByMsgType=function(t,e,i){var s=this.getCurrentUser(),n=t.msg_type,o=t.pageSize,r=t.pageNumber,a=t.isdesc,h=t.orderby;if(n&&s){var c=0,l=r;0!=o&&(c=o*r);var p=" select include msg_sendid,include msg_textid,* from me_message where msg_recid='"+s.id+"' and msg_type="+parseInt(n);p+=a?" order by "+h+" desc ":" order by "+h+" asc ",c>=0&&l>0&&(p+=" limit "+c+","+l),AV.Query.doCloudQuery(p,{success:e,error:i})}},t.viewSysMsg=function(t,e,i){if(t){var s=this.getCurrentUser(),n=fmacloud.Object.extend("me_message"),o=new n;o.set("msg_sendid",t.get("msg_sendid")),s&&o.set("msg_recid",s.id),o.set("msg_textid",t.get("msg_textid")),o.set("msg_textid_str",t.get("msg_textid_str")),o.set("msg_type",0),o.set("msg_status",1),o.set("msg_obj",t.get("msg_obj")),o.save(null,{success:e,error:i})}},t.msgAdd=function(t,e,i){var s=this.getCurrentUser(),n=t.msg_recid,o=t.msg_type,r=t.msg_obj,a=t.mt_content;if(r&&s&&n){var h=fmacloud.Object.extend("me_messagetext"),c=new h;c.set("mt_content",a),c.save(null,{success:function(t){var a=fmacloud.Object.extend("me_message"),h=new a;h.set("msg_sendid",s),h.set("msg_recid",n),h.set("msg_textid",t),h.set("msg_textid_str",t.id),h.set("msg_type",o),h.set("msg_obj",r),h.set("msg_status",0),h.save(null,{success:e,error:i})},error:function(t){console.log(t)}})}},t.msgStatusChange=function(t,e,i){t&&(t.set("msg_status",1),t.save(null,{success:e,error:i}))},t.msgDelete=function(t,e,i,s){if(t)if(0==e&&0==t.get("msg_status"))if("0"==t.get("msg_recid")){var n=t.clone();this.getCurrentUser()&&n.set("msg_recid",this.getCurrentUser().id),n.set("msg_status",2),n.save(null,{success:i,error:s})}else t.set("msg_status",2),t.save(null,{success:i,error:s});else{var o=t.get("msg_textid");o&&o.destroy({success:function(){t.destroy({success:i,error:s})},error:function(t,e){console.log(e.message)}})}},t.getSnsLikeCount=function(t,e,i){if(t){var s=new fmacloud.Query("me_like");s.equalTo("like_tplid",t),s.equalTo("like_state",0),s.count({success:e,error:i})}},t.getSnsLikeByUid=function(t,e){var i=this.getCurrentUser();if(i){var s=new fmacloud.Query("me_like");s.equalTo("like_userid",i.id),s.equalTo("like_state",0),s.find({success:t,eeror:e})}},t.getSnsLike=function(t,e,i,s,n,o,r,a){var h=new fmacloud.Query("me_like");t.length>0&&h.equalTo("like_userid",t),e.length>0&&h.equalTo("like_tplid",e),h.equalTo("like_state",1),n>=0&&o>0&&(h.limit(o),h.skip(n)),i.length>0&&(s?h.descending(i):h.ascending(i)),h.find({success:r,error:a})},t.snsSaveLike=function(t,e,i){var s=this.getCurrentUser(),n=t.like_opration,o=t.like_type,r=t.like_tplid,a=t.data_site||0,h=t.belong_tpl||"",c=t.belong_tplpage||"",l=t.belong_comment||"";if(r&&s){var p=s.id,d=function(){var t=new fmacloud.Query("me_like");t.equalTo("like_userid",p),t.equalTo("like_tplid",r),t.first({success:function(t){if(t)"like"==n?(t.set("like_state",0),t.save(null,{success:e,error:i})):"cancerlike"==n&&(t.set("like_state",1),t.save(null,{success:e,error:i}));else{var t=fmacloud.Object.extend("me_like"),d=new t;d.set("like_userid",p),d.set("like_tplid",r),d.set("like_type",o),d.set("like_state",0),d.set("like_uid_pointer",s),d.set("data_site",a),d.set("belong_tpl",h),d.set("belong_tplpage",c),d.set("belong_comment",l),d.save(null,{success:e,error:i})}},error:function(){console.log("点赞出错:"+eeror.message)}})};if(0==o){var u=new fmacloud.Query("tplobj");u.descending("cratedAt"),u.equalTo("tpl_id",r),u.first(function(t){if(t){var e=t.get("like_int")||0;"like"==n?t.set("like_int",e+1):"cancerlike"==n&&e>0&&t.set("like_int",e-1),t.save(null,{success:function(){d()},error:function(t,e){console.log("点赞出错:"+e.message)}})}},function(t){console.log("点赞出错:"+t.message)})}else d()}},t.getSingleConversation=function(t,e,i,s){if(0!=t.length&&0!=e.length){var n=[t,e],o=new fmacloud.Query("_Conversation");o.containsAll("m",n),o.equalTo("c_type",0),o.first({success:i,error:s})}},t.getSnsCommentCountByCid=function(t,e,i,s){var n=new fmacloud.Query("me_comment");n.equalTo(t,e),n.count({success:i,error:s})},t.getSnsComment=function(t,e,i){var s=t.comment_type,n=t.comment_id,o=t.orderby,r=t.isdesc,a=t.pageSize,h=t.pageNumber,c=0,l=h;if(0!=a&&(c=a*h),n){var p=" select include comment_uid_pointer.user_nick,comment_uid_pointer.user_pic,comment_content,comment_uid from me_comment where  comment_state=0 and comment_display=0 ";0==s?p+=" and  belong_tpl='"+n+"'":1==s?p+=" and  belong_tplpage='"+n+"'":2==s&&(p+=" and  belong_comment='"+n+"'"),p+=r?" order by "+o+" desc ":" order by "+o+" asc ",c>=0&&l>0&&(p+=" limit "+c+","+l),fmacloud.Query.doCloudQuery(p,{success:e,error:i})}},t.snsSaveComment=function(t,e,i){var s=t.comment_id,n=t.comment_type,o=t.comment_uid,r=t.comment_content,a=t.data_site||0,h=t.belong_comment||"",c=t.belong_tpl||"",l=t.belong_tplpage||"";if(o&&s&&this.getCurrentUser()){var p=this.getCurrentUser();if(p){var d=fmacloud.Object.extend("me_comment"),u=new d;u.set("comment_id",s),u.set("comment_type",parseInt(n)),u.set("comment_uid",o),u.set("comment_display",0),u.set("comment_content",r),u.set("data_site",parseInt(a)),u.set("comment_uid_pointer",p),0!=h.length&&u.set("belong_comment",h),0!=c.length&&u.set("belong_tpl",c),0!=l.length&&u.set("belong_tplpage",l),u.save(null,{success:e,error:i})}}},window.sns_data=t},{}],6:[function(){window.Zepto&&!function(t){function e(t,e,i,s){return Math.abs(t-e)>=Math.abs(i-s)?t-e>0?"Left":"Right":i-s>0?"Up":"Down"}function i(){l=null,d.last&&(d.el.trigger("longTap"),d={})}function s(){l&&clearTimeout(l),l=null}function n(){a&&clearTimeout(a),h&&clearTimeout(h),c&&clearTimeout(c),l&&clearTimeout(l),a=h=c=l=null,d={}}function o(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function r(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var a,h,c,l,p,d={},u=750,m=!1;t(document).ready(function(){var f,g,v,y,_=0,b=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),t(document).bind("MSGestureEnd",function(t){console.log("ttend");var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(d.el.trigger("swipe"),d.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(!(y=r(e,"down"))||o(e))&&(v=y?e:e.touches[0],e.touches&&1===e.touches.length&&d.x2&&(d.x2=void 0,d.y2=void 0),f=Date.now(),g=f-(d.last||f),d.el=t("tagName"in v.target?v.target:v.target.parentNode),a&&clearTimeout(a),d.x1=v.pageX,d.y1=v.pageY,g>0&&250>=g&&(d.isDoubleTap=!0),d.last=f,l=setTimeout(i,u),p&&y&&p.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(y=r(t,"move"))||o(t))&&(v=y?t:t.touches[0],s(),d.x2=v.pageX,d.y2=v.pageY,_+=Math.abs(d.x1-d.x2),b+=Math.abs(d.y1-d.y2))}).on("touchend MSPointerUp pointerup",function(){m||(m=!0,setTimeout(function(){m=!1},50),d.x2&&Math.abs(d.x1-d.x2)>30||d.y2&&Math.abs(d.y1-d.y2)>30?c=setTimeout(function(){d.el.trigger("swipe"),d.el.trigger("swipe"+e(d.x1,d.x2,d.y1,d.y2)),d={}},0):"last"in d&&(30>_&&30>b?h=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=n,d.el.trigger(e),d.isDoubleTap?(d.el&&d.el.trigger("doubleTap"),d={}):a=setTimeout(function(){a=null,d.el&&d.el.trigger("singleTap"),d={}},250)},0):d={}),_=b=0)}).on("touchcancel MSPointerCancel pointercancel",n),t(window).on("scroll",n)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto),function(t,e,i){"use strict";function s(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?k[D.call(t)]||"object":typeof t}function n(t){var e=s(t);return!!t&&"function"!=e&&"string"!=e&&(0===t.length||t.length&&(1==t.nodeType||t.length-1 in t))}function o(t){return(t+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/gi,function(t,e){return(e+"").toUpperCase()})}function r(t){var e=o(t),i=o(A+e);return e in x&&e||i in x&&i||""}function a(t){return"function"==s(t)}function h(t){var e,i=0;if("number"==s(t.length))i=t.length;else if("keys"in Object)i=Object.keys(t).length;else for(e in t)t.hasOwnProperty(e)&&i++;return i}function c(t,e){return"item"in t?t.item(e):function(){var t,i=0;for(t in this)if(i++==e)return this[t]}.call(t,e)}function l(t,e){if(n(t)){if("function"==s(t.forEach))return t.forEach(e);for(var i,o=0,r=t.length;r>o;o++)i=t[o],"undefined"!=s(i)&&e(i,o,t)}else{var a;for(a in t)e(a,t[a],t)}}function p(t){var e=[];return l(t.children||t.childNodes,function(t){1==t.nodeType&&e.push(t)}),e}function d(e,i){var s=t.getComputedStyle&&t.getComputedStyle(e,null)||e.currentStyle||e.style;return s[i]}function u(t,e,i){return"object"==s(e)?l(e,function(e,i){u(t,e,i)}):void l(e.split(" "),function(e){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i})}function m(t,e,i){return"object"==s(e)?l(e,function(e,i){m(t,e,i)}):void l(e.split(" "),function(e){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null})}function f(){var e;t.getSelection?(e=getSelection(),"empty"in e?e.empty():"removeAllRanges"in e&&e.removeAllRanges()):w.selection.empty()}function g(t){var e,i,s={},n=t.which,o=t.button;if(l("wheelDelta detail which".split(" "),function(e){s[e]=t[e]}),s.oldEvent=t,s.type=t.type.toLowerCase(),s.eventType=P[s.type]||s.type,s.eventCode=B[s.type]||0,s.pointerType=M[t.pointerType]||t.pointerType||s.eventType,s.target=t.target||t.srcElement||w.documentElement,3===s.target.nodeType&&(s.target=s.target.parentNode),s.preventDefault=function(){t.preventDefault&&t.preventDefault(),s.returnValue=t.returnValue=!1},e=F[s.eventType]){switch(s.eventType){case"mouse":case"pointer":var r=t.pointerId||0;3==s.eventCode?delete e[r]:e[r]=t;break;case"touch":F[s.eventType]=e=t.touches}(i=c(e,0))&&(s.clientX=i.clientX,s.clientY=i.clientY),s.button=4>n?Math.max(0,n-1):4&o&&1||2&o,s.length=h(e)}return s}var v="2.3.2",y=0,_=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(t){var e=+new Date,i=Math.max(1e3/60,1e3/60-(e-y));return y=e+i,setTimeout(t,i)},b=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout,w=t.document,x=w.createElement("div").style,A=function(){for(var t,e="-webkit- -moz- -o- -ms-".split(" ");t=e.shift();)if(o(t+"transform")in x)return t;return""}(),C=r("opacity"),T=r("transform"),S=r("perspective"),E=r("transform-style"),D=(r("transform-origin"),r("backface-visibility"),E&&function(){return x[E]="preserve-3d","preserve-3d"==x[E]}(),Object.prototype.toString),O=[].slice,k={},P={},B={click:4,mousewheel:5,dommousescroll:5,keydown:6},M={2:"touch",3:"pen",4:"mouse",pen:"pen"},I=[],j=[],F=(function(){var t={},e={start:1,down:1,move:2,end:3,up:3,cancel:3};return l("mouse touch pointer MSPointer-".split(" "),function(i){var s=/pointer/i.test(i)?"pointer":i;t[s]=t[s]||{},M[s]=s,l(e,function(e,n){var r=o(i+e);t[s][r]=n,P[r.toLowerCase()]=s,B[r.toLowerCase()]=n,1==n?I.push(r):j.push(r)})}),t}(),{touch:{},pointer:{},mouse:{}}),L={linear:function(t,e,i,s){return i*t/s+e},ease:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},"ease-in":function(t,e,i,s){return i*(t/=s)*t*t+e},"ease-out":function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},"ease-in-out":function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},bounce:function(t,e,i,s){return(t/=s)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}},z={fade:function(t,e,i){C?(t.style.opacity=1-Math.abs(e),i&&(i.style.opacity=Math.abs(e))):(t.style.filter="alpha(opacity="+100*(1-Math.abs(e))+")",i&&(i.style.filter="alpha(opacity="+100*Math.abs(e)+")"))}};l("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t){k["[object "+t+"]"]=t.toLowerCase()}),l("X Y ".split(" "),function(t){var e={X:"left",Y:"top"},i=S?" translateZ(0)":"";z["slide"+t]=function(){z["slideCoverReverse"+t].apply(this,arguments)},z["scroll"+t]=function(s,n,o,r){var a=t||["X","Y"][this.direction];T?s.style[T]="translate"+a+"("+100*n+"%)"+i:s.style[e[a]]=100*n+"%",o&&(T?o.style[T]="translate"+a+"("+100*r+"%)"+i:o.style[e[a]]=100*r+"%")},z["flowCover"+s+t]=function(e,n,o,r){var a=t||["X","Y"][this.direction],h=Number("In"==s||!s&&0>n||"Reverse"==s&&n>0);T?(e.style[T]="translate"+a+"("+n*(100-50*h)+"%) scale("+(.5*(1-Math.abs(n))+.5)+")"+i,e.style.zIndex=1-h,o&&(o.style[T]="translate"+a+"("+r*(50+50*h)+"%) scale("+(.5*(1-Math.abs(r))+.5)+")"+i,o.style.zIndex=h)):z["scrollCover"+s+t].apply(this,arguments)},z["zoom"+t]=function(e,s,n){var o=Number(Math.abs(s)<.5);T?(e.style[T]="scale"+t+"("+Math.abs(1-2*Math.abs(s))+")"+i,e.style.zIndex=o,n&&(n.style[T]="scale"+t+"("+Math.abs(1-2*Math.abs(s))+")"+i,n.style.zIndex=1-o)):z["scroll"+t].apply(this,arguments)},z["bomb"+t]=function(e,s,n){var o=Number(Math.abs(s)<.5),r=Math.abs(1-2*Math.abs(s));T?(e.style[T]="scale"+t+"("+(2-r)+")"+i,e.style.opacity=o?r:0,e.style.zIndex=o,n&&(n.style[T]="scale"+t+"("+(2-r)+")"+i,n.style.opacity=o?0:r,n.style.zIndex=1-o)):z["scroll"+t].apply(this,arguments)},l(" Reverse In Out".split(" "),function(e){z["slideCover"+e+t]=function(s,n,o,r){var a=t||["X","Y"][this.direction],h=Number("In"==e||!e&&0>n||"Reverse"==e&&n>0);T&&(s.style[T]="translate"+a+"("+n*(100-100*h)+"%) scale("+(.2*(1-Math.abs(h&&n))+.8)+")"+i,s.style.zIndex=1-h,o&&(o.style[T]="translate"+a+"("+r*h*100+"%) scale("+(.2*(1-Math.abs(h?0:r))+.8)+")"+i,o.style.zIndex=h))}})}),e.prototype={version:v,constructor:e,latestTime:0,init:function(t){var e=this,i=this.handler=function(t){var i=!1;""!=e.filterCla&&$(t.srcElement).parents().each(function(){$(this).hasClass(e.filterCla)&&(i=!0)}),!i&&!e.frozen&&e.handleEvent(t)};this.events={},this.duration=isNaN(parseInt(t.duration))?600:parseInt(t.duration),this.direction=0==parseInt(t.direction)?0:1,this.current=parseInt(t.start)||0,this.loop=!!t.loop,this.mouse=null==t.mouse?!0:!!t.mouse,this.mousewheel=!!t.mousewheel,this.interval=parseInt(t.interval)||5e3,this.playing=!!t.autoplay,this.arrowkey=!!t.arrowkey,this.frozen=!!t.freeze,this.pages=p(this.container),this.length=this.pages.length,this.mouseLock=!1,this.pageData=[],this.filterCla=t.filterCla||"",u(this.container,I.join(" ")+" click"+(this.mousewheel?" mousewheel DOMMouseScroll":""),i),u(w,j.join(" ")+(this.arrowkey?" keydown":""),i),l(this.pages,function(t){e.pageData.push({percent:0,cssText:t.style.cssText||""}),e.initStyle(t)}),this.pages[this.current].style.display="block",this.on({before:function(){clearTimeout(this.playTimer)},dragStart:function(){clearTimeout(this.playTimer),f()},after:this.firePlay,update:null}).firePlay(),this.setEase(t.ease),this.setTransition(t.transition)},initStyle:function(t){var e,i=t.style;return l("position:absolute;top:0;left:0;width:100%;height:100%;display:none".split(";"),function(t){e=t.split(":"),i[e[0]]=e[1]}),t},setEase:function(t){return this.ease=a(t)?t:L[t]||L.ease,this},addEase:function(t,e){return a(e)&&(L[t]=e),this},setTransition:function(t){return this.events.update.splice(0,1,a(t)?t:z[t]||z.slide),this},addTransition:function(t,e){return a(e)&&(z[t]=e),this},isStatic:function(){return!this.timer&&!this.drag},resetContainerStyle:function(){this.container.style.transform="translateZ(0px) rotateX(0deg)"},on:function(t,e){var i=this;return"object"==s(t)?l(t,function(t,e){i.on(t,e)}):(this.events[t]||(this.events[t]=[]),this.events[t].push(e)),this},fire:function(t){var e=this,i=O.call(arguments,1);return l(this.events[t]||[],function(t){a(t)&&t.apply(e,i)}),this},freeze:function(t){return this.frozen=null==t?!0:!!t,this},slide:function(t){function e(){var t=Math.min(s,+new Date-n),h=s?o(t,0,1,s):1,p=(d-c)*h+c;i.fixUpdate(p,r,l),t==s?(u&&(u.style.display="none"),delete i.timer,i.isTransing=!1,i.fire("after",a,r)):i.timer=_(e)}this.resetContainerStyle();var i=this,s=(this.direction,this.duration),n=+new Date,o=this.ease,r=this.current,a=Math.min(this.length-1,Math.max(0,this.fixIndex(t))),h=this.pages[r],c=this.getPercent(),l=this.fixIndex(a==r?r+(c>0?-1:1):a),p=this.pages[l],d=t>r?-1:1,u=h;return b(this.timer),a==r?(d=0,u=p):"none"==p.style.display&&(c=0),this.fixBlock(r,l),this.fire("before",r,a),this.current=a,s*=Math.abs(d-c),this.latestTime=n+s,e(),this},prev:function(){return this.slide(this.current-1)},next:function(){return this.slide(this.current+1)},play:function(){return this.playing=!0,this.firePlay()},firePlay:function(){var t=this;if(this.playing){if(!t.loop&&t.current==t.pages.length-1)return;this.playTimer=setTimeout(function(){console.log((t.current+1)%(t.loop?1/0:t.length))},this.interval)}return this},pause:function(){return this.playing=!1,clearTimeout(this.playTimer),this},fixIndex:function(t){return this.length>1&&this.loop?(this.length+t)%this.length:t},fixBlock:function(t,e){return l(this.pages,function(i,s){i.style.display=t!=s&&e!=s?"none":"block"}),this},fixUpdate:function(t,e,i){var s,n=this.pageData,o=this.pages[e],r=this.pages[i];return n[e].percent=t,r&&(s=n[i].percent=t>0?t-1:1+t),this.fire("update",o,t,r,s)},getPercent:function(t){var e=this.pageData[null==t?this.current:t];return e&&(e.percent||0)},getOffsetParent:function(){var t=d(this.container,"position");return t&&"static"!=t?this.container:this.container.offsetParent||w.body},handleEvent:function(t){if(this.isDown||!this.mouseLock||!this.isTransing){this.isDown=!0;var e=g(t),i=e.button<1&&e.length<2&&(!this.pointerType||this.pointerType==e.eventType)&&(this.mouse||"mouse"!=e.pointerType);switch(e.eventCode){case 2:if(i&&this.rect){var s,n,o=this.current,r=this.direction,a=[e.clientX,e.clientY],h=this.rect,c=a[r]-h[r],p=(this.pages[o],this.offsetParent[r?"clientHeight":"clientWidth"]);if(null==this.drag&&h.toString()!=a.toString()){if(this.mouseLock&&this.isTransing)return;this.resetContainerStyle();var d=a[1-r]-h[1-r];this.drag=Math.abs(c)>=Math.abs(d),this.drag&&(this.isTransing=!0,this.fire("dragStart",e))}this.drag&&(n=this.percent+(p&&c/p),this.pages[s=this.fixIndex(o+(n>0?-1:1))]||(n/=Math.abs(c)/p+2),this.fixBlock(o,s),this.fire("dragMove",e),this.fixUpdate(n,o,s),this._offset=c,e.preventDefault())}break;case 1:case 3:if(i){var u,c,m,f,v=this,y=this.current,n=this.getPercent();e.length&&(1==e.eventCode||this.drag)?(f=e.target.nodeName.toLowerCase(),clearTimeout(this.eventTimer),this.pointerType||(this.pointerType=e.eventType),this.timer&&(b(this.timer),delete this.timer),this.rect=[e.clientX,e.clientY],this.percent=n,this.time=+new Date,this.offsetParent=this.getOffsetParent(),"touch"==e.eventType||"a"!=f&&"img"!=f||e.preventDefault()):(m=this.time)&&(c=this._offset,u=this.drag,l("rect drag time percent _offset offsetParent".split(" "),function(t){delete v[t]}),u&&((+new Date-m<500&&Math.abs(c)>20||Math.abs(n)>.2)&&(y+=c>0?-1:1),this.isDown=!1,this.fire("dragEnd",e),e.preventDefault()),n?this.slide(y):u&&this.firePlay(),this.eventTimer=setTimeout(function(){delete v.pointerType},400))}break;case 4:this.timer&&e.preventDefault();break;case 5:if(e.preventDefault(),this.isStatic()&&+new Date-this.latestTime>Math.max(1e3-this.duration,0)){var _=e.wheelDelta||-e.detail;Math.abs(_)>=3&&this[_>0?"prev":"next"]()}break;case 6:var f=e.target.nodeName.toLowerCase();if(this.isStatic()&&"input"!=f&&"textarea"!=f&&"select"!=f)switch(e.keyCode||e.which){case 33:case 37:case 38:this.prev();break;case 32:case 34:case 39:case 40:this.next();break;case 35:this.slide(this.length-1);break;case 36:this.slide(0)}}}},destroy:function(){var t=this.pageData;return m(this.container,I.join(" ")+" click"+(this.mousewheel?" mousewheel DOMMouseScroll":""),this.handler),m(w,j.join(" ")+(this.arrowkey?" keydown":""),this.handler),l(this.pages,function(e,i){e.style.cssText=t[i].cssText}),this.length=0,this.pause()},append:function(t,e){return(null==e||e===i)&&(e=this.pages.length),this.pageData.splice(e,0,{percent:0,cssText:t.style.cssText}),this.pages.splice(e,0,t),this.container.appendChild(this.initStyle(t)),this.length=this.pages.length,e<=this.current&&this.current++,this},prepend:function(t){return this.append(t,0)},insertBefore:function(t,e){return this.append(t,e-1)},insertAfter:function(t,e){return this.append(t,e+1)},remove:function(t){return this.container.removeChild(this.pages[t]),this.pages.splice(t,1),this.pageData.splice(t,1),this.length=this.pages.length,t<=this.current&&this.slide(this.current=Math.max(0,this.current-1)),this}},l("Ease Transition".split(" "),function(t){e["add"+t]=e.prototype["add"+t]}),t.pageSwitch=e}(window,function(t,e){return this instanceof arguments.callee?(this.container="string"==typeof t?document.getElementById(t):t,void this.init(e||{})):new arguments.callee(t,e)}),window.Zepto&&!function(t,e){function i(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function s(t){return n?n+t:t.toLowerCase()}var n,o,r,a,h,c,l,p,d,u,m="",f={Webkit:"webkit",Moz:"",O:"o"},g=document.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};t.each(f,function(t,i){return g.style[t+"TransitionProperty"]!==e?(m="-"+t.toLowerCase()+"-",n=i,!1):void 0}),o=m+"transform",y[r=m+"transition-property"]=y[a=m+"transition-duration"]=y[c=m+"transition-delay"]=y[h=m+"transition-timing-function"]=y[l=m+"animation-name"]=y[p=m+"animation-duration"]=y[u=m+"animation-delay"]=y[d=m+"animation-timing-function"]="",t.fx={off:n===e&&g.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:s("TransitionEnd"),animationEnd:s("AnimationEnd")},t.fn.animate=function(i,s,n,o,r){return t.isFunction(s)&&(o=s,n=e,s=e),t.isFunction(n)&&(o=n,n=e),t.isPlainObject(s)&&(n=s.easing,o=s.complete,r=s.delay,s=s.duration),s&&(s=("number"==typeof s?s:t.fx.speeds[s]||t.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(i,s,n,o,r)},t.fn.anim=function(s,n,m,f,g){var _,b,w,x={},A="",C=this,T=t.fx.transitionEnd,S=!1;if(n===e&&(n=t.fx.speeds._default/1e3),g===e&&(g=0),t.fx.off&&(n=0),"string"==typeof s)x[l]=s,x[p]=n+"s",x[u]=g+"s",x[d]=m||"linear",T=t.fx.animationEnd;else{b=[];for(_ in s)v.test(_)?A+=_+"("+s[_]+") ":(x[_]=s[_],b.push(i(_)));A&&(x[o]=A,b.push(o)),n>0&&"object"==typeof s&&(x[r]=b.join(", "),x[a]=n+"s",x[c]=g+"s",x[h]=m||"linear")}return w=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(T,w)}else t(this).unbind(T,w);S=!0,t(this).css(y),f&&f.call(this)},n>0&&(this.bind(T,w),setTimeout(function(){S||w.call(C)},1e3*(n+g)+25)),this.size()&&this.get(0).clientLeft,this.css(x),0>=n&&setTimeout(function(){C.each(function(){w.call(this)})},0),this},g=null}(Zepto);var t=window.dms={IMAGE_LOAD_ERROR:"imageLoadError",IMAGE_LOADED:"image_loaded"};t.VERSION=1.6,t.animationMouseLock={},t.pageAnimation={},t.inherits=function(t,e){Agile.Utils.inherits(t,e)},t.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},t.isString=function(t){return"string"==typeof t||"[object String]"==Object.prototype.toString.call(t)},t.id=0|998*Math.random(),t.defaultDepth=100,t.getNewID=function(){return this.id++,this.id},t.isJsonObject=function(t){return t&&0==t.indexOf("{")&&t.lastIndexOf("}")==t.length-1?!0:!1},t.toJSON=function(t){return new Function("","return "+t)()},t.isPC=function(){for(var t=navigator.userAgent,e=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),i=!0,s=0;s<e.length;s++)if(t.indexOf(e[s])>0){i=!1;break}return i},t.DisplayObject=function(){this.element||(this.element=document.createElement("div"));var e=this.element.style;this._style=e,e.position="absolute",this._x=0,this._y=0,this._z=0,this._left=0,this._top=0,this._alpha=1,this._rotationX=0,this._rotationY=0,this._rotationZ=0,this._scaleX=1,this._scaleY=1,this._scaleZ=1,this._width=0,this._height=0,this._regX=null,this._regY=null,this._regZ=null,this._zIndex=t.defaultDepth,this.maxChildrenDepth=0,this.zIndex=this._zIndex,this.parent=null,this._backgroundImage=null,this._backgroundColor=null,this.children=[],this.numChildren=0,this.left=0,this.top=0},t.DisplayObject.prototype={get left(){return this._left},set left(t){this._left=t,this._style.left=t+"px"},get top(){return this._top},set top(t){this._top=t,this._style.top=t+"px"},get x(){return this._x},set x(t){this._x=t,this.transform()},get y(){return this._y},set y(t){this._y=t,this.transform()},get z(){return this._z},set z(t){this._z=t,this.transform()},get width(){return this._width},set width(t){this._width=t,this.element.style.width=t+"px"},get height(){return this._height},set height(t){this._height=t,this.element.style.height=t+"px"},get backgroundImage(){return this._backgroundImage},set backgroundImage(t){this._backgroundImage=t,this.element.style.backgroundImage="url("+t+")"},get backgroundColor(){return this._backgroundColor},set backgroundColor(t){this._backgroundColor=t,this.element.style.backgroundColor=t},get alpha(){return this._alpha},set alpha(t){this._alpha=t,this.element.style.opacity=t},get rotationX(){return this._rotationX},set rotationX(t){this._rotationX=t,this.transform()},get rotationY(){return this._rotationY},set rotationY(t){this._rotationY=t,this.transform()},get rotationZ(){return this._rotationZ},set rotationZ(t){this._rotationZ=t,this.transform()},get rotation(){return this.rotationZ},set rotation(t){this.rotationZ=t},get scaleX(){return this._scaleX},set scaleX(t){this._scaleX=t,this.transform()},get scaleY(){return this._scaleY},set scaleY(t){this._scaleY=t,this.transform()},get scaleZ(){return this._scaleZ},set scaleZ(t){this._scaleZ=t,this.transform()},get regX(){return this._regX},set regX(t){this._regX=t,this.resetReg()},get regY(){return this._regY},set regY(t){this._regY=t,this.resetReg()},get zIndex(){return this._zIndex},set zIndex(t){this._zIndex=t,this.css2("zIndex",this.zIndex)}},t.DisplayObject.prototype.addChild=function(e){this.maxChildrenDepth++,e.zIndex=t.defaultDepth+this.maxChildrenDepth,e.parent!=this&&(this.children.push(e),this.numChildren++,this.element.appendChild(e.element),e.parent=this)},t.DisplayObject.prototype.addChildAt=function(t,e){this.addChild(t),t.zIndex=e},t.DisplayObject.prototype.removeChild=function(e){var i;(i=this.children.indexOf(e))>-1&&(this.children.splice(i,1),this.numChildren--,this.element.removeChild(e.element),e.zIndex=t.defaultDepth,e.parent=null)},t.DisplayObject.prototype.addClass=function(e){t.Css.addClass(this.element,e)},t.DisplayObject.prototype.removeClass=function(e){t.Css.removeClass(this.element,e)},t.DisplayObject.prototype.transform=function(){var t="translate3d("+this._x+"px,"+this._y+"px,"+this._z+"px) ",e="rotateX("+this._rotationX+"deg) rotateY("+this._rotationY+"deg) rotateZ("+this._rotationZ+"deg) ",i="scale3d("+this._scaleX+","+this._scaleY+","+this._scaleZ+") ";this.css3("transform",t+e+i)},t.DisplayObject.prototype.resetReg=function(){if(null===this._regX&&null===this._regY)this.css3("transformOrigin","");else{this._regX=this._regX||0,this._regY=this._regY||0;var t=100*parseFloat(this._regX)+"%",e=100*parseFloat(this._regY)+"%";this.css3("transformOrigin",t+" "+e)}},t.DisplayObject.prototype.css3d=function(t){this.element.parentNode.parentNode.style.webkitPerspective="1000px",this.element.parentNode.parentNode.style.perspective="1000px",this.element.parentNode.parentNode.style.overflow="hidden",this.element.parentNode.style.backfaceVisibility="hidden",this.element.parentNode.style.webkitTransformStyle="preserve-3d",this.element.parentNode.style.transformStyle="preserve-3d",this.element.parentNode.style.webkitTransition="webkit-transform "+t+"s",this.element.parentNode.style.transition="transform "+t+"s"},t.DisplayObject.prototype.css2d=function(){this.element.parentNode.style.webkitTransformStyle="flat",this.element.parentNode.style.transformStyle="flat",this.element.parentNode.style.webkitTransition="all 0s",this.element.parentNode.style.transition="all 0s"},t.DisplayObject.prototype.parentCss3=function(e,i){t.Css.css3(this.element.parentNode,e,i)},t.DisplayObject.prototype.css3=function(e,i){t.Css.css3(this.element,e,i)},t.DisplayObject.prototype.parentCss2=function(e,i){t.Css.css2(this.element.parentNode,e,i)},t.DisplayObject.prototype.css2=function(e,i){t.Css.css2(this.element,e,i)},t.DisplayObject.prototype.addEventListener=function(t,e,i){this.element.addEventListener(t,e,i)},t.DisplayObject.prototype.removeEventListener=function(t,e,i){this.element.removeEventListener(t,e,i)},t.DisplayObject.prototype.destroy=function(){for(var t=this.children.length-1;t>=0;t--)this.children[t].destroy();this.children=[],this._animateClassObjects=[],this.element=null},t.RenderObject=function(){t.DisplayObject.call(this),this.transformElement=document.createElement("div"),this.contentElement||(this.contentElement=document.createElement("div")),this.transformElement.appendChild(this.contentElement),this.element.appendChild(this.transformElement),this.contentElement.style.position="relative",this.contentElement.style.transformOrigin="50% 50% 0",this.transformElement.style.position="absolute",this._translateXPercent=0,this._translateYPercent=0,this._sx=0,this._sy=0,this._sScaleX=1,this._sScaleY=1,this._sScaleZ=1,this._sRotateX=0,this._sRotateY=0,this._sRotateZ=0,this._contentWidth=0,this._contentHeight=0,this._onClick=null,this._listneEvent="tap",t.isPC()&&(this._listneEvent="click"),this.$el=$(this.element),this._animateClassObjects=[]},t.inherit(t.RenderObject,t.DisplayObject),t.RenderObject.prototype.setContentWidth=function(t){this._contentWidth=t,this.contentElement.style.width=t+"px"},t.RenderObject.prototype.setContentHeight=function(t){this._contentHeight=t,this.contentElement.style.height=t+"px"},t.RenderObject.prototype.setScale=function(t,e){this._translateXPercent||(this._translateXPercent=(t-1)/2*100,this._translateYPercent=(e-1)/2*100),this._sScaleX=t,this._sScaleY=e,this.elementTransform()},t.RenderObject.prototype.setRotate=function(t,e,i){this._sRotateX=t,this._sRotateY=e,this._sRotateZ=i,this.elementTransform()},t.RenderObject.prototype.elementTransform=function(){var e="translate3d("+this._translateXPercent+"%,"+this._translateYPercent+"%,0) ",i="rotateX("+this._sRotateX+"deg) rotateY("+this._sRotateY+"deg) rotateZ("+this._sRotateZ+"deg) ",s="scale3d("+this._sScaleX+","+this._sScaleY+","+this._sScaleZ+") ";t.Css.css3(this.transformElement,"transform",e+i+s)},t.RenderObject.prototype.destroy=function(){this.$el.unbind(this._listneEvent),this._onClick=null,t.DisplayObject.prototype.destroy.call(this)
},t.RenderObject.prototype.__defineSetter__("onClick",function(t){this._onClick?(this.$el.unbind(this._listneEvent,this._onClick),this._onClick=null,this._onClick=t.bind(this),this.$el.on(this._listneEvent,this._onClick)):(this._onClick=t.bind(this),this.$el.on(this._listneEvent,this._onClick))}),t.RenderObject.prototype.__defineGetter__("userData",function(){return this._userData}),t.RenderObject.prototype.__defineSetter__("userData",function(t){this._userData=t}),t.RenderObject.prototype.dmsStage=null,t.RenderObject.prototype.__defineSetter__("dataItemHref",function(t){var e=this.contentElement;e.setAttribute("data-item-href",t)}),t.RenderObject.createObject=function(e){var i=new t.RenderObject;return i.userData=e,i},t.RenderObject.prototype.resetAttribute=function(){if(this.userData){var e=this.userData,i=this.contentElement;i.style,this.left=e.item_left,this.top=e.item_top;var s=e.rotate_angle;this.setRotate(0,0,s);var n=e.x_scale,o=e.y_scale;this.setScale(n,o),this.alpha=(1==e.item_opacity?100:e.item_opacity)/100;var r=e.item_href,a=e.item_type;r&&8!=a&&(this.dataItemHref=r);var h=e.item_border,c=e.bd_radius+"",l=e.bd_color||"#000",p=e.bd_side,d=e.bd_style||"solid";h?p&&(p.indexOf("top")>-1&&(i.style.borderTop=h+"px "+d+" "+l),p.indexOf("right")>-1&&(i.style.borderRight=h+"px "+d+" "+l),p.indexOf("bottom")>-1&&(i.style.borderBottom=h+"px "+d+" "+l),p.indexOf("left")>-1&&(i.style.borderLeft=h+"px "+d+" "+l)):i.style.border="none",c&&(i.style.borderRadius=c.indexOf("%")>-1?c:c+"px"),i.style.boxSizing="border-box";var u=e.item_animation,m=e.item_animation_val;t.ParseAnimation(this,u,m)}},t.BaseText=function(e){t.DisplayObject.call(this),this._textStr=e,this._textColor="#000000",this._fontSize="20px",this._textAlign="left",this._fontFamily="Arial",this._textWidth=0,this._textHeight=0,this.textColor=this._textColor,this.fontSize=this._fontSize,this.textAlign=this._textAlign,this.fontFamily=this._fontFamily},t.inherit(t.BaseText,t.DisplayObject),t.BaseText.prototype.__defineGetter__("htmlText",function(){return this._textStr}),t.BaseText.prototype.__defineSetter__("htmlText",function(t){this._textStr=t,this.element.innerHTML=t}),t.BaseText.prototype.__defineGetter__("textColor",function(){return this._textColor}),t.BaseText.prototype.__defineSetter__("textColor",function(t){this.element.style.color=t}),t.BaseText.prototype.__defineGetter__("fontSize",function(){return this._fontSize}),t.BaseText.prototype.__defineSetter__("fontSize",function(t){this._fontSize=t,this.element.style.fontSize=t}),t.BaseText.prototype.__defineGetter__("textAlign",function(){return this._textAlign}),t.BaseText.prototype.__defineSetter__("textAlign",function(t){this.element.style.textAlign=t}),t.BaseText.prototype.__defineGetter__("textWidth",function(){return this._textWidth}),t.BaseText.prototype.__defineSetter__("textWidth",function(t){this._textWidth=t,this.element.style.width=t+"px"}),t.BaseText.prototype.__defineGetter__("textHeight",function(){return this._textHeight}),t.BaseText.prototype.__defineSetter__("textHeight",function(t){this._textHeight=t,this.element.style.height=t+"px"}),t.BaseText.prototype.__defineGetter__("fontFamily",function(){return this._fontFamily}),t.BaseText.prototype.__defineSetter__("fontFamily",function(t){this._fontFamily=t,this.element.style.fontFamily=t}),t.Image=function(){this.element=document.createElement("img"),t.DisplayObject.call(this),this._image=null,this.loaded=!1,this.delayEventTime=5},t.inherit(t.Image,t.DisplayObject),t.Image.prototype.__defineGetter__("image",function(){return this._image}),t.Image.prototype.__defineSetter__("image",function(e){var i=this.element,s=this;this._image=t.ImageLoader.getImage(e,function(t){s.element&&(t?(s._width||(s.width=t.width),s._height||(s.height=t.height),i.src=t.src,s._dispatchImageLoadedEvent()):s._dispatchImageLoadErrorEvent())})}),t.Image.prototype._dispatchImageLoadedEvent=function(e){var i=this;i.element&&setTimeout(function(){e&&e();try{var s=document.createEvent("CustomEvent");s.initCustomEvent(t.IMAGE_LOADED,!1,!1),i.element.dispatchEvent(s)}catch(n){var s=document.createEvent("HTMLEvents");s.initEvent(t.IMAGE_LOADED,!1,!1),i.element.dispatchEvent(s)}i.loaded=!0},i.delayEventTime)},t.Image.prototype._dispatchImageLoadErrorEvent=function(){var e=this;e.element&&setTimeout(function(){try{var i=document.createEvent("CustomEvent");i.initCustomEvent(t.IMAGE_LOAD_ERROR,!1,!1),e.element.dispatchEvent(i)}catch(s){var i=document.createEvent("HTMLEvents");i.initEvent(t.IMAGE_LOAD_ERROR,!1,!1),e.element.dispatchEvent(i)}e.loaded=!1},e.delayEventTime)},t.Text=function(e,i,s,n){this._text||(this._text=new t.BaseText(e,i,s,n)),this.contentElement=this._text.element,t.RenderObject.call(this)},t.inherit(t.Text,t.RenderObject),t.Button=function(){t.RenderObject.call(this)},t.inherit(t.Button,t.RenderObject),t.ImageSprite=function(){var e=this.contentElement=document.createElement("img");t.RenderObject.call(this),e.style.backgroundSize="100% 100%",e.style.backgroundRepeat="no-repeat",e.style.display="block",this._imageUrl="",this.loaded=!1,this.delayEventTime=5},t.inherit(t.ImageSprite,t.RenderObject),t.ImageSprite.prototype.__defineGetter__("image",function(){return this._imageUrl}),t.ImageSprite.prototype.__defineSetter__("image",function(e){var i=this;this._imageUrl=t.ImageLoader.getImage(e,function(t){i.contentElement&&(t?(i._contentWidth||i.setContentWidth(t.width),i._contentHeight||i.setContentHeight(t.height),i.contentElement.src=t.src,i._dispatchImageLoadedEvent()):i._dispatchImageLoadErrorEvent())})}),t.ImageSprite.prototype._dispatchImageLoadedEvent=function(e){var i=this;i.element&&setTimeout(function(){e&&e();try{var s=document.createEvent("CustomEvent");s.initCustomEvent(t.IMAGE_LOADED,!1,!1),i.element.dispatchEvent(s)}catch(n){var s=document.createEvent("HTMLEvents");s.initEvent(t.IMAGE_LOADED,!1,!1),i.element.dispatchEvent(s)}i.loaded=!0},i.delayEventTime)},t.ImageSprite.prototype._dispatchImageLoadErrorEvent=function(){var e=this;e.element&&setTimeout(function(){try{var i=document.createEvent("CustomEvent");i.initCustomEvent(t.IMAGE_LOAD_ERROR,!1,!1),e.element.dispatchEvent(i)}catch(s){var i=document.createEvent("HTMLEvents");i.initEvent(t.IMAGE_LOAD_ERROR,!1,!1),e.element.dispatchEvent(i)}e.loaded=!1},e.delayEventTime)},t.ImageSprite.prototype.destroy=function(){t.RenderObject.prototype.destroy.call(this)},t.InputText=function(e){this._text=new t.DomText(e,document.createElement("input")),t.Text.call(this,e)},t.inherit(t.InputText,t.Text),t.MailText=function(e){this._text=new t.DomText(e,document.createElement("a")),t.Text.call(this,e)},t.inherit(t.MailText,t.Text),t.Map=function(){t.RenderObject.call(this);var e=this.contentElement;e.style.overflow="hidden",e.setAttribute("data-type","me-map"),e.id="map"+t.getNewID(),e.className="pro-wrapper"},t.inherit(t.Map,t.RenderObject),t.MultiFrame=function(){t.RenderObject.call(this);var e=this.element;e.style.overflow="hidden"},t.inherit(t.MultiFrame,t.RenderObject),t.MultiSelect=function(){t.RenderObject.call(this)},t.inherit(t.MultiSelect,t.RenderObject),t.PhoneText=function(e){this._text=new t.DomText(e,document.createElement("a")),t.Text.call(this,e)},t.inherit(t.PhoneText,t.Text),t.PicFrame=function(e,i,s){t.ImageSprite.call(this,e,i,s)},t.inherit(t.PicFrame,t.ImageSprite),t.Radio=function(){t.RenderObject.call(this)},t.inherit(t.Radio,t.RenderObject),t.Video=function(){this._playButton=document.createElement("div"),this._playButtonAnimation=document.createElement("div"),t.RenderObject.call(this),this.contentElement.appendChild(this._playButton),this.contentElement.appendChild(this._playButtonAnimation)},t.inherit(t.Video,t.RenderObject),t.WaterMark=function(e,i,s){t.ImageSprite.call(this,e,i,s)},t.inherit(t.WaterMark,t.ImageSprite),t.Container=function(e){this.element=e,t.DisplayObject.call(this)},t.inherit(t.Container,t.DisplayObject),function(t){var e=/\S+/g,i=/[\t\r\n]/g,s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,n="X".trim,o=t.Css={select:function(t){return 0==t.indexOf("#")||0==t.indexOf(".")||"body"==t?document.querySelector(t):document.getElementById(t)},createElement:function(t){var t=t||"div",e=document.createElement(t);return e},css:function(t,e,i){if("object"==typeof e){var i=i||2;for(var s in e)2==i?o.css2(t,s,e[s]):o.css3(t,s,e[s]);return null}return o.css2(t,e,i)},css2:function(t,e,i){if(void 0!==i)return t.style[""+e]=i,i;var s=getComputedStyle(t,"");return t.style[""+e]||s.getPropertyValue(""+e)},css3j:function(t,e,i){t.style[e]="-webkit-"+i,t.style[e]="-moz-"+i,t.style[e]="-ms-"+i,t.style[e]="-o-"+i,t.style[e]=""+i},css3:function(t,e,i){var s=e.charAt(0).toUpperCase()+e.substr(1);return void 0===i?o.getCss3(t,e):(t.style["webkit"+s]=i,t.style["moz"+s]=i,t.style["ms"+s]=i,t.style["o"+s]=i,void(t.style[""+e]=i))},getCss3:function(t,e){var i=getComputedStyle(t,""),s=t.style[""+e]||t.style["-webkit-"+e]||t.style["-o-"+e]||t.style["-ms-"+e]||t.style["-moz-"+e],n=i.getPropertyValue(""+e)||i.getPropertyValue("-webkit- "+e)||i.getPropertyValue("-o-"+e)||i.getPropertyValue("-ms-"+e)||i.getPropertyValue("-moz-"+e);return s||n},bakCss3:function(t,e,i){if(void 0!==i)return t.style["-webkit-"+e]=i,t.style["-moz-"+e]=i,t.style["-ms-"+e]=i,t.style["-o-"+e]=i,t.style[""+e]=i,i;var s=getComputedStyle(t,""),n=t.style[""+e]||t.style["-webkit-"+e]||t.style["-o-"+e]||t.style["-ms-"+e]||t.style["-moz-"+e],o=s.getPropertyValue(""+e)||s.getPropertyValue("-webkit- "+e)||s.getPropertyValue("-o-"+e)||s.getPropertyValue("-ms-"+e)||s.getPropertyValue("-moz-"+e);return n||o},addClass:function(t,s){var n,o,r,a,h="string"==typeof s&&s;if(h&&(n=(s||"").match(e)||[],o=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(i," "):" "))){for(a=0;r=n[a++];)o.indexOf(" "+r+" ")<0&&(o+=r+" ");t.className=this.trim(o)}},removeClass:function(t,s){var n,o,r,a,h=0===arguments.length||"string"==typeof s&&s;if(h&&(n=(s||"").match(e)||[],o=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(i," "):""))){for(a=0;r=n[a++];)for(;o.indexOf(" "+r+" ")>=0;)o=o.replace(" "+r+" "," ");t.className=s?this.trim(o):""}},hasClass:function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},trim:n&&!n.call(" ")?function(t){return null==t?"":n.call(t)}:function(t){return null==t?"":(t+"").replace(s,"")},getDynamicSheet:function(){if(!o.dynamicSheet){var t=document.createElement("style");t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),o.dynamicSheet=t.sheet}return o.dynamicSheet},getTestElement:function(){return o.testElement||(o.testElement=document.createElement("div")),o.testElement},getPrefix:function(t){for(var e="",t=t||1,i=["Moz","Webkit","ms","O",""],s=0,n=i.length;n>s;s++){var r=i[s];if(r+"Transition"in o.getTestElement().style)return 1!=t?(e=r.toLocaleLowerCase(),""!==e&&(e="-"+e+"-")):e=r,e}return e},support3d:function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var s in i)void 0!==e.style[s]&&(e.style[s]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[s]));return document.body.removeChild(e),void 0!==t&&t.length>0&&"none"!==t}}}(t),t.DomText=function(e,i){i&&(this.element=i),t.BaseText.call(this,e)},t.inherit(t.DomText,t.BaseText),t.ImageLoader={imageBuffer:{}},t.ImageLoader.getImage=function(e,i){if("string"==typeof e){if(t.ImageLoader.imageBuffer[e])i(t.ImageLoader.imageBuffer[e]);else{var s=new Image;s.onload=function(){i(s)},s.src=e,s.onerror=function(){i(null)}}return e}return"object"==typeof e?(i(e),e.src):void 0},t.Stage=function(){this.width=0,this.height=0,this._pageIndex=-1,this.pageLoadManager=null},t.ObjectConfig={1:t.ImageSprite,18:t.ImageSprite,2:t.Text,11:t.Text,12:t.PhoneText,13:t.MailText,14:t.InputText,15:t.Map,3:t.WaterMark,4:null,5:null,6:null,7:null,8:t.Video,9:null,10:t.PicFrame,17:t.MultiFrame,19:t.Button},t.SlideAnimationConfig={A10001:function(){return t.AniFade},A10002:function(){return t.AniLeftRight3D},A10003:function(){return t.AniScaleFade},A10004:function(){return t.AniSlide},A10005:function(){return t.AniSlideScale},A10006:function(){return t.AniUpDown3D},A10007:function(){return t.AniOpenDoor}},t.SlideGesture={ud:"upDown",lr:"leftRight",c:"click"},t.CloundFont={loadedMap:null,callback:null,fontPrefix:"css-font-",loadFont:function(e,i){null==this.loadedMap&&(this.loadedMap={});var s=this._checkExistFont(e,i);if(s)return s;s=this.fontPrefix+t.getNewID(),e=e.replace(/\n|\&|<br\/>|<br>/g,"");var n=t.fontServer;n=n?n:"http://agoodme.com:3000";var o=this;return fmacapi.cfs_loadfont(n,"fixed",i,e,function(t){if("undefined"!=t.src&&t.src){var r=s;o.loadedMap[e+"-"+i]=r,o._applyFont(r,n+t.src,t.type)}},function(){}),s},_applyFont:function(t,e,i){var s=document.createElement("style");s.type="text/css",s.id="style-"+t;var n="";n+="@font-face {\n",n+="  font-family: '"+t+"';\n",n+="  src: url('"+e+"') format('"+i+"');\n",n+="}\n",s.innerHTML=n,document.head.appendChild(s)},_checkOver:function(){this.loadedCount<=0&&(this.loadedCount=0,this.callback&&(this.callback(),this.callback=null))},_checkExistFont:function(t,e){var i=t.replace(/\n/g,""),s=this.loadedMap;for(var n in s)if(-1!=n.indexOf(i)&&-1!=n.indexOf(e))return s[n];return!1},loadFonts:function(t,e){this.callback=e;var i,s,n,o=this.loadedMap;for(i=t.length-1;i>=0;i--)s=t[i],("兰亭细黑"==s.fontFamily||"microsoft yahei"==s.fontFamily.toLowerCase())&&t.splice(i,1);for(i=t.length-1;i>=0;i--){s=t[i],n=s.text.replace(/\n/g,"");for(var r in o)(-1!=r.indexOf(n)&&-1!=r.indexOf(s.fontFamily)||"兰亭细黑"==s.fontFamily)&&t.splice(i,1)}if(0==t.length)return void(this.callback&&(this.callback(),this.callback=null));for(t=this.unique(t),this.loadedCount=t.length,i=0;i<t.length;i++)this.loadFont(t[i].text,t[i].fontFamily)},unique:function(t){for(var e,i,s=[],n={},o=t.length-1;o>=0;o--)i=t[o],n[i.fontFamily]?(e=n[i.fontFamily],e.text.length+i.text.length>100?(s.push(i),n[i.fontFamily]=i):e.text+=i.text):(s.push(i),n[i.fontFamily]=i);return s},clearFont:function(){if(this.loadedMap){var t;for(var e in this.loadedMap){t=this.loadedMap[e];var i=document.getElementById("style-"+t);i&&i.parentNode&&i.parentNode.removeChild(i)}}this.loadedMap=null}},function(t){var e=function(t){this.$sections=[],this.agilePageContainers=[],this._loadingTpl=['<div class="magazine-display-loading">','<div class="loading-bj">','<div class="magazine-loading-spinner">','<div class="magazine-loading-spinner-container container1">','<div class="circle1"></div><div class="circle2"></div>','<div class="circle3"></div><div class="circle4"></div>',"</div>",'<div class="magazine-loading-spinner-container container2">','<div class="circle1"></div><div class="circle2"></div>','<div class="circle3"></div><div class="circle4"></div>',"</div>",'<div class="magazine-loading-spinner-container container3">','<div class="circle1"></div><div class="circle2"></div>','<div class="circle3"></div><div class="circle4"></div>',"</div>","</div>",'<div class="radial-progress"></div>',"</div>","</div>"],this._loadingTpl=this._loadingTpl.join(""),this._pageContainerTpl='<div class="magazine-page-container hide"></div>',this._sectionTpl="<section data-page-animation='{1}' animation-direction='{2}' class=\"swiper-slide\" style='display:none;border:0' data-page-index='{0}'>",this._commentTpl='<div class="comment-discuss pointerEventsClose"  data-type="me-comments"></div>',this._htmlTpl=this._sectionTpl+this._loadingTpl+this._pageContainerTpl+this._commentTpl+"</section>",this._scriptParser=null,this._containerName=t,this.swiper=null,this._currentPage=0,this.$currentPageItem=null,this._showHandle=!1,this._animationName="slideCoverIn",this._pageLength=0,this.$swiperContainer=$(this._containerName),this._created=[],this._isLoop=!1,this.$wrapper=this.$swiperContainer.find(".swiper-wrapper"),this._animationMode={name:"slideCoverIn",autoplay:!1,interval:5e3,direction:1,lock:!1},this.userAgent=navigator.userAgent.toLowerCase(),this._onceSubmit=!0},i=e.prototype;i._initScreen=function(){var t=this.$swiperContainer[0],e=t.clientHeight,i=this.$wrapper[0],s=i.clientHeight,n=0;e>s&&(n=(e-s)/2),this.$wrapper.css({top:n+"px"})},i._initSwiper=function(){var e=this.swiper=new pageSwitch(this.$wrapper.get(0),{duration:1e3,direction:1,start:this._currentPage,loop:this.isLoop,ease:"ease",transition:"slideCoverIn",freeze:!1,mouse:!0,mousewheel:!0,autoplay:!1,filterCla:"pro-wrapper"}),i=t.pageAnimation;for(var s in i)e.addTransition(s,i[s]);var n=this;e.on("after",function(){n._currentPage=e.current,n.createPage(e.current),n.setCurrentPageAnimation(),e.current==n.pageLength-1&&n.onSwipeEnd(),n.swipeTouchEnd()}),e.on("dragStart",function(){}),e.on("dragEnd",function(){})},i.setCurrentPageAnimation=function(){var t=this._scriptParser.getPageAnimation(this._currentPage),e=1,i=this.animationName;t?(e=void 0===t.direction?1:t.direction,i=t.name||i):(e=void 0===this._animationMode.direction?1:this._animationMode.direction,i=this._animationMode.name||i),this.swiper.setTransition(i),this.swiper.direction=e,this.animationName=i,0==e?(this.$swiperContainer.find("*[data-type='magazine-arrow']").removeClass("show").addClass("hide"),this.$swiperContainer.find("*[data-type='arrow-horizontal']").removeClass("hide").addClass("show")):(this.$swiperContainer.find("*[data-type='arrow-horizontal']").removeClass("show").addClass("hide"),this.$swiperContainer.find("*[data-type='magazine-arrow']").removeClass("hide").addClass("show")),this.swiper.setTransition(i)},Object.defineProperty(i,"animationName",{set:function(e){this._animationName=e,this.swiper&&(this.swiper.mouseLock=!!t.animationMouseLock[e])},get:function(){return this._animationName}}),i.swipeTouchEnd=function(){var t,e=this.agilePageContainers[this._currentPage];if(e&&(t=e.element.querySelector("*[data-type='me-map']"))){var i=Number(t.getAttribute("me-longitude")),s=Number(t.getAttribute("me-latitude")),n=t.getAttribute("me-mark-log");this._initMap(t.id,i,s,n)}this.onSwipeTouchEnd()},e.prototype.createPageContainer=function(e){if(this.agilePageContainers[e])return this.agilePageContainers[e];var i=this._scriptParser.getPageAnimation(e),s=1,n="slideCoverIn";i?(s=void 0===i.direction?1:i.direction,n=i.name||n):(s=void 0===this._animationMode.direction?1:this._animationMode.direction,n=this._animationMode.name||n);var o=this._htmlTpl.replace(/\{0\}/,e).replace(/\{1\}/,n).replace(/\{2\}/,s),r=$(o),a=r.find(".magazine-page-container").get(0),h=new t.Container(a),c=this._scriptParser.getPageBackgroundColors()[e],l=this._scriptParser.getPageBackgroundImages()[e];c&&(h.backgroundColor=c),l&&(h.backgroundImage=l);var p=this._scriptParser.getPageSizes()[e];return h.width=p[0],h.height=p[1],r.css({}),h.element.style.border="none",this.agilePageContainers[e]=h,h},e.prototype.createPage=function(t){var e=this._scriptParser,i=e.getPageSizes();0>t?t=0:t>i.length-1&&(t=i.length-1),this._created[t]||this._createContainerAndObjects(t);var s=t;s--,s>=0||(s=i.length-1),this._created[s]||this._createContainerAndObjects(s),s=t,s++,s<=i.length-1||(s=0),this._created[s]||this._createContainerAndObjects(s)},e.prototype._createContainerAndObjects=function(t){var e,i;e=this.createPageContainer(t);var s=this._scriptParser;i=s.getPageByIndex(t),i.length>0&&(this._created[t]=!0,this._addDisplayObjectsToContainer(i,e))},e.prototype._addDisplayObjectsToContainer=function(t,e){for(var i=t.length,s=0;i>s;s++)t[s].stage=this.$swiperContainer,e.addChild(t[s]),t[s].resetAttribute()},e.prototype.showMagazine=function(t,e){this.clear(),this._currentPage=e||0,this.$wrapper.css({width:(t.tpl_width||640)+"px",height:(t.tpl_height||1008)+"px",margin:"0 auto"});var i=this;i._dataHandle(t),i.jumpTarget(t)},e.prototype.appendSlide=function(t){this._pageLength++,t=(this._sectionTpl+t+"</section>").replace(/\{0\}/,this._pageLength-1).replace(/\{1\}/,"slide").replace(/\{2\}/,1);var e=$(t);this._created[this._pageLength-1]=!0,this.swiper.append(e[0])},e.prototype.setCurrentPage=function(t){var e=this._scriptParser.getPageSizes();0>=t?t=0:t>=e.length-1&&(t=e.length-1),this._currentPage=t,this.createPage(t),this.swiper&&(this.setCurrentPageAnimation(),this.swiper.slide(t))},e.prototype._dataHandle=function(e){this._scriptParser=new t.ScriptParser(e);var i=this._scriptParser.pageLoadManager,s=this._scriptParser.getPageSizes().length;this._pageLength=s;var n=this;if(i.onPageLoaded=function(t){n._displayLoading(t,"none")},e.animation_mode){var o=JSON.parse(e.animation_mode);for(var r in o)this._animationMode[r]=o[r]}this._initUI()},e.prototype._displayLoading=function(t,e){var i,s=this.agilePageContainers[t];s&&(i=s.element)&&(i.className="magazine-page-container show",i&&(i=i.parentNode)&&(i=i.firstChild)&&(i.style.display=e))},e.prototype.__defineGetter__("currentPage",function(){return this._currentPage}),e.prototype.__defineGetter__("pageLength",function(){return this._pageLength}),e.prototype.__defineGetter__("isLoop",function(){return this._isLoop}),e.prototype.__defineSetter__("isLoop",function(t){this._isLoop=t,this.swiper&&(this.swiper.loop=t)}),e.prototype._initUI=function(){if(!this.swiper){for(var t=this._scriptParser.getPageSizes(),e=0;e<t.length;e++){var i=this.createPageContainer(e),s=i.element.parentNode;this.$wrapper.append(s)}this._initSwiper(),this._initScreen(),this.setCurrentPage(this._currentPage),this.swipeTouchEnd()}},e.prototype.onSwipeDown=function(){},e.prototype.onSwipeTouchEnd=function(){},e.prototype.onSwipeEnd=function(){},e.prototype.jumpTarget=function(e){var i=this,s="tap";t.isPC()&&(s="click"),this.$wrapper.unbind(s).bind(s,function(t){var s=$(t.target);"INPUT"!=t.target.nodeName&&$("input").blur();var n=s.attr("data-item-href");if(n||(n=s.parent().attr("data-item-href")),n)if("submit"===n)i.insertUserFeedback(e);else if(n.indexOf("pageto:")>-1){var o=n.split(":");o.length>=1&&i.setCurrentPage(parseInt(o[1]),0)}else{var r=n.replace("&amp;","&");if(i.userAgent.indexOf("micromessenger")>-1&&n.indexOf("weixin")<0){var a=encodeURIComponent(n);r="http://mp.weixin.qq.com/mp/redirect?url="+a}window.open(r,"_blank")}})},e.prototype.insertUserFeedback=function(e){var i=this;if(!this._onceSubmit)return void new t.MsgBox(i.$swiperContainer[0],"请不要重复提交");var s=!1,n={},o=$("input[data-input='user-input']");if(o.each(function(){var t=$(this).attr("data-fb-field"),e=$(this).val();t&&(n[t]=e),e&&(s=!0)}),!s)return void new t.MsgBox(i.$swiperContainer[0],"请填写表单");var r=fmacloud.Object.extend("me_customerdata"),a=new r;e.tpl_id&&a.set("cd_tplid",e.tpl_id),e.author&&a.set("cd_userid",e.author),a.set("cd_userhead","http://ac-hf3jpeco.clouddn.com/XqjQmhDhDLz4rQzeKaQVyVW7OKqPU4CvQ7QKJlPm.jpg");for(var h in n)a.set(h,n[h]);a.save(null,{success:function(){o.each(function(){$(this).val("")}),new t.MsgBox(i.$swiperContainer[0],"感谢您的参与"),i._onceSubmit=!1},error:function(t,e){console.log("Failed to create new object, with error code: "+e.message)}})},e.prototype.clear=function(){this._currentPage=0,this._pageLength=0,this._isLoop=!1,this._dataIndex=1,this.$wrapper.html(""),this._scriptParser&&this._scriptParser.destroy(),this._scriptParser=null},e.prototype.destroy=function(){this.clear(),this.agilePageContainers=[],this.swiper.animationPages=[],this.swiper.animationInPages=[],this.swiper.animationOutPages=[],this.swiper.destroy(),this.$wrapper=null,this.$swiperContainer=null,this._onceSubmit=!0},i.getPageCommentsParentDom=function(t){var e=this.agilePageContainers.length,i=null;if(!(t>=e)){var s=this.agilePageContainers[t].element.parentNode;return i=s.querySelector(".comment-discuss")}},e.prototype._initMap=function(t,e,i,s){var n=new BMap.Map(t),o=new BMap.Point(e,i);n.centerAndZoom(o,19),this._setMapEvent(n),this._addMapControl(n),this._addMarker(n,o,s)},e.prototype._setMapEvent=function(t){t.enableDragging(),t.enableScrollWheelZoom(),t.enableDoubleClickZoom(),t.enableKeyboard(),t.enablePinchToZoom()},e.prototype._addMapControl=function(t){var e=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE});t.addControl(e)},e.prototype._addMarker=function(t,e,i){var s=this._createMarker(e,i);t.addOverlay(s)},e.prototype._createMarker=function(t,e){var i=this,s=this._createIcon(e),n=new BMap.Marker(t,{icon:s}),o=new BMap.Label("赞",{offset:new BMap.Size(12,20)});return o.setStyle({color:"yellow",border:"0",width:"50px",textAlign:"center",fontSize:"16px",cursor:"pointer",fontWeight:"bold",backgroundColor:"0.05"}),n.setLabel(o),n.addEventListener("click",function(){this.openInfoWindow(i._createInfoWindow())}),n},e.prototype._createIcon=function(t){var e=new BMap.Icon(t,new BMap.Size(72,72),{anchor:new BMap.Size(36,75)});return e},e.prototype._createInfoWindow=function(){var t=this,e=new BMap.InfoWindow(t._createHtmlStr(),{enableMessage:!1});return e},e.prototype._createHtmlStr=function(){var t="";return t="<b class='iw_poi_title' title='再点击揍你'>再点击揍你</b><div class='iw_poi_content'>上海精灵天下数字技术有限公司。</div>"},t.MagazineDisplay=e}(t),function(t){t.ScriptParser=function(e){this._tpl=e,this._displayObjectPages=[],this._pageSizes=[];var i=this._tpl.page_value;this.__currentTplData=null,this.__currentStage=null,this.__currentPageObjects=null,this._pageBackgroundColors=[],this._pageBackgroundImages=[],this._pageAnimations=[],this.pageLoadManager=new t.PageLoadManager(i.length);for(var s=0;s<i.length;s++){this._displayObjectPages.push(null);var n=i[s];tplWidth=n.page_width,tplHeight=n.page_height,this._pageSizes.push([tplWidth,tplHeight]),this._pageBackgroundColors[s]=null,this._pageBackgroundImages[s]=null;var o=n.color_code;n.color_off&&(this._pageBackgroundColors[s]=o),n.img_off&&(this._pageBackgroundImages[s]=o);var r=n.page_animation;this._pageAnimations.push(r?JSON.parse(r):null)}},t.ScriptParser.prototype.getPageAnimation=function(t){return this._pageAnimations[t]},t.ScriptParser.prototype.getPageByIndex=function(e){if(this._displayObjectPages[e])return this._displayObjectPages[e];var i,s,n=this._tpl.page_value,o=this._displayObjectPages;this.__currentTplData=n[e],i=this.__currentTplData.page_width,s=this.__currentTplData.page_height,this._pageSizes[e]=[i,s],this.__currentStage=new t.Stage,this.__currentStage.pageLoadManager=this.pageLoadManager,this.__currentStage._pageIndex=e,this.__currentStage.width=i,this.__currentStage.height=s;var r=this.__currentTplData.item_object;return r&&r.length>0&&(o[e]=this._getItemDisplayObjects(r)),this.__currentTplData=null,this.__currentStage=null,this.__currentPageObjects=null,o[e]},t.ScriptParser.prototype.getPageSizes=function(){return this._pageSizes},t.ScriptParser.prototype.getDisplayObjectPages=function(){return this._displayObjectPages},t.ScriptParser.prototype.getPageBackgroundColors=function(){return this._pageBackgroundColors},t.ScriptParser.prototype.getPageBackgroundImages=function(){return this._pageBackgroundImages},t.ScriptParser.prototype._getItemDisplayObjects=function(t){this.__currentPageObjects=t;var e;t.length,t=t.sort(function(t,e){var i=parseInt(t.item_layer),s=parseInt(e.item_layer);return i-s});var i,s=[],n=t.length;for(e=0;n>e;e++){i=t[e];var o=this._getItemDisplayObject(i,t);o&&s.push(o)}return s},t.ScriptParser.prototype._getItemDisplayObject=function(t){var e=(this.__currentPageObjects,t.group_id),i=t.item_type+"";if(e>0){if("3"==i&&2==t.get("frame_style"))return null;if(17==i){var s=this._createDisplayObject(t);return s}return null}return this._createDisplayObject(t)},t.ScriptParser.prototype._createDisplayObject=function(e){var i=(this.__currentPageObjects,null),s=e.item_type+"";e.__key_id=this.__currentTplData.key_id;var n=t.ObjectConfig[s];return n&&n.createObject?(i=n.createObject(e,this),i&&(i.userData=e,i.dmsStage=this.__currentStage),i):null},t.ScriptParser.prototype.destroy=function(){if(this._pageSizes=[],this.pageLoadManager=null,this._displayObjectPages){for(var t=this._displayObjectPages.length-1;t>=0;t--){var e=this._displayObjectPages[t];if(e)for(var i=e.length-1;i>=0;i--){var s=e[i];s.dmsStage.pageLoadManager=null,s.dmsStage=null,s.stage=null,s.destroy()}}this._displayObjectPages=[]}this._tpl=null}}(t),t.model={getTplById:function(t,e){var i,s,n=!1;fmacapi.tpl_get_tpl_json(t,function(t){i=t,s&&!n&&(i.page_value=s,n=!0,e(i))},function(){n||(n=!0,e(null))},!0),fmacapi.tpl_get_data_json(t,function(t){s=t.pages,i&&!n&&(i.page_value=s,n=!0,e(i))},function(){n||(n=!0,e(null))})},queryUserLevelByUserId:function(t,e,i){var s=new fmacloud.Query("_User");s.equalTo("objectId",t),s.first({success:e,error:i})},queryUserTplByUserId:function(t,e,i,s,n,o,r,a){var h=new fmacloud.Query("tplobj");h.equalTo("author",n),h.equalTo("tpl_privacy","public"),h.notEqualTo("tpl_state",1),h.equalTo("tpl_type",11),t.length>0&&h.equalTo(t,e),i.length>0&&(s?h.descending(i):h.ascending(i)),h.limit(o),h.find({success:r,error:a})},queryHotTpl:function(t,e){var i=new fmacloud.Query("appconf");i.first({success:t,error:e})}},t.tween={Linear:function(t,e,i,s){return i*t/s+e},Quad:{easeIn:function(t,e,i,s){return i*(t/=s)*t+e},easeOut:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,i,s){return i*(t/=s)*t*t+e},easeOut:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},Quart:{easeIn:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOut:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}},Quint:{easeIn:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},easeOut:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e},easeOut:function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e},easeInOut:function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e}},Expo:{easeIn:function(t,e,i,s){return 0==t?e:i*Math.pow(2,10*(t/s-1))+e},easeOut:function(t,e,i,s){return t==s?e+i:i*(-Math.pow(2,-10*t/s)+1)+e},easeInOut:function(t,e,i,s){return 0==t?e:t==s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e}},Circ:{easeIn:function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},easeOut:function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,i,s,n,o){var r;return 0==t?e:1==(t/=s)?e+i:("undefined"==typeof o&&(o=.3*s),!n||n<Math.abs(i)?(r=o/4,n=i):r=o/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-r)*Math.PI/o))+e)},easeOut:function(t,e,i,s,n,o){var r;return 0==t?e:1==(t/=s)?e+i:("undefined"==typeof o&&(o=.3*s),!n||n<Math.abs(i)?(n=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin(2*(t*s-r)*Math.PI/o)+i+e)},easeInOut:function(t,e,i,s,n,o){var r;return 0==t?e:2==(t/=s/2)?e+i:("undefined"==typeof o&&(o=.3*s*1.5),!n||n<Math.abs(i)?(n=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-r)*Math.PI/o)+e:n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*s-r)*Math.PI/o)*.5+i+e)}},Back:{easeIn:function(t,e,i,s,n){return"undefined"==typeof n&&(n=1.70158),i*(t/=s)*t*((n+1)*t-n)+e},easeOut:function(t,e,i,s,n){return"undefined"==typeof n&&(n=1.70158),i*((t=t/s-1)*t*((n+1)*t+n)+1)+e},easeInOut:function(t,e,i,s,n){return"undefined"==typeof n&&(n=1.70158),(t/=s/2)<1?i/2*t*t*(((n*=1.525)+1)*t-n)+e:i/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+e}},Bounce:{easeIn:function(t,e,i,s){return i-Tween.Bounce.easeOut(s-t,0,i,s)+e},easeOut:function(t,e,i,s){return(t/=s)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(t,e,i,s){return s/2>t?.5*Tween.Bounce.easeIn(2*t,0,i,s)+e:.5*Tween.Bounce.easeOut(2*t-s,0,i,s)+.5*i+e}}},window.locationParams=function(){var t=location.search;
t=t.substr(1,t.length);var e=t.split("&"),i={};for(var s in e){var n=e[s].split("=");i[n[0]]=n[1]}return i}(),function(t){var e=function(t){this._pageSize=t,this._loadPages=[];for(var e=0;t>e;e++)this._loadPages[e]={count:0,loaded:!0}};e.prototype.addLoad=function(t){if(this._loadPages[t]){var e=this._loadPages[t];e.count++,e.loaded&&(e.loaded=!1,this.onStartPageLoad&&this.onStartPageLoad(t))}},e.prototype.removeLoad=function(t){if(this._loadPages[t]){var e=this._loadPages[t];e.loaded?e.count=0:(e.count--,e.count<=0&&(e.count=0,e.loaded=!0,this.onPageLoaded&&this.onPageLoaded(t)))}},e.prototype.onStartPageLoad=null,e.prototype.onPageLoaded=null,t.PageLoadManager=e}(t),t.addImageToLoad=function(e,i){i=i||e.dmsStage,i.pageLoadManager.addLoad(i._pageIndex);var s=function(){i.pageLoadManager.removeLoad(i._pageIndex),e.removeEventListener(t.IMAGE_LOADED,s),e.removeEventListener(t.IMAGE_LOAD_ERROR,n)},n=function(){i.pageLoadManager.removeLoad(i._pageIndex),e.removeEventListener(t.IMAGE_LOAD_ERROR,n)};e.addEventListener(t.IMAGE_LOAD_ERROR,n),e.addEventListener(t.IMAGE_LOADED,s)},new Array("X","Y","").forEach(function(e){t.pageAnimation["flip3D"+e]=function(){var t=!1;return function(i,s,n,o){if(!(!i||!n||Math.abs(s)>1||Math.abs(o)>1)){t||(t=!0),i.parentNode.parentNode.style["-webkit-perspective"]="1000px",i.parentNode.parentNode.style.perspective="1000px",i.parentNode.style["-webkit-transformStyle"]="preserve-3d",i.parentNode.style.transformStyle="preserve-3d";var r=e||["X"],a="X"==r?-1:1,h=a*(0>s?1:-1),c=i["offset"+("X"==r?"Height":"Width")]/2;i.parentNode.style["-webkit-transform"]="translateZ(-"+c+"px) rotate"+r+"("+90*s*a+"deg)",i.parentNode.style.transform="translateZ(-"+c+"px) rotate"+r+"("+90*s*a+"deg)",i.style["-webkit-transform"]="rotate"+r+"(0) translateZ("+c+"px)",i.style.transform="rotate"+r+"(0) translateZ("+c+"px)",n&&(n.style["-webkit-transform"]="rotate"+r+"("+90*h+"deg) translateZ("+c+"px)",n.style.transform="rotate"+r+"("+90*h+"deg) translateZ("+c+"px)"),1==Math.abs(s)&&0==o&&(t=!1,i.parentNode.parentNode.style["-webkit-perspective"]="none",i.parentNode.parentNode.style.perspective="none",i.parentNode.style["-webkit-transformStyle"]="flat",i.parentNode.style.transformStyle="flat",i.parentNode.style["-webkit-transform"]="translateZ(0px) rotateX(0deg)",i.parentNode.style.transform="translateZ(0px) rotateX(0deg)",n.style["-webkit-transform"]="rotate"+r+"(0deg) translateZ(0px)",n.style.transform="rotate"+r+"(0deg) translateZ(0px)")}}}()}),new Array("X","Y").forEach(function(e){t.pageAnimation["leftRight3D"+e]=function(){var i,s,n,o,r;return function(a,h,c,l){if(!(!a||!c||Math.abs(h)>1||Math.abs(l)>1)){r="XY".indexOf(e),i=$(a).width(),s=$(a).height(),n=new t.Container(a),o=new t.Container(c),n.parentCss3("perspective","300px");var p=0,d=-200*Math.abs(h),u=-(200-200*Math.abs(h)),m=0,f=1;Math.abs(h)<.4?(m=Math.abs(h)/.4*20,p=h/.4*50,f=.1-Math.abs(h)/.4*.1+.9):(m=20-(Math.abs(h)-.4)/.6*20,p=50-(Math.abs(h)-.4)/.6*50,0>h&&(p*=-1),f=(Math.abs(h)-.4)/.6*.1+.9),h>0&&(m*=-1),p=p.toFixed(2),d=d.toFixed(2),m=m.toFixed(2),f=f.toFixed(2),0==r?(n.css3("transform","translate3d("+p+"%,0,"+d+"px) scale("+f+") rotateY("+m+"deg)"),o.css3("transform","translate3d("+-1*p+"%,0,"+u+"px) scale("+f+") rotateY("+-1*m+"deg)")):(n.css3("transform","translate3d(0,"+p+"%,"+d+"px) scale("+f+") rotateX("+m+"deg)"),o.css3("transform","translate3d(0,"+-1*p+"%,"+u+"px) scale("+f+") rotateX("+-1*m+"deg)")),o.zIndex=101}}}()}),t.animationMouseLock.openDoorX=!0,t.animationMouseLock.openDoorY=!0,new Array("X","Y").forEach(function(e){t.pageAnimation["openDoor"+e]=function(){var i,s,n,o,r,a,h,c,l;return function(p,d,u,m){if(!(!p||!u||Math.abs(d)>1||Math.abs(m)>1)){if(c="XY".indexOf(e),a=$(p).width(),h=$(p).height(),l=!1,i=new t.Container(p),s=new t.Container(u),0==d&&1==m&&(l=!0),!l&&m>d)if(n&&"up"!=n)l=!0;else{n="up",i.zIndex=101,s.zIndex=100,o||(r=p.cloneNode(!0),p.parentNode.appendChild(r),o=new t.Container(r),o.zIndex=101,0==c?(i.css2("clip","rect(0px,"+a/2+"px,"+h+"px,0px)"),o.css2("clip","rect(0px,"+a+"px,"+h+"px,"+a/2+"px)")):(i.css2("clip","rect(0px,"+a+"px,"+h/2+"px,0px)"),o.css2("clip","rect("+h/2+"px,"+a+"px,"+h+"px,0px)")),$(o.element).find(".animated").removeClass("animated"));var f=50*d,g=-f;i.css3("transform","translate"+e+"("+f+"%)"),o.css3("transform","translate"+e+"("+g+"%)");var v=.4*Math.abs(d)+.6;s.css2("opacity",Math.abs(d)+""),s.css3("transform","scale("+v+")"),-1>=d&&(l=!0)}if(!l&&d>m)if(n&&"down"!=n)l=!0;else{n="down",i.zIndex=100,s.zIndex=101,r||($('<div style="position: absolute; z-index: 102; left: 40px; top: 0px; overflow: hidden; opacity: 1; width: 600px; height: 501px;"><div style="position: absolute;"><div style="position: relative; transform-origin: 50% 50% 0px; border: none;"></div></div><div style="position: absolute; z-index: 0; left: 0px; top: 0px; opacity: 1;"><div style="position: absolute; "><img class="fadeInDown animated" src="http://ac-syrskc2g.clouddn.com/VVdyCiQR3hPkWkyTExkfstCh8XjXtp9dgnxtmLKY.jpg" style="position: relative; transform-origin: 50% 50% 0px; display: block; border: none;-webkit-animation-duration: 1s; animation-duration: 1s; width: 600px; height: 501px; background-size: 100% 100%; background-repeat: no-repeat;"></div></div></div>').appendTo($(u).find(".magazine-page-container")),r=document.createElement("section"),window.getComputedStyle?window.getComputedStyle(u,""):u.currentStyle,r.setAttribute("style",u.getAttribute("style")),r.setAttribute("data-page-animation","openDoorX"),r.setAttribute("animation-direction","0"),r.className=u.className,r.innerHTML=u.innerHTML,u.parentNode.appendChild(r),r.style.zIndex=101,0==c?(u.style.clip="rect(0px,"+a/2+"px,"+h+"px,0px)",r.style.clip="rect(0px,"+a+"px,"+h+"px,"+a/2+"px)"):(u.style.clip="rect(0px,"+a+"px,"+h/2+"px,0px)",r.style.clip="rect("+h/2+"px,"+a+"px,"+h+"px,0px)"));var f=-1*(50-50*d),g=-1*f;u.style.webkitTransform="translate"+e+"("+f+"%)",u.style.transform="translate"+e+"("+f+"%)",r.style.webkitTransform="translate"+e+"("+g+"%)",r.style.transform="translate"+e+"("+g+"%)";var v=.4-.4*d+.6;i.css2("opacity",Math.abs(m)+""),i.css3("transform","scale("+v+")"),d>=1&&(l=!0)}l&&(r&&(r.parentNode&&r.parentNode.removeChild(r),r=null),i&&i.css2("clip","auto"),i&&i.css2("opacity","1"),s&&s.css2("clip","auto"),n=o=s=i=null,u=null,l=!1)}}}()}),function(t){var e=function(t,e,i){this.__container=t,this.__blurLayer=e,this.__blurLayer.style.WebkitFilter="blur(7px)",i=i.replace("width=","width='100%'  ").replace("width:","width:100%; ").replace("&lt;","<").replace("&gt;",">");var s=this;this._supernatant||(this._supernatant=document.createElement("div"));var n=this._supernatant.style;n.position="absolute",n.zIndex="100000",n.left="0",n.top="0",n.width="100%",n.height="100%",n.backgroundColor="rgba(0,0,0,.65)";var o=document.createElement("div"),r=o.style;r.position="absolute",r.right="34px",r.top="34px",r.width="58px",r.height="58px",r.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADoAAAA6CAMAAADWZboaAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAV1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC7u7uRkZHs7OycnJwAAADxN0xuAAAAHHRSTlMABidFWm9+hIoKOmqHG1sXYUoYdTOGQ0zQvPDAdFT41AAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAFLSURBVEjHpZfZmoMgDIXB9VSpdevq+7/nWNvOFCcsenInX34hIYGDUpLpJM3yogTKIs/SRKtIO1S1gWWmrg4R4LFZcW+6OQbAUwuntScPqDsDj5nOGXQ/IGBDL5PjOUQC51EiL2HwaZf/5DWOBK475xTmHeNJwIq3j8jQV66+8qyDu2Lb8Le/3TYS6H6rz2xFzacm263kXM/vXrEGb3fZ+X6zPl991Nguj0kip4f9y2bpbLN2miRyNWievV8F3cShakbr8BTSQuq5HISdWbmKIRitEjkpU4AEEpUiwDpIpCqDn3WRyFQOL+skkasCPtZNolAlPKyHRKkAD+shAQYlFkykidgcoiSIQiTKn2g6otWZA4Y41ojDlDnCiYuDua6IS5K5mglBwMgQRvwwkosReoy8ZEQtI6UVIeCXPtr7bFgkzd7HyivomCfSDxqOYr3jUPvqAAAAAElFTkSuQmCC')",o.onclick=function(){s._destroy()};var a=document.createElement("div"),h=a.style;h.width="100%",h.height="700px",h.margin="210px auto",h.textAlign="center",a.innerHTML=i,this._supernatant.appendChild(o),this._supernatant.appendChild(a),this.__container.appendChild(this._supernatant)};e.prototype._destroy=function(){this._supernatant&&(this.__container.removeChild(this._supernatant),this.__blurLayer.style.WebkitFilter="blur(0)",this._supernatant=null)},t.IframeVideoPlayer=e}(t),function(t){var e=function(t,e){this.__container=t;var i=this;this._supernatantDiv||(this._supernatantDiv=document.createElement("div"));var s=this._supernatantDiv.style;s.position="absolute",s.zIndex="100000",s.left="0",s.top="0",s.width="100%",s.height="100%",s.backgroundColor="rgba(0,0,0,.4)";var n=document.createElement("div"),o=n.style;o.position="relative",o.width="460px",o.height="246px",o.margin="0 auto",o.top="38%",o.background="#FFFFFF",o.borderRadius="12px";var r=document.createElement("div");r.innerHTML=e;var a=r.style;a.fontSize="32px",a.textAlign="center",a.color="#000",a.width="100%",a.height="171px",a.lineHeight="171px",a.position="absolute",a.top="0";var h=document.createElement("div");h.innerHTML="确&nbsp;&nbsp;&nbsp;&nbsp;认";var c=h.style;c.position="absolute",c.bottom="0",c.fontSize="28px",c.textAlign="center",c.color="#005BFF",c.width="100%",c.height="75px",c.lineHeight="75px",c.border="none",c.borderTopWidth="1px",c.borderTopStyle="solid",c.borderTopColor="#D3D3D7",c.background="transparent",c.outline="0",c.WebkitUserSelect="none",c.userSelect="none",c.boxSizing="border-box",c.borderBottomRightRadius="12px",c.borderBottomLeftRadius="12px",h.onclick=function(){$(this).blur(),i._destroy()},n.appendChild(r),n.appendChild(h),this._supernatantDiv.appendChild(n),this.__container.appendChild(this._supernatantDiv)};e.prototype._destroy=function(){this._supernatantDiv&&(this.__container.removeChild(this._supernatantDiv),this._supernatantDiv=null)},t.MsgBox=e}(t),function(t){var e=function(e,i){this.__container=e;var s=this,n="tap";t.isPC()&&(n="click"),this._videoDiv||(this._videoDiv=document.createElement("div"));var o=this._videoDiv.style;o.position="absolute",o.zIndex="1000000",o.width="100%",o.height="100%",this._video||(this._video=document.createElement("video")),this._video.width=i.item_width,this._video.height=i.item_height,this._video.setAttribute("id","vjs_video_1"),this._video.preload="none",this._video.controls="controls",this._video.autoplay="autoplay",this._video.setAttribute("x-webkit-airplay","true"),this._video.setAttribute("webkit-playsinline","true");var r=i.item_val;r&&(this._video.poster=r);var a=this._video.style;a.position="absolute",a.zIndex="1";var h=document.createElement("source");h.src=i.item_href,h.type="video/mp4";var c=document.createElement("div");c.setAttribute("id","playPauseDiv");var l=c.style;l.position="absolute",l.zIndex="2",l.width="50px",l.height="50px",l.left="0",l.bottom="0";var p=document.createElement("div");p.setAttribute("id","fullScreenDiv");var d=p.style;d.position="absolute",d.zIndex="2",d.width="50px",d.height="50px",d.right="0",d.bottom="0",this._video.appendChild(h),this._videoDiv.appendChild(this._video),this._videoDiv.appendChild(c),this._videoDiv.appendChild(p),this.pauseDiv=document.createElement("div");var u=this.pauseDiv.style;u.position="absolute",u.display="none",u.zIndex="1000003",u.width="100%",u.height="100%",r&&(u.background="url("+r+") no-repeat center",u.backgroundSize="cover");var m=document.createElement("div"),f=m.style;f.position="relative",f.zIndex="1",f.width="100%",f.top="0",f.left="0",f.height="100%",f.background="rgba(0,0,0,.65)";var g=document.createElement("div");g.setAttribute("id","replayBtn");var v=g.style;v.position="absolute",v.zIndex="3",v.width="88px",v.height="88px",v.top="40%",v.left="45%",v.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAACBCAMAAADQfiliAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACkVBMVEUAAAD////////////5+fns7Ozs7Ozv7+/09PT4+Pj////////////5+fns7Oz+/v7g4OC4uLiRkZFwcHBWVlZDQ0MtLS0gICATExMQEBD////7+/vt7e39/f3j4+Ojo6NlZWU0NDQJCQkAAAD29vby8vL29vavr69iYmIaGhr////9/f3w8PD29vampqZNTU0HBwf////y8vL6+vrOzs5jY2MLCwv////x8fH8/PyoqKgzMzP////x8fH7+/uYmJgeHh709PSenp78/Pz29vbExMQuLi7x8fHu7u78/Pz5+fmfn5/////v7+9LS0v////09PS7u7sXFxf8/Pz5+fmBgYECAgL19fX19fVMTEz////x8fHp6ekwMDDx8fHY2NgbGxv////y8vLOzs7JyckPDw8XFxdvb2+VlZWZmZmBgYE3Nzdqamrk5OTs7Oy6uro0NDRaWlrr6+vp6emhoaEcHBzW1tbg4OCOjo5/f3/Gxsbj4+OLi4sJCQk4ODhlZWXV1dXZ2dltbW0xMTHExMQGBgaCgoLg4ODKyspOTk67u7sVFRWcnJzn5+e1tbUuLi6ysrKgoKAZGRlKSkrJycnh4eGFhYUHBwfX19dpaWmHh4fGxsZISEgrKysxMTG3t7ebm5tPT0/Y2NjU1NRkZGRERESjo6Ourq4pKSk1NTXm5uaZmZkSEhJTU1POzs7e3t59fX1ycnLa2trS0tJfX18NDQ2Pj4/BwcE/Pz8fHx+mpqbq6uqsrKwkJCQ6Ojq8vLzm5uaTk5MQEBBZWVnNzc3d3d15eXkEBAR4eHjb29vQ0NAODg6RkZG+vr47Ozurq6upqak/Pz+/v79eXl6enp7d3d0eHh6/v7+rq6uXl5cAAACejrBqAAAA2nRSTlMACR0sO05ZYmhrbgUeOFZuamtubm5ubm5ubhU2Wm5qbW5ubm49ZWxsbm4GLl9tbW5uDkNsa25uEk1tbW4PTG1ubj5tKGlsblVsKmttB2xuE2NtbiZsbm44bW4CSWxuUmxuBFVsbW5zipeZkHqJu8CmeoS/vpx0tLmVj6u6k3B7h7O1iXmrb5C6roCmc5q+pHijm3N/rbqScLSIkqx/eHqlmoG2soZ+naF3er2YcoKvuI6LtrKFcZWpfXWevqB2e6i8lnKDsLeOb423sXKWqHyfnnyohZu4damgmBCGal4AAAABYktHRACIBR1IAAAACXBIWXMAAAsSAAALEgHS3X78AAAFkElEQVR42s2c92MURRTHN/3S2yW5S09eer/US7v03tuRnpCAKOLSxAbYQlNEAUVQsaBYEDt2BLFGxV5Q/xt37hLJJXe3s7OzzHx/yf0we+9zs7Ozb16JIJDIw9PL28fXT+cfgOSv8/P18fby9CD6LsUKDAoO0YWGhUdE6qOiYwxGo9EQEx2lj4wIDwvVhQQHBWprPjYuPiExKTklFZwpNSU5KTEhPi5WM/Np6RmZWdngXtlZmRnpaRpA5OTm5RcUFgGOigoL8vNyc6jaNxWXlJaVY5m3q7ystKTYRM1+hbmyqlqBebuqqyrNFVTs19Ra6uoV20eqr7PU1qi2n9NgaSSzb2NotDSoXA9NzS2txPaRWluam1TYN7W161XZR9K3txEvyY7OLqNqAABjV2cHkf1uc08vBftIvT3mbuUAff0Dg5QAAAYH+vuUAgwNj1ipAQBYR4aHlAGsGx2jaB9pbHSdAvvjE5NTlAEApiYnxrEBpmdmqQMAzM5MYyKsn5s3aAAAYJifW481A3MbNmoCALBxwxzGLIxPz2sFICHMY9yIiRltboFdhpkJ2cdwUotFeF2zkzIP5dAo/cfQUVOjbremvmHaG9FajQ272aC7+0c0BwAY6Xf9mjIP0HwXuJJ1wOwKoKOH3tvQnQZ7XPgLpk5a/oCcejude01tXTcIAKCrzRlAUzsNlwxPxnYn7mtOs3qnFF/65rVOfEPLDQQAaGlYDVBjUXcuUKpWy+rTVG0jxmU3bbr5ls230kForHUEqLBgHM223CYibd1Gg6De4nisNdfJX7N9h2jXztt3UUCoc9gZTZUYU3CHKN551933IIbde/aqn4TKldtScZX8FbukH3+v9Pe++xHDAw+qfoVUFa/YC0owAhQLorjP9mH/gYOI4dBDKgmqS67vCbmlGBdsE8WHlz4efuQIYnh0QR1Cae7/BHllyggAHjtqW5LHjqshKMtbBojNxwlSORAAPP4EYjjx5ElygvL85aBfWgHO+FUE0vZwCjGceoocoSBtiSC9kIgATj59AjE8c5qUoDB96SZkYAUq1xIAHD+2EzEcfZaMoCjDfhviMrGGOyMAeO55hHDkhcNECJlxNoL4LBUEAGcOIYaDB/YTEGTFI4DABLlgtXsCsG56ETG8dFY5QXYCSgYEJeKNdkkAsHfPbsSw72XFCIlBEkFwkmoC6aXxClqSO159TSFBUrBEEJJMgQDg3FY0Da+ff0MRQXKIRKBLoUIA8OZbiOHtd5QsyRSdlLQKTcUbLEsA1nffQwwX3scnSA31EDzDMAfLEwB88KHNkfvoY2yEME/BK5wiAcAnn15ES/KzS5jfGu4leEdQJQC4/DmahitffIn1rRHegk8kZQKAr75GDN98u4gxNtJH8MU9rOETwOJ33yOGH7bLD9X7Cn5R9AkArv54BTH89LPcwCg/QRetBQHApV/Qkrz4q4wfF60T/GO0IQD47Xfb7uAeIcZfCMANYComAPjjgoTwp9shhgAhADduQUAAi+dF8S+3I4waE8A1aRKYEuDNAfN1oOGz8Dfes8B+P9B2T7wsN1DaE9m/F9i/G9n7B9r4SP8o8JGo+olXSfxE9r4y+/MC5TPTvwRnJirnxmtqzo3sz87s4weUYiibyWMo6uJICzTiSOxjaezjiSpjqltI7a+IqRLFlU/TjCuzj61zkF8gy7GcUWffIceiKM90Vos8Ewe5Nvb5RmU513MU7K/JubLPO3OQe2dff8BBDQb7OhQOanE4qEdiX5PFQV0aB7V57OsTOajR5KBOlYNaXQ7qldnXbHNQt85B7T4H/QsC+x4OgYM+Fg56eTjoZxLY93QJHPS1Cex7+wQO+hsF9j2eSKz7XJFY9/oise53tolxz/cSBNu+d7sY9/4vi+b/P/gPvWFgn17yT0wAAAAASUVORK5CYII=') center no-repeat",v.backgroundSize="cover",m.appendChild(g),this.pauseDiv.appendChild(m),this.endDiv=document.createElement("div");var y=this.endDiv.style;y.position="absolute",y.display="none",y.zIndex="1000005",y.width="100%",y.height="100%",r&&(y.background="url("+r+") no-repeat center",y.backgroundSize="cover");var _=document.createElement("div"),b=_.style;b.position="relative",b.zIndex="1",b.width="100%",b.top="0",b.left="0",b.height="100%",b.background="rgba(0,0,0,.65)";var w=document.createElement("span");w.innerHTML="重新开始",w.setAttribute("id","endSpan");var x=w.style;x.position="absolute",x.zIndex="3",x.display="inline-block",x.padding="0 20px",x.top="40%",x.left="35%",x.height="70px",x.fontSize="30px",x.textAlign="center",x.borderRadius="20px",x.background="#1b1b1b",x.lineHeight="70px",x.color="#fff",x.letterSpacing="5px",_.appendChild(w),this.endDiv.appendChild(_),this.__container.appendChild(this._videoDiv),this.__container.appendChild(this.pauseDiv),this.__container.appendChild(this.endDiv),$("#playPauseDiv").on(n,function(){s._video.paused?s.play():s.pause()}),$("#fullScreenDiv").on(n,function(){s._video.requestFullscreen?s._video.requestFullscreen():s._video.mozRequestFullScreen?s._video.mozRequestFullScreen():s._video.webkitRequestFullscreen?s._video.webkitRequestFullscreen():s._video.msRequestFullscreen&&s._video.msRequestFullscreen()}),$("#replayBtn").on(n,function(){s.play()}),$("#endSpan").on(n,function(){s.play()}),this._video.addEventListener("ended",function(){s.endDiv.style.display="block"}),this._video.addEventListener("loadedmetadata",function(){s.play()})};e.prototype.play=function(){this.pauseDiv.style.display="none",this.endDiv.style.display="none",this._video.play()},e.prototype.pause=function(){this.pauseDiv.style.display="block",this._video.pause()},e.prototype._destroy=function(){this._videoDiv&&(this.__container.removeChild(this._videoDiv),this.__container.removeChild(this.pauseDiv),this.__container.removeChild(this.endDiv),this._videoDiv=null)},t.VideoPlayer=e}(t),t.AniFade=function(e,i){this.width=e,this.height=i,this.opacity=1,this.slideDirection=t.SlideGesture.ud,this.isMoveSpeedControl=!0,this.transformTime=600,this.fadeOutTime=600,this.fadeOutTime2=200,this.transitionFunction="linear",this.transformFillMode="forwards",this.rate=.001,this.pointer={},this.isLoop=!0,this.pageLength=1,this.index=0,this.y=this.height,this.isSameAnimation=!1},t.AniFade.prototype.start=function(e,i,s,n,o,r){!i||i.length<=0||(this.slider=e,this.container=new t.Container(i[0]),this.pointer=s,this.isLoop=n,this.pageLength=o,this.index=r,this.opacity=1,this.prev=null,this.y=this.height)},t.AniFade.prototype.move=function(t,e){if(this.container&&this.container.element){var i=t.clientY-this.pointer.y;if(0>i)if("undefined"==typeof this.direction||"up"===this.direction){if(!this.isLoop&&this.index===this.pagelength-1)return;this.y+=i,this.opacity+=i*this.rate,"up"!=this.direction&&(this.direction="up",e&&e(this.direction))}else this.y-=i,this.opacity-=i*this.rate,this.opacity>1&&(this.opacity=1,this.y=this.height);else if(i>0)if("undefined"==typeof this.direction||"down"===this.direction){if(!this.isLoop&&0===this.index)return;this.y-=i,this.opacity-=i*this.rate,"down"!=this.direction&&(this.direction="down",e&&e(this.direction))}else this.y+=i,this.opacity+=i*this.rate,this.opacity>1&&(this.opacity=1,this.y=this.height);0!=i&&this.container.css2("opacity",Math.abs(this.opacity)),this.pointer.x=t.clientX,this.pointer.y=t.clientY}},t.AniFade.prototype.end=function(e,i,s){if(this.y===this.height)return this.direction=void 0,void(s&&s());e&&e(),"up"==this.direction?(this.prev=$(this.container.element).next(),this.prev.length<=0&&(this.prev=this.slider.first())):(this.prev=$(this.container.element).prev(),this.prev.length<=0&&(this.prev=this.slider.last())),this.prev=new t.Container(this.prev[0]),this.prev.css2("opacity","0"),this.container.css2("opacity","0"),this.container.css3("transition",this.fadeOutTime2/1e3+"s");var n=this,o=setTimeout(function(){n.prev.removeClass("hide"),n.prev.addClass("active show"),n.prev.css3("animation","fadeIn22 "+n.fadeOutTime/1e3+"s "+n.transitionFunction+" "+n.transformFillMode);var t=setTimeout(function(){n.container.addClass("hide"),n.container.removeClass("show active"),n.container.css3("transition","0s"),n.container.css2("opacity","1"),n.prev.css2("opacity","1"),n.prev.css3("animation",""),i&&i(),n.container&&n.container.destroy(),n.container=null,n.prev&&n.prev.destroy(),n.prev=null,clearTimeout(t)},n.fadeOutTime);clearTimeout(o)},this.fadeOutTime2);this.y=this.height,this.direction=void 0},t.AniFade.prototype.moveIn=function(e,i){this.container=new t.Container(e[0]);var s=this,n=setTimeout(function(){s.container.removeClass("hide"),s.container.addClass("show active"),s.container.css3("animation","fadeIn "+s.transformTime/1e3+"s "+s.transitionFunction),clearTimeout(n)},this.fadeOutTime-300),o=setTimeout(function(){i&&i("inEd"),s.destroy(),clearTimeout(o)},this.transformTime+this.fadeOutTime-300)},t.AniFade.prototype.moveOut=function(e,i){this.container=new t.Container(e[0]),this.container.css3("animation","fadeOut "+this.fadeOutTime/1e3+"s");var s=this,n=setTimeout(function(){i&&i("outEd"),s.container.addClass("hide"),s.container.removeClass("show active"),s.destroy(),clearTimeout(n)},this.fadeOutTime)},t.AniFade.prototype.moveInReverse=function(t,e){this.moveIn(t,e)},t.AniFade.prototype.moveOutReverse=function(t,e){this.moveOut(t,e)},t.AniFade.prototype.destroy=function(){this.container.css3("animation",""),this.container.css3("transform","translate3d(0,0,0)"),this.container.css3("transition","0s"),this.container&&this.container.destroy(),this.container=null},t.AniLeftRight3D=function(e,i){this.width=e,this.height=i,this.slideDirection=t.SlideGesture.lr,this.opacity=1,this.transformTime=1e3,this.transitionFunction="ease",this.isSameAnimation=!0},t.AniLeftRight3D.prototype.moveOutToUp=function(e,i,s){if(e.length<=0||i.length<=0)return void debug.log("AniLeftRight3D->moveOutToUp()->dom not exists"+e[0].length+","+i[0].length);this.container=new t.Container(e[0]),this.next=new t.Container(i[0]),this.container.parentCss3("perspective","300px"),this.container.css3("animation","hide-right "+this.transformTime/1e3+"s "+this.transitionFunction),this.next.css3("animation","show-right "+this.transformTime/1e3+"s "+this.transitionFunction),this.next.removeClass("hide"),this.next.addClass("show active");var n=this,o=setTimeout(function(){s&&s(),n.container.addClass("hide"),n.container.removeClass("show active"),n.destroy(),clearTimeout(o)},this.transformTime-200)},t.AniLeftRight3D.prototype.moveOutToDown=function(e,i,s){if(e.length<=0||i.length<=0)return void debug.log("AniLeftRight3D->moveOutToDown()->dom not exists"+e[0].length+","+i[0].length);this.container=new t.Container(e[0]),this.next=new t.Container(i[0]),this.container.parentCss3("perspective","300px"),this.container.css3("animation","hide-left "+this.transformTime/1e3+"s "+this.transitionFunction),this.next.css3("animation","show-left "+this.transformTime/1e3+"s "+this.transitionFunction),this.next.removeClass("hide"),this.next.addClass("show active");var n=this,o=setTimeout(function(){s&&s(),n.container.addClass("hide"),n.container.removeClass("show active"),n.destroy(),clearTimeout(o)},this.transformTime-200)},t.AniLeftRight3D.prototype.destroy=function(){this.container.parentCss3("perspective","0px"),this.container&&this.container.css3("animation",""),this.next&&this.next.css3("animation",""),this.container=null,this.next=null},t.AniOpenDoor=function(e,i){this.width=e,this.height=i,this.slideDirection=t.SlideGesture.lr,this.isMoveSpeedControl=!1,this.scale=1,this.opacity=1,this.transformTime=800,this.transformTime2=100,this.transitionFunction="ease-out",this.transitionFunction2="ease-in",this.transformFillMode="forwards",this.isSameAnimation=!0},t.AniOpenDoor.prototype.moveOutToUp=function(e,i,s){if(e.length<=0||i.length<=0)return void debug.log("AniOpenDoor->moveOutToUp()->dom not exists"+e[0].length+","+i[0].length);this.container=new t.Container(e[0]);var n=e[0].cloneNode(!0);e[0].parentNode.appendChild(n),this.copy=new t.Container(n),this.next=new t.Container(i[0]),this.copy.css2("z-index","101"),this.container.css2("z-index","101"),this.next.css2("z-index","100"),this.container.css2("clip","rect(0px,"+this.width/2+"px,"+this.height+"px,0px)"),this.copy.css2("clip","rect(0px,"+this.width+"px,"+this.height+"px,"+this.width/2+"px)");for(var o=this.copy.element.getElementsByClassName("animated"),r=0;r<o.length;r++)o[r]&&o[r].className.indexOf("animated")>=0&&(o[r].className="");this.copy.css2("-webkit-transition","-webkit-transform "+this.transformTime/1e3+"s "+this.transitionFunction),this.copy.css2("transition","transform "+this.transformTime/1e3+"s "+this.transitionFunction),this.container.css2("-webkit-transition","-webkit-transform "+this.transformTime/1e3+"s "+this.transitionFunction),this.container.css2("transition","transform "+this.transformTime/1e3+"s "+this.transitionFunction);var a=this,h=setTimeout(function(){a.container.css3("transform","translate3d(-50%,0,0)"),a.copy.css3("transform","translate3d(50%,0,0)"),a.next.removeClass("hide"),a.next.addClass("show active"),a.next.css3("animation","zoomInForDoor "+a.transformTime/1e3+"s "+a.transitionFunction+" "+a.transformFillMode);var t=setTimeout(function(){a.container.removeClass("show active"),a.container.addClass("hide"),n&&n.parentNode.removeChild(n),a.destroy(),s&&s(),clearTimeout(t)},a.transformTime);clearTimeout(h)},this.transformTime2)},t.AniOpenDoor.prototype.moveOutToDown=function(e,i,s){if(e[0].length<=0||i[0].length<=0)return void debug.log("AniOpenDoor->moveOutToDown()->dom not exists"+e[0].length+","+i[0].length);this.container=new t.Container(e[0]),this.next=new t.Container(i[0]);var n=i[0].cloneNode(!0);i[0].parentNode.appendChild(n),this.copy=new t.Container(n),this.container.css2("z-index","100"),this.copy.css2("z-index","101"),this.next.css2("z-index","101"),this.next.removeClass("hide"),this.next.addClass("show active"),this.copy.removeClass("hide"),this.copy.addClass("show active"),this.next.css2("clip","rect(0px,"+this.width/2+"px,"+this.height+"px,0px)"),this.copy.css2("clip","rect(0px,"+this.width+"px,"+this.height+"px,"+this.width/2+"px)"),this.next.css3("transform","translate3d(-50%,0,0)"),this.copy.css3("transform","translate3d(50%,0,0)");var o=this,r=setTimeout(function(){o.next.css2("-webkit-transition","-webkit-transform "+o.transformTime/1e3+"s "+o.transitionFunction2),o.next.css2("transition","transform "+o.transformTime/1e3+"s "+o.transitionFunction2),o.copy.css2("-webkit-transition","-webkit-transform "+o.transformTime/1e3+"s "+o.transitionFunction2),o.copy.css2("transition","transform "+o.transformTime/1e3+"s "+o.transitionFunction2),o.container.css3("animation","zoomOutForDoor "+o.transformTime/1e3+"s "+o.transitionFunction+" "+o.transformFillMode);var t=setTimeout(function(){o.next.css3("transform","translate3d(0,0,0)"),o.copy.css3("transform","translate3d(0,0,0)");var e=setTimeout(function(){o.container.removeClass("show active"),o.container.addClass("hide"),n&&n.parentNode.removeChild(n),o.destroy(),s&&s(),clearTimeout(e)},o.transformTime);clearTimeout(t)},o.transformTime2);clearTimeout(r)},o.transformTime2)},t.AniOpenDoor.prototype.stopAnimation=function(t){for(var e=t.find(".animated"),i=0;i<e.length;i++)e[i]&&e[i].className.indexOf("animated")>=0&&($(e[i]).attr("preClassName",e[i].className),$(e[i]).attr("class","").addClass("animated"))},t.AniOpenDoor.prototype.startAnimation=function(t){for(var e=t.find(".animated"),i=0;i<e.length;i++)debug.log(i+"前="+$(e[i]).attr("class")),$(e[i]).attr("class",$(e[i]).attr("preClassName")),debug.log(i+"后="+$(e[i]).attr("class"))},t.AniOpenDoor.prototype.destroy=function(){this.container.css2("-webkit-transition","all 0 ease 0"),this.container.css2("transition","all 0 ease 0"),this.container.css3("transform","translate3d(0,0,0)"),this.container.css3("animation",""),this.container.css2("clip","auto"),this.next.css2("-webkit-transition","all 0 ease 0"),this.next.css2("transition","all 0 ease 0"),this.next.css3("transform","translate3d(0,0,0)"),this.next.css3("animation",""),this.next.css2("clip","auto"),this.container.css2("z-index","100"),this.copy=null,this.container=null},t.AniScaleFade=function(e,i){this.width=e,this.height=i,this.slideDirection=t.SlideGesture.ud,this.isMoveSpeedControl=!0,this.scale=1,this.opacity=1,this.transformTimeForPC=400,this.transformTimeForPC2=600,this.transformTime=200,this.transformTime2=600,this.transitionFunction="ease-in",this.transformFillMode="forwards",this.isSameAnimation=!1,this.pointer={},this.isLoop=!0,this.pageLength=1,this.index=0,this.x=this.width,this.y=this.height,this.rate=.001,this.rate2=.001},t.AniScaleFade.prototype.start=function(e,i,s,n,o,r){!i||i.length<=0||(this.slider=e,this.container=new t.Container(i[0]),this.pointer=s,this.isLoop=n,this.pageLength=o,this.index=r,this.opacity=1,this.scale=1,this.y=this.height,this.x=this.width,this.whiteSpace=0,this.prev=null)},t.AniScaleFade.prototype.move=function(t,e){if(this.container&&this.container.element){var i=t.clientY-this.pointer.y;if(0>i)if("undefined"==typeof this.direction||"up"===this.direction){if(!this.isLoop&&this.index===this.pagelength-1)return;this.y+=i,this.scale-=i*this.rate,this.opacity+=i*this.rate2,"up"!=this.direction&&(this.direction="up",e&&e(this.direction))}else this.y-=i,this.scale+=i*this.rate,this.opacity-=i*this.rate2,(this.scale<=1||this.opacity>1)&&(this.scale=1,this.opacity=1,this.y=this.height);else if(i>0)if("undefined"==typeof this.direction||"down"===this.direction){if(!this.isLoop&&0===this.index)return;this.y-=i,this.scale+=i*this.rate,this.opacity-=i*this.rate2,"down"!=this.direction&&(this.direction="down",e&&e(this.direction))}else this.y+=i,this.scale-=i*this.rate,this.opacity+=i*this.rate2,(this.scale<=1||this.opacity>1)&&(this.scale=1,this.opacity=1,this.y=this.height);0!=i&&("up"==this.direction&&this.container.css3("transform","scale("+Math.abs(this.scale)+")"),this.container.css2("opacity",Math.abs(this.opacity))),this.pointer.x=t.clientX,this.pointer.y=t.clientY}},t.AniScaleFade.prototype.end=function(e,i,s){if(this.y===this.height)return this.direction=void 0,void(s&&s());e&&e(),"up"==this.direction?(this.prev=$(this.container.element).next(),this.prev.length<=0&&(this.prev=this.slider.first())):(this.prev=$(this.container.element).prev(),this.prev.length<=0&&(this.prev=this.slider.last())),this.prev=new t.Container(this.prev[0]),this.prev.css2("opacity","0"),"up"==this.direction&&this.container.css3("transform","scale(2)"),this.container.css2("opacity","0"),this.container.css3("transition",this.transformTime/1e3+"s "+this.transitionFunction);var n=this,o=setTimeout(function(){n.prev.removeClass("hide"),n.prev.addClass("active show"),"up"==n.direction?n.prev.css3("animation","fadeIn22 "+n.transformTime2/1e3+"s "+n.transitionFunction+" "+n.transformFillMode):n.prev.css3("animation","scaleFadeIn "+n.transformTime2/1e3+"s "+n.transitionFunction+" "+n.transformFillMode);var t=setTimeout(function(){n.container.addClass("hide"),n.container.removeClass("show active"),n.container.css3("transition","0s"),n.container.css2("opacity","1"),n.container.css3("transform","scale(1)"),n.prev.css2("opacity","1"),n.prev.css3("animation",""),i&&i(),n.container&&n.container.destroy(),n.container=null,n.prev&&n.prev.destroy(),n.prev=null,clearTimeout(t)},n.transformTime2);clearTimeout(o)},this.transformTime);this.y=this.height,this.scale=1,this.direction=void 0},t.AniScaleFade.prototype.moveIn=function(e,i){this.container=new t.Container(e[0]);var s=this,n=setTimeout(function(){s.container.css3("animation","fadeIn22 "+s.transformTimeForPC2/1e3+"s "+s.transitionFunction),s.container.removeClass("hide"),s.container.addClass("show active"),clearTimeout(n)},this.transformTimeForPC),o=setTimeout(function(){i&&i("inEd"),s.destroy(),clearTimeout(o)},this.transformTimeForPC+this.transformTimeForPC2)},t.AniScaleFade.prototype.moveOut=function(e,i){this.container=new t.Container(e[0]),this.container.css2("opacity","0"),this.container.css3("animation","scaleFadeOut "+this.transformTimeForPC/1e3+"s "+this.transitionFunction);var s=this,n=setTimeout(function(){s.container.addClass("hide"),s.container.removeClass("show active"),i&&i("outEd"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniScaleFade.prototype.moveInReverse=function(e,i){this.container=new t.Container(e[0]),this.container.css2("opacity","0"),this.container.removeClass("hide"),this.container.addClass("show");var s=this,n=setTimeout(function(){s.container.css3("animation","scaleFadeIn "+s.transformTimeForPC2/1e3+"s "+s.transitionFunction);var t=setTimeout(function(){s.container.addClass("active"),i&&i("inEd"),s.destroy(),clearTimeout(t)},s.transformTimeForPC2);clearTimeout(n)},this.transformTimeForPC)},t.AniScaleFade.prototype.moveOutReverse=function(e,i){this.container=new t.Container(e[0]),this.container.css3("animation","fadeOut22 "+this.transformTimeForPC/1e3+"s "+this.transitionFunction);
var s=this,n=setTimeout(function(){i&&i("outEd"),s.container.addClass("hide"),s.container.removeClass("show active"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniScaleFade.prototype.destroy=function(){this.container.css3("animation",""),this.container.css3("transform","translate3d(0,0,0) scale(1)"),this.container.css2("opacity",1),this.container&&this.container.destroy(),this.container=null},t.AniSlide=function(e,i){this.width=e,this.height=i,this.slideDirection=t.SlideGesture.ud,this.isMoveSpeedControl=!0,this.transformTime=250,this.transformTimeForPC=1e3,this.transitionFunction="ease-out",this.transformFillMode="forwards",this.isSameAnimation=!1,this.pointer={},this.isLoop=!0,this.pageLength=1,this.index=0,this.scale=1,this.rate=5e-4,this.x=this.width,this.y=this.height},t.AniSlide.prototype.start=function(e,i,s,n,o,r){!i||i.length<=0||(this.slider=e,this.container=new t.Container(i[0]),this.pointer=s,this.isLoop=n,this.pageLength=o,this.index=r,this.y=this.height,this.x=this.width,this.scale=1,this.whiteSpace=0,this.prev=null)},t.AniSlide.prototype.move=function(e,i){if(this.container&&this.container.element){var s=e.clientY-this.pointer.y;if(0>s)if("undefined"==typeof this.direction||"up"===this.direction){if(!this.isLoop&&this.index===this.pagelength-1)return;this.prev=$(this.container.element).next(),this.y+=s,this.scale+=s*this.rate,this.whiteSpace=-1*(this.height-this.y),"up"!=this.direction&&(this.direction="up",i&&i(this.direction)),this.prev.length<=0&&(this.prev=this.slider.first()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,"+this.y+"px,0)"),this.prev.removeClass("hide"),this.prev.addClass("show")}else this.prev=$(this.container.element).prev(),this.y-=s,this.scale-=s*this.rate,this.scale>=1&&(this.scale=1,this.y=this.height),this.whiteSpace=this.height-this.y,this.prev.length<=0&&(this.prev=this.slider.last()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,-"+this.y+"px,0)"),this.prev.removeClass("hide"),this.prev.addClass("show");else if(s>0)if("undefined"==typeof this.direction||"down"===this.direction){if(!this.isLoop&&0===this.index)return;this.prev=$(this.container.element).prev(),this.y-=s,this.scale-=s*this.rate,this.whiteSpace=this.height-this.y,"down"!=this.direction&&(this.direction="down",i&&i(this.direction)),this.prev.length<=0&&(this.prev=this.slider.last()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,-"+this.y+"px,0)"),this.prev.removeClass("hide"),this.prev.addClass("show")}else this.prev=$(this.container.element).next(),this.y+=s,this.scale+=s*this.rate,this.scale>=1&&(this.scale=1,this.y=this.height),this.whiteSpace=-1*(this.height-this.y),this.prev.length<=0&&(this.prev=this.slider.first()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,"+this.y+"px,0)"),this.prev.removeClass("hide"),this.prev.addClass("show");0!=s&&this.container.css3("transform","translate3d(0,"+this.whiteSpace+"px,0)"),this.pointer.x=e.clientX,this.pointer.y=e.clientY}},t.AniSlide.prototype.end=function(t,e,i){if(this.container&&this.container.element){if(this.y==this.height)return this.prev&&(this.prev.addClass("hide"),this.prev.removeClass("show")),this.direction=void 0,void(i&&i());t&&t(),"up"==this.direction?this.container.css3("transform","translate3d(0,-"+this.height+"px,0)"):this.container.css3("transform","translate3d(0,"+this.height+"px,0)"),this.container.css3("transition",this.transformTime/1e3+"s "+this.transitionFunction),this.prev.css3("transform","translate3d(0,0,0)"),this.prev.css3("transition",this.transformTime/1e3+"s "+this.transitionFunction);var s=this,n=setTimeout(function(){s.container.addClass("hide"),s.container.removeClass("show active"),s.container.css3("transition","0s"),s.prev.addClass("active"),s.prev.css3("transition","0s"),e&&e(),s.container&&s.container.destroy(),s.container=null,s.prev&&s.prev.destroy(),s.prev=null,clearTimeout(n)},this.transformTime);this.y=this.height,this.scale=1,this.direction=void 0}},t.AniSlide.prototype.moveIn=function(e,i){this.container=new t.Container(e[0]),this.container.y=this.height,this.container.css3("animation","slideInUp "+this.transformTimeForPC/1e3+"s "+this.transformFillMode),this.container.removeClass("hide"),this.container.addClass("show active");var s=this,n=setTimeout(function(){i&&i("inEd"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniSlide.prototype.moveOut=function(e,i){this.container=new t.Container(e[0]),this.container.css3("transition",this.transformTimeForPC/1e3+"s "+this.transitionFunction),this.container.y=-this.height;var s=this,n=setTimeout(function(){s.container.addClass("hide"),s.container.removeClass("show active"),i&&i("outEd"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniSlide.prototype.moveInReverse=function(e,i){this.container=new t.Container(e[0]),this.container.y=-this.height,this.container.css3("animation","slideInDown "+this.transformTimeForPC/1e3+"s "+this.transformFillMode),this.container.removeClass("hide"),this.container.addClass("show active");var s=this,n=setTimeout(function(){i&&i("inEd"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniSlide.prototype.moveOutReverse=function(e,i){this.container=new t.Container(e[0]),this.container.css3("transition",this.transformTimeForPC/1e3+"s "+this.transitionFunction),this.container.y=this.height;var s=this,n=setTimeout(function(){s.container.addClass("hide"),s.container.removeClass("show active"),i&&i("outEd"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniSlide.prototype.destroy=function(){this.container.css3("animation",""),this.container.css3("transform","translate3d(0,0,0)"),this.container.y=0,this.container.css3("transition","all 0s linear"),this.container&&this.container.destroy(),this.container=null},t.AniSlideScale=function(e,i){this.width=e,this.height=i,this.slideDirection=t.SlideGesture.ud,this.isMoveSpeedControl=!0,this.scale=1,this.opacity=1,this.transformTime=250,this.transformTimeForPC=1e3,this.transitionFunction="linear",this.transformFillMode="forwards",this.isSameAnimation=!1,this.pointer={},this.isLoop=!0,this.pageLength=1,this.index=0,this.x=this.width,this.y=this.height,this.rate=5e-4,this.started=!1},t.AniSlideScale.prototype.start=function(e,i,s,n,o,r){!i||i.length<=0||(this.slider=e,this.container=new t.Container(i[0]),this.pointer=s,this.isLoop=n,this.pageLength=o,this.index=r,this.y=this.height,this.x=this.width,this.whiteSpace=0,this.started=!0,this.prev=null)},t.AniSlideScale.prototype.move=function(e,i){if(this.container&&this.container.element){var s=e.clientY-this.pointer.y;if(0>s)if("undefined"==typeof this.direction||"up"===this.direction){if(!this.isLoop&&this.index==this.pageLength-1)return;this.prev=$(this.container.element).next(),this.y+=s,this.scale+=s*this.rate,"up"!=this.direction&&(this.direction="up",i&&i(this.direction)),this.whiteSpace=-1*(this.height-this.height*this.scale),this.prev.length<=0&&(this.prev=this.slider.first()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,"+this.y+"px,0)"),this.prev.css2("z-index","101"),this.prev.removeClass("hide"),this.prev.addClass("show")}else this.prev=$(this.container.element).prev(),this.y-=s,this.scale-=s*this.rate,this.scale>=1&&(this.scale=1,this.y=this.height),this.whiteSpace=this.height-this.height*this.scale,this.prev.length<=0&&(this.prev=this.slider.last()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,-"+this.y+"px,0)"),this.prev.css2("z-index","101"),this.prev.removeClass("hide"),this.prev.addClass("show");else if(s>0)if("undefined"==typeof this.direction||"down"===this.direction){if(!this.isLoop&&0===this.index)return;this.prev=$(this.container.element).prev(),this.y-=s,this.scale-=s*this.rate,this.whiteSpace=this.height-this.height*this.scale,"down"!=this.direction&&(this.direction="down",i&&i(this.direction)),this.prev.length<=0&&(this.prev=this.slider.last()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,-"+this.y+"px,0)"),this.prev.css2("z-index","101"),this.prev.removeClass("hide"),this.prev.addClass("show")}else this.prev=$(this.container.element).next(),this.y+=s,this.scale+=s*this.rate,this.scale>=1&&(this.scale=1,this.y=this.height),this.whiteSpace=-1*(this.height-this.height*this.scale),this.prev.length<=0&&(this.prev=this.slider.first()),this.prev=new t.Container(this.prev[0]),this.prev.css3("transform","translate3d(0,"+this.y+"px,0)"),this.prev.css2("z-index","101"),this.prev.removeClass("hide"),this.prev.addClass("show");0!=s&&this.container.css3("transform","scale("+this.scale+") translate3d(0,"+this.whiteSpace+"px,0)"),this.pointer.x=e.clientX,this.pointer.y=e.clientY}},t.AniSlideScale.prototype.end=function(t,e,i){if(this.container&&this.container.element){if(this.y==this.height)return this.prev&&(this.prev.addClass("hide"),this.prev.removeClass("show")),this.direction=void 0,void(i&&i());t&&t(),this.prev.css3("transform","translate3d(0,0,0)"),this.prev.css3("transition",this.transformTime/1e3+"s");var s=this,n=setTimeout(function(){s.container.css3("transform","translate3d(0,0,0)"),s.container.css3("transition","0s"),s.container.css2("z-index","-1"),s.container.addClass("hide"),s.container.removeClass("show active"),s.prev.addClass("active"),s.prev.css3("transform","translate3d(0,0,0)"),s.prev.css3("transition","0s"),s.prev.css2("z-index","-1"),e&&e(),s.container&&s.container.destroy(),s.container=null,s.prev&&s.prev.destroy(),s.prev=null,clearTimeout(n)},this.transformTime);this.y=this.height,this.scale=1,this.whiteSpace=0,this.direction=void 0}},t.AniSlideScale.prototype.moveIn=function(e,i){this.container=new t.Container(e[0]),this.container.y=this.height,this.container.css3("animation","slideInUp "+this.transformTimeForPC/1e3+"s "+this.transformFillMode),this.container.removeClass("hide"),this.container.addClass("show active");var s=this,n=setTimeout(function(){i&&i("inEd"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniSlideScale.prototype.moveOut=function(e,i){this.container=new t.Container(e[0]),this.container.css3("transition","all "+this.transformTimeForPC/1e3+"s "),this.container.y=-this.height,this.container.scaleX=.7,this.container.scaleY=.7;var s=this,n=setTimeout(function(){s.container.addClass("hide"),s.container.removeClass("show active"),i&&i("outEd"),s.destroy(),clearTimeout(n)},this.transformTimeForPC)},t.AniSlideScale.prototype.moveInReverse=function(e,i){this.container=new t.Container(e[0]),this.container.y=this.height,this.container.css3("animation","slideInDown "+this.transformTimeForPC/1e3+"s "+this.transformFillMode),this.container.removeClass("hide"),this.container.addClass("show active");var s=this,n=setTimeout(function(){s.destroy(),i&&i("inEd"),clearTimeout(n)},this.transformTimeForPC)},t.AniSlideScale.prototype.moveOutReverse=function(e,i){this.container=new t.Container(e[0]),this.container.css3("transition","all "+this.transformTimeForPC/1e3+"s "),this.container.y+=this.height,this.container.scaleX=.7,this.container.scaleY=.7;var s=this,n=setTimeout(function(){s.container.addClass("hide"),s.container.removeClass("show active"),s.destroy(),i&&i("outEd"),clearTimeout(n)},this.transformTimeForPC)},t.AniSlideScale.prototype.destroy=function(){this.container.css3("transition","0s"),this.container.css3("animation",""),this.container.css3("transform","scale(1)"),this.container&&this.container.destroy(),this.container=null},t.AniUpDown3D=function(e,i){this.width=e,this.height=i,this.slideDirection=t.SlideGesture.ud,this.isMoveSpeedControl=!1,this.scale=1,this.opacity=1,this.transformTimeForPC=1e3,this.transformTime=1e3,this.transitionFunction="linear",this.transformFillMode="forwards",this.isSameAnimation=!0,this.trnZ=0,this.rate=5e-4,this.bgWidth=this.width,this.bgHeight=this.height,this.clipTop=0,this.clipRight=0,this.clipBottom=0,this.clipLeft=0,this.started=!1},t.AniUpDown3D.prototype.getR=function(){return this.bgHeight/2/Math.tan(.25*Math.PI)},t.AniUpDown3D.prototype.clipReset=function(){this.clipTop=new Number((this.height-this.bgHeight)/2).toFixed(1),this.clipTop<0&&(this.clipTop=0),this.clipBottom=parseInt(this.clipTop)+this.bgHeight,this.clipLeft=new Number((this.width-this.bgWidth)/2).toFixed(1),this.clipLeft<0&&(this.clipLeft=0),this.clipRight=parseInt(this.clipLeft)+this.bgWidth},t.AniUpDown3D.prototype.start=function(e,i,s,n,o,r){!i||i.length<=0||(this.slider=e,this.container=new t.Container(i[0]),i[0].querySelector(".magazine-page-container")&&this.bgWidth!=parseInt(i[0].querySelector(".magazine-page-container").style.width)&&(this.bgWidth=parseInt(i[0].querySelector(".magazine-page-container").style.width),this.bgHeight=parseInt(i[0].querySelector(".magazine-page-container").style.height)),this.clipReset(),0===this.trnZ&&(this.trnZ=Math.floor(this.getR())),this.pointer=s,this.isLoop=n,this.pageLength=o,this.index=r,this.y=0,this.scale=1,this.whiteSpace=0,this.prev=null,this.rotateX=0,this.translateY=0,this.translateZ=0,this.started=!0)},t.AniUpDown3D.prototype.move=function(e,i){if(this.container&&this.container.element){var s=e.clientY-this.pointer.y;if(0>s)if("undefined"==typeof this.direction||"up"===this.direction){if(!this.isLoop&&this.index==this.pageLength-1)return;this.prev=$(this.container.element).next(),this.y+=s,this.scale+=s*this.rate,"up"!=this.direction&&(this.direction="up",i&&i(this.direction)),this.rotateX++,this.prev.length<=0&&(this.prev=this.slider.first()),this.prev=new t.Container(this.prev[0]),this.prev.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.prev.css3("transform","rotateX(-90deg) translateZ("+this.trnZ+"px)"),this.prev.removeClass("hide"),this.prev.addClass("show")}else this.prev=$(this.container.element).prev(),this.y-=s,this.scale-=s*this.rate,this.scale>=1&&(this.scale=1,this.y=this.height),this.rotateX--,this.prev.length<=0&&(this.prev=this.slider.last()),this.prev=new t.Container(this.prev[0]),this.prev.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.prev.css3("transform","rotateX(90deg) translateZ("+this.trnZ+"px)"),this.prev.removeClass("hide"),this.prev.addClass("show");else if(s>0)if("undefined"==typeof this.direction||"down"===this.direction){if(!this.isLoop&&0===this.index)return;this.prev=$(this.container.element).prev(),this.y-=s,this.scale-=s*this.rate,this.rotateX--,"down"!=this.direction&&(this.direction="down",i&&i(this.direction)),this.prev.length<=0&&(this.prev=this.slider.last()),this.prev=new t.Container(this.prev[0]),this.prev.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.prev.css3("transform","rotateX(90deg) translateZ("+this.trnZ+"px)"),this.prev.removeClass("hide"),this.prev.addClass("show")}else this.prev=$(this.container.element).next(),this.y+=s,this.scale+=s*this.rate,this.scale>=1&&(this.scale=1,this.y=this.height),this.rotateX++,this.prev.length<=0&&(this.prev=this.slider.first()),this.prev=new t.Container(this.prev[0]),this.prev.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.prev.css3("transform","rotateX(-90deg) translateZ("+this.trnZ+"px)"),this.prev.removeClass("hide"),this.prev.addClass("show");0!=s&&0!=this.rotateX&&(this.started&&(this.container.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.container.parentCss3("transform","rotateX(0deg) translateZ(-"+this.trnZ+"px)"),this.container.css3d(this.transformTime/1e3),this.started=!1),this.container.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.rotateX=Math.floor(this.rotateX),this.rotateX=Math.min(90,this.rotateX),this.rotateX=Math.max(-90,this.rotateX),Math.abs(this.rotateX)<=65?(this.translateY=this.rotateX/45*this.trnZ*-1+200,this.translateZ=-this.trnZ):(this.translateY=-this.trnZ+200,this.translateZ=-1*(this.trnZ-Math.abs(this.rotateX-45)/45*this.trnZ)),this.container.parentCss3("transform","rotateX(-"+this.rotateX+"deg) translateY(-200px) translateZ(-"+this.trnZ+"px)")),this.pointer.x=e.clientX,this.pointer.y=e.clientY}},t.AniUpDown3D.prototype.end=function(t,e,i){if(this.started=!1,this.container&&this.container.element){if(this.y==this.height||0==this.y)return this.prev&&(this.prev.addClass("hide"),this.prev.removeClass("show"),this.prev.css2("clip","auto")),this.container.parentCss3("transform-style","flat"),this.container.parentCss3("transform","rotateX(0deg) translateZ(0px) translateY(0px)"),this.container.css2("clip","auto"),this.direction=void 0,void(i&&i());t&&t(),this.container.parentCss3("animation-fill-mode",this.transformFillMode),"up"==this.direction?this.container.parentCss3("transform","rotateX(90deg) translateY(-"+this.trnZ+"px)"):this.container.parentCss3("transform","rotateX(-90deg) translateY("+this.trnZ+"px)");var s=this,n=setTimeout(function(){s.container.addClass("hide"),s.container.removeClass("show active"),s.prev.addClass("active"),e&&e(),s.destroy3(),clearTimeout(n)},this.transformTime);this.y=0,this.direction=void 0,this.translateY=0,this.translateZ=0,this.rotateX=0,this.scale=1}},t.AniUpDown3D.prototype.moveOutToUp=function(e,i,s){if(e.length<=0||i.length<=0)return void debug.log("AniUpDown3D->moveOutToUp()->dom not exists"+e[0].length+","+i[0].length);e[0].querySelector(".magazine-page-container")&&this.bgWidth!=parseInt(e[0].querySelector(".magazine-page-container").style.width)&&(this.bgWidth=parseInt(e[0].querySelector(".magazine-page-container").style.width),this.bgHeight=parseInt(e[0].querySelector(".magazine-page-container").style.height)),this.clipReset(),this.container=new t.Container(e[0]),this.next=new t.Container(i[0]),0===this.trnZ&&(this.trnZ=Math.floor(this.getR())),this.container.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.next.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.container.css3d(this.transformTimeForPC/1e3),this.container.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.container.parentCss3("transform","rotateX(0deg) translateZ(-"+this.trnZ+"px)"),this.next.css3("transform","rotateX(-90deg) translateZ("+this.trnZ+"px)"),this.next.removeClass("hide"),this.next.addClass("show active"),this.container.parentCss3("animation","toUp3d "+this.transformTimeForPC/1e3+"s "+this.transitionFunction+" "+this.transformFillMode);var n=this,o=setTimeout(function(){s&&s(),n.container.addClass("hide"),n.container.removeClass("show active"),n.destroy2(),clearTimeout(o)},this.transformTimeForPC-100)},t.AniUpDown3D.prototype.moveOutToDown=function(e,i,s){if(e.length<=0||i.length<=0)return void debug.log("AniUpDown3D->moveOutToDown()->dom not exists"+e[0].length+","+i[0].length);e[0].querySelector(".magazine-page-container")&&this.bgWidth!=parseInt(e[0].querySelector(".magazine-page-container").style.width)&&(this.bgWidth=parseInt(e[0].querySelector(".magazine-page-container").style.width),this.bgHeight=parseInt(e[0].querySelector(".magazine-page-container").style.height)),this.clipReset(),this.container=new t.Container(e[0]),this.next=new t.Container(i[0]),0===this.trnZ&&(this.trnZ=Math.floor(this.getR())),this.container.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.next.css2("clip","rect("+this.clipTop+"px,"+this.clipRight+"px,"+this.clipBottom+"px,"+this.clipLeft+"px)"),this.container.parentCss3("transform","rotateX(0deg) translateZ(-"+this.trnZ+"px)"),this.container.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.next.css3("transform","rotateX(90deg) translateZ("+this.trnZ+"px)"),this.container.css3d(this.transformTimeForPC/1e3),this.next.removeClass("hide"),this.next.addClass("show active"),this.container.parentCss3("animation","toDown3d "+this.transformTimeForPC/1e3+"s "+this.transitionFunction+" "+this.transformFillMode);var n=this,o=setTimeout(function(){s&&s(),n.container.addClass("hide"),n.container.removeClass("show active"),n.destroy2(),clearTimeout(o)},this.transformTimeForPC-100)},t.AniUpDown3D.prototype.destroy2=function(){this.container.css2d(),this.container.parentCss3("animation",""),this.container.parentCss3("transform","rotateX(0deg) translateZ(0px)"),this.container.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.next.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.container.css2("clip","auto"),this.next.css2("clip","auto"),this.container=null,this.next=null},t.AniUpDown3D.prototype.destroy3=function(){this.container.parentCss3("transform-style","flat"),this.container.parentCss3("transform","rotateX(0deg) translateZ(0px) translateY(0px)"),this.container.parentCss3("transition","all 0s"),this.container.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.prev.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.container.css2("clip","auto"),this.prev.css2("clip","auto"),this.container=null,this.prev=null},t.AniUpDown3D.prototype.destroy=function(){this.container.parentCss3("transform-style","flat"),this.container.parentCss3("animation",""),this.container.css3("transform","rotateX(0deg) translateZ("+this.trnZ+"px)"),this.container=null},t.ParseAnimation=function(e,i,s){if(i&&t.Css.addClass(e.contentElement,i+" animated"),"undefined"!=s&&s){var n=JSON.parse(s),o=e.contentElement,r=o.style,a=.3;n.delay&&(a=parseFloat(n.delay)+a),r.WebkitAnimationDelay=a+"s",r.animationDelay=a+"s",n.duration&&(r.WebkitAnimationDuration=n.duration+"s",r.animationDuration=n.duration+"s"),n.infinite&&(r.WebkitAnimationIterationCount=n.infinite,r.animationIterationCount=n.infinite)}},t.Button.createObject=function(e){var i=new t.Button;return i.userData=e,i},t.Button.prototype.resetAttribute=function(){if(t.RenderObject.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=this.contentElement,s=e.font_size,n=e.item_color,o=~~e.item_width||0,r=~~e.item_height||0,a=i.style,h=e.item_val,c=e.font_family;a.fontSize=s;var l=e.item_cntype;2==l?a.background="url('"+h+"') no-repeat center":i.innerHTML=h;var p="mid"==e.font_halign?"center":e.font_halign,d=p||"center";a.textAlign=d;var u=e.font_style,m=e.text_decoration;u&&(a.fontStyle=u),m&&(a.textDecoration=m),o&&(a.width=o+"px"),r&&(a.height=r+"px"),a.fontFamily=t.CloundFont.loadFont(h,c),a.lineHeight=r+"px",a.letterSpacing=e.font_dist+"px",a.textShadow=e.font_frame?"0px 0px "+e.frame_pixes+"px "+e.frame_color:"none",a.whiteSpace=0===o?"pre":"pre-wrap",a.fontWeight=e.font_weight||"";var f=e.bg_color,n=e.item_color;f&&(a.backgroundColor=f),n&&(a.color=n)}},t.ImageSprite.createObject=function(e){var i=new t.ImageSprite;return i.userData=e,i},t.ImageSprite.prototype.resetAttribute=function(){if(t.RenderObject.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=this,s=e.item_cntype,n="";if(2==s)n=e.item_val;else if(3==s)if(e.__key_id){var o=e.item_val;n=fmacapi.tpl_res_img_url(e.__key_id,s,o)}else n=e.item_val;var r=~~e.item_width,a=~~e.item_height;""==n&&e.base64ImageData&&(n=e.base64ImageData),t.addImageToLoad(i,i.dmsStage),i.image=n,i.setContentWidth(r),i.setContentHeight(a),e.group_id>0}},t.InputText.createObject=function(e){var i=new t.InputText;return i.userData=e,i},t.InputText.prototype.resetAttribute=function(){if(t.Text.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=this._text.element,s=e.item_val;i.innerHTML="",s&&(i.placeholder=s);var n=e.fb_field;n?(n.indexOf("qq")>-1||n.indexOf("phone")>-1?(i.type="number",n.indexOf("qq")>-1&&i.setAttribute("oninput","checkTextLength(this, 12)"),n.indexOf("phone")>-1&&i.setAttribute("oninput","checkTextLength(this, 11)")):n.indexOf("email")>-1?i.type="mail":(i.type="text",n.indexOf("sex")>-1&&(i.maxLength=2),n.indexOf("constellation")>-1&&(i.maxLength=5),n.indexOf("username")>-1&&(i.maxLength=5)),i.setAttribute("data-fb-field",n)):i.type="text",i.setAttribute("data-input","user-input"),i.style.verticalAlign="middle",i.style.boxSizing="border-box";var o=e.bg_color;o||(i.style.backgroundColor="transparent");var r=e.item_height||0;i.style.lineHeight=r+"px",i.style.paddingLeft="10px",i.style.outline="none",i.style.resize="none"}},t.MailText.createObject=function(e){var i=new t.MailText;return i.userData=e,i},t.MailText.prototype.resetAttribute=function(){if(t.Text.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=this._text.element;i.href="Mailto:"+e.item_val,i.style.textDecoration="none",i.style.border="none",i.style.outline="none"}},t.Map.createObject=function(e){var i=new t.Map;return i.userData=e,i},t.Map.prototype.resetAttribute=function(){if(t.RenderObject.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=this.contentElement;i.style.width=e.item_width+"px",i.style.height=e.item_height+"px";var s=e.item_val;if(s)var n=s.split(",");n.length>1&&(i.setAttribute("me-longitude",n[0]),i.setAttribute("me-latitude",n[1]));var o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAABvFBMVEX///+3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAG3BAH2uWi0AAAAlHRSTlMAAA4ZFhgEDyJVh6OmtbG2nYBcSiMDAS1XmOL1/v/rwn4zCTfu+shrBmXpfBAk21TdpxITn9Y8w/NY3Pwr/RG+8UWa3yFNtx7Zb6HsJlag9yqSkeQVG+pBrIkUz+N7PpUCZrwdgzWbSe9OhkNkyic5DHXYX5PmGlu76ELAUgWu8DYubtKoF9Al+2w05flx+PZpcnBi2UmbAwAAAlRJREFUWMOt2PdXE0EQB/BcpChijCAB4QYpCQEl2BADsWABiQgRBWyABRGsYBcbGBvBS4jwD/OeqI+93b2bmfP7877Pe3e3tzszPt9GDG38/i0Fhf4i/QKfEPWa4q3bSraX7gjsDO4qK99dwYNClVV7qmtM+Buzdm9dfREZamgMhkFKpClaSIKaW5pqQJ19+1vxUCxggj5tVUio4sBBcM6hwxjoSLsJbjna4Q5VHgNE4p1uUGMXoJIoc4aOtwEyJzqdoJOnAJ3u0w7QGSDk7Dkt1GNSIOgNaaDzfUBLUgNdIDrQf1EJDQA5g0ooQIdSlxRQLEyHYEgBXWY4cGVYgkZGORC0SNBVkwVdk6DrLAdqb9ig5ps8CHpsUOsYExq3QRMJJnTrtgjdYTpwd1KE7nGhrikRKuFCoxMidJ8LhadFaIgLzTwQoYfsR3skQuNcaMz2jh5zoSdPRWiWuyEH50RoMs6Entl+kYbnTOiF/Rh5yXNevbZDb3jQW+lgK+5nQXXy4R/kOPMxGXrHObTbFddR6D0D+qC6acvpTu9HZRHxieosLKqrkc/d9E+mLrTSNOdLgbb0+0r69PX6GvLbd7wTH3Aqj3+g78mljHPBvvwT51hZtxYCJ+WS7k0NRlqJYtosd2klj2v83KRcHttBOktWBt/TOkmRJKXL1kuRX7R2XSdZq9QBglpKpemTCJWUynBmI7Ik7h/8kMUu5fLcaY0oWRn+2GeztJT1MD/aJMn7hwT9k6ys4Q36I+XShlfot5SKGt4hY3k+kTf+B2R0rBl4yHPWAZ3Vh9jHPwyUAAAAAElFTkSuQmCC";i.setAttribute("me-mark-log",o)}},t.MultiFrame.createObject=function(e,i){var s,n,o=e.group_id,r=i.__currentPageObjects,a=[];for(n=r.length-1;n>=0;n--)s=r[n],s.group_id==o&&s!=e&&e.item_type!=s.item_type&&a.push(s);a=a.sort(function(t,e){var i=parseInt(t.item_layer),s=parseInt(e.item_layer);return i-s});var h=e.item_width,c=e.item_height,l=new t.MultiFrame;l.userData=e;var p=i.__currentStage;if(i.__currentStage=new t.Stage,i.__currentStage.pageLoadManager=p.pageLoadManager,i.__currentStage._pageIndex=p._pageIndex,i.__currentStage.width=h,i.__currentStage.height=c,a.length>0){var d=null;for(n=0;n<a.length;n++){var u=a[n];d=i._createDisplayObject(u),d&&l.addChildAt(d,n)}}return i.__currentStage=p,l},t.MultiFrame.prototype.resetAttribute=function(){if(t.RenderObject.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=e.item_width,s=e.item_height;e.item_border,e.item_color,e.item_val,e.item_left,e.item_top,this.width=i,this.height=s}for(var n=this.children,o=0;o<n.length;o++)n[o].resetAttribute()},t.MultiSelect.createObject=function(e){var i=new t.MultiSelect;return i.userData=e,i},t.MultiSelect.prototype.resetAttribute=function(){t.RenderObject.prototype.resetAttribute.call(this),this.userData},t.PhoneText.createObject=function(e){var i=new t.PhoneText;return i.userData=e,i},t.PhoneText.prototype.resetAttribute=function(){if(t.Text.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=this._text.element;i.href="tel:"+e.item_val,i.style.textDecoration="none",i.style.border="none",i.style.outline="none"}},t.PicFrame.createObject=function(e){var i=new t.PicFrame;return i.userData=e,i},t.PicFrame.prototype.resetAttribute=function(){if(t.ImageSprite.prototype.resetAttribute.call(this),this.userData){var e=this,i=this.userData,s=i.item_width,n=i.item_height,o=this.dmsStage||{width:0,height:0};this.contentElement.style,0==s&&(s=o.width),0==n&&(n=o.height),e.width=s,e.height=n,e.left=0,e.top=0}},t.Radio.createObject=function(e){var i=new t.Radio;return i.userData=e,i},t.Radio.prototype.resetAttribute=function(){t.RenderObject.prototype.resetAttribute.call(this),this.userData},t.Text.createObject=function(e){var i=new t.Text;return i.userData=e,i},t.Text.prototype.resetAttribute=function(){if(t.RenderObject.prototype.resetAttribute.call(this),this.userData){var e=this.userData,i=this._text;this.regX=0,this.regY=0;var s=this.element,n=e.font_size,o=e.item_color,r=~~e.item_width||0,a=~~e.item_height||0,h=(e.item_type,i.element.style),c=e.item_val,l=e.font_family,p=parseInt(n);i.fontSize=n;var d=c.split(/(?:\r\n|\r|\n)/);c=c.replace(/\n/g,"<br/>"),i.htmlText=c;var u="mid"==e.font_halign?"center":e.font_halign,m=u||"left";i.textAlign=m;var f=e.font_style,g=e.text_decoration;f&&(h.fontStyle=f),g&&(h.textDecoration=g);var v=e.bg_color;if(v&&(h.backgroundColor=v),r&&(i.textWidth=e.item_width-1),a&&(i.textHeight=e.item_height),i.fontFamily=t.CloundFont.loadFont(c,l),t.isJsonObject(o)){var y=t.toJSON(o);i.textColor=y.colors[0]}else i.textColor=o;0!=r&&0!=a&&(i.element.style.overflow="hidden");var _=e.line_height;0!=_?d.length>=1&&0==a?h.lineHeight=_+p+"px":0!=r?0!=a&&a>_+p?h.lineHeight=_+p+"px":0==a&&(h.lineHeight=_+p+"px"):h.lineHeight=n:h.lineHeight=n,h.display="inline-block",h.wordBreak="break-all",h.verticalAlign=e.font_valight||"middle",h.letterSpacing=e.font_dist+"px",h.textShadow=e.font_frame?"0px 0px "+e.frame_pixes+"px "+e.frame_color:"none",h.whiteSpace=0===r?"pre":"pre-wrap",h.fontWeight=e.font_weight||"";var b=e.global_halign,w=(e.global_valign,this.dmsStage),x=0;s.offsetHeight,b&&(x=i.offsetWidth,s.style.left=w.width/2-x/2+"px")}},t.Video.createObject=function(e){var i=new t.Video;return i.userData=e,i},t.Video.prototype.resetAttribute=function(){t.RenderObject.prototype.resetAttribute.call(this);var e=this;if(this.userData){var i=this.userData,s=this.contentElement;s.style.width=i.item_width+"px",s.style.height=i.item_height+"px";var n=i.item_val;n&&(s.style.background="url("+n+") no-repeat center",s.style.backgroundSize="cover");var o=i.item_href,r=this._playButton.style;r.width="88px",r.height="88px",r.position="absolute",r.top="calc(50% - 44px)",r.left="calc(50% - 44px)",r.top="-webkit-calc(50% - 44px)",r.left="-webkit-calc(50% - 44px)",r.zIndex="2",r.margin="0 auto",r.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAACBCAMAAADQfiliAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACkVBMVEUAAAD////////////5+fns7Ozs7Ozv7+/09PT4+Pj////////////5+fns7Oz+/v7g4OC4uLiRkZFwcHBWVlZDQ0MtLS0gICATExMQEBD////7+/vt7e39/f3j4+Ojo6NlZWU0NDQJCQkAAAD29vby8vL29vavr69iYmIaGhr////9/f3w8PD29vampqZNTU0HBwf////y8vL6+vrOzs5jY2MLCwv////x8fH8/PyoqKgzMzP////x8fH7+/uYmJgeHh709PSenp78/Pz29vbExMQuLi7x8fHu7u78/Pz5+fmfn5/////v7+9LS0v////09PS7u7sXFxf8/Pz5+fmBgYECAgL19fX19fVMTEz////x8fHp6ekwMDDx8fHY2NgbGxv////y8vLOzs7JyckPDw8XFxdvb2+VlZWZmZmBgYE3Nzdqamrk5OTs7Oy6uro0NDRaWlrr6+vp6emhoaEcHBzW1tbg4OCOjo5/f3/Gxsbj4+OLi4sJCQk4ODhlZWXV1dXZ2dltbW0xMTHExMQGBgaCgoLg4ODKyspOTk67u7sVFRWcnJzn5+e1tbUuLi6ysrKgoKAZGRlKSkrJycnh4eGFhYUHBwfX19dpaWmHh4fGxsZISEgrKysxMTG3t7ebm5tPT0/Y2NjU1NRkZGRERESjo6Ourq4pKSk1NTXm5uaZmZkSEhJTU1POzs7e3t59fX1ycnLa2trS0tJfX18NDQ2Pj4/BwcE/Pz8fHx+mpqbq6uqsrKwkJCQ6Ojq8vLzm5uaTk5MQEBBZWVnNzc3d3d15eXkEBAR4eHjb29vQ0NAODg6RkZG+vr47Ozurq6upqak/Pz+/v79eXl6enp7d3d0eHh6/v7+rq6uXl5cAAACejrBqAAAA2nRSTlMACR0sO05ZYmhrbgUeOFZuamtubm5ubm5ubhU2Wm5qbW5ubm49ZWxsbm4GLl9tbW5uDkNsa25uEk1tbW4PTG1ubj5tKGlsblVsKmttB2xuE2NtbiZsbm44bW4CSWxuUmxuBFVsbW5zipeZkHqJu8CmeoS/vpx0tLmVj6u6k3B7h7O1iXmrb5C6roCmc5q+pHijm3N/rbqScLSIkqx/eHqlmoG2soZ+naF3er2YcoKvuI6LtrKFcZWpfXWevqB2e6i8lnKDsLeOb423sXKWqHyfnnyohZu4damgmBCGal4AAAABYktHRACIBR1IAAAACXBIWXMAAAsSAAALEgHS3X78AAAFkElEQVR42s2c92MURRTHN/3S2yW5S09eer/US7v03tuRnpCAKOLSxAbYQlNEAUVQsaBYEDt2BLFGxV5Q/xt37hLJJXe3s7OzzHx/yf0we+9zs7Ozb16JIJDIw9PL28fXT+cfgOSv8/P18fby9CD6LsUKDAoO0YWGhUdE6qOiYwxGo9EQEx2lj4wIDwvVhQQHBWprPjYuPiExKTklFZwpNSU5KTEhPi5WM/Np6RmZWdngXtlZmRnpaRpA5OTm5RcUFgGOigoL8vNyc6jaNxWXlJaVY5m3q7ystKTYRM1+hbmyqlqBebuqqyrNFVTs19Ra6uoV20eqr7PU1qi2n9NgaSSzb2NotDSoXA9NzS2txPaRWluam1TYN7W161XZR9K3txEvyY7OLqNqAABjV2cHkf1uc08vBftIvT3mbuUAff0Dg5QAAAYH+vuUAgwNj1ipAQBYR4aHlAGsGx2jaB9pbHSdAvvjE5NTlAEApiYnxrEBpmdmqQMAzM5MYyKsn5s3aAAAYJifW481A3MbNmoCALBxwxzGLIxPz2sFICHMY9yIiRltboFdhpkJ2cdwUotFeF2zkzIP5dAo/cfQUVOjbremvmHaG9FajQ272aC7+0c0BwAY6Xf9mjIP0HwXuJJ1wOwKoKOH3tvQnQZ7XPgLpk5a/oCcejude01tXTcIAKCrzRlAUzsNlwxPxnYn7mtOs3qnFF/65rVOfEPLDQQAaGlYDVBjUXcuUKpWy+rTVG0jxmU3bbr5ls230kForHUEqLBgHM223CYibd1Gg6De4nisNdfJX7N9h2jXztt3UUCoc9gZTZUYU3CHKN551933IIbde/aqn4TKldtScZX8FbukH3+v9Pe++xHDAw+qfoVUFa/YC0owAhQLorjP9mH/gYOI4dBDKgmqS67vCbmlGBdsE8WHlz4efuQIYnh0QR1Cae7/BHllyggAHjtqW5LHjqshKMtbBojNxwlSORAAPP4EYjjx5ElygvL85aBfWgHO+FUE0vZwCjGceoocoSBtiSC9kIgATj59AjE8c5qUoDB96SZkYAUq1xIAHD+2EzEcfZaMoCjDfhviMrGGOyMAeO55hHDkhcNECJlxNoL4LBUEAGcOIYaDB/YTEGTFI4DABLlgtXsCsG56ETG8dFY5QXYCSgYEJeKNdkkAsHfPbsSw72XFCIlBEkFwkmoC6aXxClqSO159TSFBUrBEEJJMgQDg3FY0Da+ff0MRQXKIRKBLoUIA8OZbiOHtd5QsyRSdlLQKTcUbLEsA1nffQwwX3scnSA31EDzDMAfLEwB88KHNkfvoY2yEME/BK5wiAcAnn15ES/KzS5jfGu4leEdQJQC4/DmahitffIn1rRHegk8kZQKAr75GDN98u4gxNtJH8MU9rOETwOJ33yOGH7bLD9X7Cn5R9AkArv54BTH89LPcwCg/QRetBQHApV/Qkrz4q4wfF60T/GO0IQD47Xfb7uAeIcZfCMANYComAPjjgoTwp9shhgAhADduQUAAi+dF8S+3I4waE8A1aRKYEuDNAfN1oOGz8Dfes8B+P9B2T7wsN1DaE9m/F9i/G9n7B9r4SP8o8JGo+olXSfxE9r4y+/MC5TPTvwRnJirnxmtqzo3sz87s4weUYiibyWMo6uJICzTiSOxjaezjiSpjqltI7a+IqRLFlU/TjCuzj61zkF8gy7GcUWffIceiKM90Vos8Ewe5Nvb5RmU513MU7K/JubLPO3OQe2dff8BBDQb7OhQOanE4qEdiX5PFQV0aB7V57OsTOajR5KBOlYNaXQ7qldnXbHNQt85B7T4H/QsC+x4OgYM+Fg56eTjoZxLY93QJHPS1Cex7+wQO+hsF9j2eSKz7XJFY9/oise53tolxz/cSBNu+d7sY9/4vi+b/P/gPvWFgn17yT0wAAAAASUVORK5CYII=') center no-repeat",r.backgroundSize="cover";
var a=this._playButtonAnimation.style;a.width="100px",a.height="100px",a.position="absolute",a.top="calc(50% - 50px)",a.left="calc(50% - 50px)",a.top="-webkit-calc(50% - 50px)",a.left="-webkit-calc(50% - 50px)",a.zIndex="1",a.margin="0 auto",a.background="rgba(31, 29, 27, 0.4)",a.WebkitAnimationName="player-button",a.WebkitAnimationDuration="2.6s",a.WebkitAnimationIterationCount="infinite",a.WebkitAnimationTimingFunction="linear",a.borderRadius="100%",this.onClick=function(t){t.stopPropagation(),t.preventDefault(),e._showVideoContent(o)}}},t.Video.prototype._showVideoContent=function(e){if(e)if(this.containerEl=this.parent.element,e.indexOf("iframe")>-1)new t.IframeVideoPlayer(this.stage[0],this.containerEl,e);else{if(this._videoPlayer)return;this._videoPlayer=new t.VideoPlayer(this.contentElement,this.userData)}},t.WaterMark.createObject=function(e){var i=new t.WaterMark;return i.userData=e,i},t.WaterMark.prototype.resetAttribute=function(){t.ImageSprite.prototype.resetAttribute.call(this),this.userData}},{}],7:[function(t,e){var i=function(t,e,i){var s,n=$("[repeat='"+t+"']").eq(0),o=n.parent(),r=n.show().prop("outerHTML"),a=/({{)[a-zA-Z0-9_\.]+[\s*\|?\s*\w]*(}})/;n.hide(),o.empty().append(n.clone());for(var h=document.createDocumentFragment(),c=0,l=e.length;l>c;c++){for(var p=r;null!=(s=a.exec(p));){var d=s[0].replace(/^({{)|(}})$/g,"");if(/indexCount/.test(d))p=p.replace(/{{indexCount}}/g,c);else if(/index/.test(d))p=p.replace(/{{index}}/g,e[c]);else{var u=void 0;if(d.indexOf("|")>-1){var m=d.split(/\s*\|\s*/);d=m[0],u=m[1]}if(d.indexOf(".")>-1){for(var f=d.split("."),g=e[c],v=0,y=f.length;y>v;v++)g=g[f[v]];p=p.replace(s[0],u?i[u](g):g)}else p=p.replace(s[0],u?i[u](e[c][d]):e[c][d])}}$(h).append(p)}o.append($(h)),n.hide()};"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof e&&"undefined"!=typeof e.exports?e.exports=i:window.Repeat=i},{}],8:[function(t,e){e.exports={removeAv:function(t){return t.substr(3)},test:function(){return"test"},timeFormat:function(t){var e=new Date(t),i=Date.now()-e;return 6e4>i?"刚刚":36e5>i?Math.round(i/6e4)+"分钟前":864e5>i?Math.round(i/36e5)+"小时前":6048e5>i?+Math.round(i/864e5)+"天前":2592e6>i?Math.round(i/6048e5)+"星期前":31536e6>i?Math.round(i/2592e6)+"个月前":Math.round(i/31536e6)+"年前"},mrPicture:function(t){return void 0==t&&(t="../../images/main/mrPicture.png"),t},mrA:function(t){return void 0==t&&(t="未命名"),t},mm:function(t){t.src=t.src.indexOf("start.png")>-1?"/images/main/reStar.png":"/images/main/start.png"}}},{}]},{},[2]);