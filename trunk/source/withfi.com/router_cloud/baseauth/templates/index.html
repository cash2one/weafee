<!DOCTYPE html>
<html class="bg-black">
    <head>
        <meta charset="UTF-8">
        <title>Smart Router Report System</title>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
        <!-- bootstrap 3.0.2 -->
        <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <!-- font Awesome -->
        <link href="/static/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <!-- Theme style -->
        <link href="/static/css/AdminLTE.css" rel="stylesheet" type="text/css" />

    </head>
    <body class="bg-black">

        <script language=javascript>
            
            function login_callback(resp){
                if(resp.return_code == 0){
                    window.location.href = resp.redirect_to;  
                }else{  
                    alert(resp.err_msg);
                }   
            }
            
            function login() {
                if ($("#username").val() == "" || $("#username").val() == null) {
                    alert("Please input user name");
                    return;
                }
                
                if ($("#password").val() == "" || $("#password").val() == null) {
                    alert("Please input password");
                    return;
                }

                var data = {
                    "username": $("#username").val(),
                    "password": $("#password").val()
                };

                //var url_dest = '/user/login?username=' + $("#username").val() + '&password=' + $("#password").val();
                var url_dest = '/user/login';
                $.ajax({
                    //FIXME change to POST, only request hashed password
                    url: url_dest,
                    type: "POST",
                    data: data,
                    dataType: "json",
                    success: login_callback
                });
            }
        </script>

        <div class="form-box">			
            <div class="header" >Login</div>
            <form action="index.html" method="post">
                <div class="body bg-gray">
                    <div class="form-group">
                        <input type="text" id="username" class="form-control" placeholder="User Name"/>
                    </div>
                    <div class="form-group">
                        <input type="password" id="password" class="form-control" placeholder="Password"/>
                    </div>
                </div>
                <div class="footer">                                                               
                    <input type="button" value="Login" class="btn bg-olive btn-block"  onclick="login()">                    
                    
					<p class="">Recommended Browsers:</p>
					<p><span class="badge bg-red">Chrome</span><span class="badge bg-yellow">Firefox</span><span class="badge bg-blue">Safari</span><span class="badge bg-green">IE9 and above</span></p>
                </div>
				<br/>
				<p class="text-center">admin.withfi.com</p>			
            </form>
        </div>

        <script src="/static/js/jquery/2.1.4/jquery.min.js"></script>
        <!-- Bootstrap -->
        <script src="/static/js/bootstrap.min.js" type="text/javascript"></script>        

    </body>
</html>
